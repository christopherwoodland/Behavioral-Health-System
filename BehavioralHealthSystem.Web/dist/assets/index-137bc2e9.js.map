{"version":3,"file":"index-137bc2e9.js","sources":["../../node_modules/react-dom/client.js","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../src/config/constants.ts","../../src/utils/index.ts","../../src/contexts/ThemeContext.tsx","../../src/hooks/accessibility.ts","../../src/components/layout/Header.tsx","../../src/components/icons/MicrosoftLogo.tsx","../../src/components/layout/Layout.tsx","../../node_modules/lucide-react/dist/esm/shared/src/utils.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/Icon.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/activity.js","../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/brain.js","../../node_modules/lucide-react/dist/esm/icons/calendar.js","../../node_modules/lucide-react/dist/esm/icons/chart-column.js","../../node_modules/lucide-react/dist/esm/icons/chart-pie.js","../../node_modules/lucide-react/dist/esm/icons/chevron-down.js","../../node_modules/lucide-react/dist/esm/icons/chevron-up.js","../../node_modules/lucide-react/dist/esm/icons/circle-alert.js","../../node_modules/lucide-react/dist/esm/icons/circle-check-big.js","../../node_modules/lucide-react/dist/esm/icons/circle-x.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/download.js","../../node_modules/lucide-react/dist/esm/icons/eye-off.js","../../node_modules/lucide-react/dist/esm/icons/eye.js","../../node_modules/lucide-react/dist/esm/icons/file-audio.js","../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../node_modules/lucide-react/dist/esm/icons/file.js","../../node_modules/lucide-react/dist/esm/icons/files.js","../../node_modules/lucide-react/dist/esm/icons/funnel.js","../../node_modules/lucide-react/dist/esm/icons/heart.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/lightbulb.js","../../node_modules/lucide-react/dist/esm/icons/loader-circle.js","../../node_modules/lucide-react/dist/esm/icons/pause.js","../../node_modules/lucide-react/dist/esm/icons/play.js","../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/shield-alert.js","../../node_modules/lucide-react/dist/esm/icons/target.js","../../node_modules/lucide-react/dist/esm/icons/trash-2.js","../../node_modules/lucide-react/dist/esm/icons/trending-down.js","../../node_modules/lucide-react/dist/esm/icons/trending-up.js","../../node_modules/lucide-react/dist/esm/icons/triangle-alert.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../node_modules/lucide-react/dist/esm/icons/user.js","../../node_modules/lucide-react/dist/esm/icons/users.js","../../node_modules/lucide-react/dist/esm/icons/volume-2.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../src/services/api.ts","../../src/hooks/api.ts","../../src/pages/Dashboard.tsx","../../src/services/audio.ts","../../src/services/azure.ts","../../src/hooks/useAccessibility.ts","../../src/pages/UploadAnalyze.tsx","../../src/pages/Sessions.tsx","../../src/components/RiskAssessment.tsx","../../src/pages/SessionDetail.tsx","../../src/pages/Predictions.tsx","../../src/pages/ControlPanel.tsx","../../src/pages/index.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","// Environment configuration\r\nexport const config = {\r\n  api: {\r\n    baseUrl: import.meta.env.VITE_API_BASE || 'http://localhost:7071/api',\r\n  },\r\n  azure: {\r\n    blobSasUrl: import.meta.env.VITE_AZURE_BLOB_SAS_URL || '',\r\n    containerName: import.meta.env.VITE_STORAGE_CONTAINER_NAME || 'audio-uploads',\r\n  },\r\n  polling: {\r\n    intervalMs: parseInt(import.meta.env.VITE_POLL_INTERVAL_MS || '3000', 10),\r\n    maxAttempts: 60, // 3 minutes at 3s intervals\r\n    backoffFactor: 1.2,\r\n  },\r\n  features: {\r\n    enableFFmpegWorker: import.meta.env.VITE_ENABLE_FFMPEG_WORKER === 'true',\r\n    enableDebugLogging: import.meta.env.VITE_ENABLE_DEBUG_LOGGING === 'true',\r\n  },\r\n  audio: {\r\n    acceptedFormats: ['.wav', '.mp3', '.m4a', '.aac', '.flac'],\r\n    maxFileSizeMB: 100,\r\n    targetSampleRate: 44100,\r\n    targetChannels: 1,\r\n  },\r\n} as const;\r\n\r\n// Storage keys\r\nexport const STORAGE_KEYS = {\r\n  USER_ID: 'bh_user_id',\r\n  THEME: 'bh_theme',\r\n  UPLOAD_SESSIONS: 'bh_upload_sessions',\r\n  PROCESSING_MODE: 'bh_processing_mode',\r\n  USER_ID_CUSTOM: 'bh_user_id_custom',\r\n} as const;\r\n\r\n// API endpoints\r\nexport const API_ENDPOINTS = {\r\n  HEALTH: '/health',\r\n  SESSIONS_INITIATE: '/sessions/initiate',\r\n  PREDICTIONS_SUBMIT: '/predictions/submit',\r\n  PREDICTIONS_BY_USER: '/predictions',\r\n  PREDICTIONS_BY_SESSION: '/predictions/sessions',\r\n} as const;\r\n\r\n// Validation constants\r\nexport const VALIDATION = {\r\n  USER_ID_PATTERN: /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,\r\n  SESSION_ID_PATTERN: /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,\r\n  MAX_FILE_SIZE_BYTES: 100 * 1024 * 1024, // 100MB\r\n} as const;\r\n\r\n// Accessibility constants\r\nexport const A11Y = {\r\n  SKIP_TO_CONTENT_ID: 'main-content',\r\n  ANNOUNCEMENTS_ID: 'a11y-announcements',\r\n  FOCUS_TIMEOUT: 100,\r\n  DEBOUNCE_MS: 300,\r\n} as const;\r\n","import { v4 as uuidv4 } from 'uuid';\r\nimport { STORAGE_KEYS, VALIDATION } from '@/config/constants';\r\nimport type { Theme, AppError } from '@/types';\r\n\r\n// User ID management\r\nexport const getUserId = (): string => {\r\n  let userId = localStorage.getItem(STORAGE_KEYS.USER_ID);\r\n  \r\n  // If no User ID exists, generate a new UUID\r\n  if (!userId || userId.trim().length === 0) {\r\n    userId = uuidv4();\r\n    localStorage.setItem(STORAGE_KEYS.USER_ID, userId);\r\n  }\r\n  \r\n  return userId;\r\n};\r\n\r\n// Set a custom user ID\r\nexport const setUserId = (userId: string): void => {\r\n  if (!userId || userId.trim().length === 0) {\r\n    throw new Error('User ID cannot be empty');\r\n  }\r\n  localStorage.setItem(STORAGE_KEYS.USER_ID, userId.trim());\r\n};\r\n\r\n// Generate a new user ID\r\nexport const generateNewUserId = (): string => {\r\n  const newUserId = uuidv4();\r\n  localStorage.setItem(STORAGE_KEYS.USER_ID, newUserId);\r\n  return newUserId;\r\n};\r\n\r\n// Check if user ID is custom (not auto-generated)\r\nexport const isCustomUserId = (): boolean => {\r\n  return localStorage.getItem('bh_user_id_custom') === 'true';\r\n};\r\n\r\n// Set user ID as custom or auto-generated\r\nexport const setUserIdMode = (isCustom: boolean): void => {\r\n  localStorage.setItem('bh_user_id_custom', isCustom.toString());\r\n};\r\n\r\n// Theme management\r\nexport const getStoredTheme = (): Theme => {\r\n  const stored = localStorage.getItem(STORAGE_KEYS.THEME) as Theme;\r\n  if (stored === 'light' || stored === 'dark') {\r\n    return stored;\r\n  }\r\n  \r\n  // Default to system preference\r\n  return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n};\r\n\r\nexport const setStoredTheme = (theme: Theme): void => {\r\n  localStorage.setItem(STORAGE_KEYS.THEME, theme);\r\n  \r\n  // Apply theme to document\r\n  if (theme === 'dark') {\r\n    document.documentElement.classList.add('dark');\r\n  } else {\r\n    document.documentElement.classList.remove('dark');\r\n  }\r\n};\r\n\r\n// Processing mode management\r\nexport const getStoredProcessingMode = (): boolean => {\r\n  const stored = localStorage.getItem(STORAGE_KEYS.PROCESSING_MODE);\r\n  if (stored === 'true' || stored === 'false') {\r\n    return stored === 'true';\r\n  }\r\n  \r\n  // Default to single file mode\r\n  return false;\r\n};\r\n\r\nexport const setStoredProcessingMode = (isMultiMode: boolean): void => {\r\n  localStorage.setItem(STORAGE_KEYS.PROCESSING_MODE, isMultiMode.toString());\r\n};\r\n\r\n// File utilities\r\nexport const formatFileSize = (bytes: number): string => {\r\n  if (bytes === 0) return '0 B';\r\n  \r\n  const k = 1024;\r\n  const sizes = ['B', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  \r\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(1))} ${sizes[i]}`;\r\n};\r\n\r\nexport const formatDuration = (seconds: number): string => {\r\n  const minutes = Math.floor(seconds / 60);\r\n  const remainingSeconds = Math.floor(seconds % 60);\r\n  return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\r\n};\r\n\r\nexport const getAudioDuration = (file: File): Promise<number> => {\r\n  return new Promise((resolve, reject) => {\r\n    const audio = new Audio();\r\n    const url = URL.createObjectURL(file);\r\n    \r\n    audio.addEventListener('loadedmetadata', () => {\r\n      URL.revokeObjectURL(url);\r\n      resolve(audio.duration);\r\n    });\r\n    \r\n    audio.addEventListener('error', () => {\r\n      URL.revokeObjectURL(url);\r\n      reject(new Error('Unable to load audio metadata'));\r\n    });\r\n    \r\n    audio.src = url;\r\n  });\r\n};\r\n\r\n// Date utilities\r\nexport const formatRelativeTime = (date: string): string => {\r\n  const now = new Date();\r\n  const target = new Date(date);\r\n  const diffMs = now.getTime() - target.getTime();\r\n  const diffMinutes = Math.floor(diffMs / (1000 * 60));\r\n  const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\r\n  \r\n  if (diffMinutes < 1) return 'Just now';\r\n  if (diffMinutes < 60) return `${diffMinutes}m ago`;\r\n  if (diffHours < 24) return `${diffHours}h ago`;\r\n  if (diffDays < 7) return `${diffDays}d ago`;\r\n  \r\n  return target.toLocaleDateString();\r\n};\r\n\r\nexport const formatDateTime = (date: string): string => {\r\n  return new Date(date).toLocaleString();\r\n};\r\n\r\n// Error handling\r\nexport const createAppError = (code: string, message: string, details?: Record<string, unknown>): AppError => ({\r\n  code,\r\n  message,\r\n  details,\r\n  timestamp: new Date().toISOString(),\r\n});\r\n\r\nexport const isNetworkError = (error: unknown): boolean => {\r\n  if (error instanceof TypeError && error.message.includes('fetch')) {\r\n    return true;\r\n  }\r\n  \r\n  if (error instanceof Error) {\r\n    return error.message.includes('Network') || \r\n           error.message.includes('connection') ||\r\n           error.message.includes('timeout');\r\n  }\r\n  \r\n  return false;\r\n};\r\n\r\n// Validation utilities\r\nexport const isValidUUID = (uuid: string): boolean => {\r\n  const uuidPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\r\n  return uuidPattern.test(uuid);\r\n};\r\n\r\nexport const isValidAudioFile = (file: File): { valid: boolean; error?: string } => {\r\n  // Check file size\r\n  if (file.size > VALIDATION.MAX_FILE_SIZE_BYTES) {\r\n    return {\r\n      valid: false,\r\n      error: `File size exceeds maximum limit of ${formatFileSize(VALIDATION.MAX_FILE_SIZE_BYTES)}`\r\n    };\r\n  }\r\n  \r\n  // Check file type\r\n  const validTypes = ['audio/wav', 'audio/mpeg', 'audio/mp4', 'audio/aac', 'audio/flac', 'audio/x-m4a'];\r\n  if (!validTypes.includes(file.type) && !file.name.match(/\\.(wav|mp3|m4a|aac|flac)$/i)) {\r\n    return {\r\n      valid: false,\r\n      error: 'Please select a valid audio file (WAV, MP3, M4A, AAC, or FLAC)'\r\n    };\r\n  }\r\n  \r\n  return { valid: true };\r\n};\r\n\r\n// Accessibility utilities\r\nexport const announceToScreenReader = (message: string, priority: 'polite' | 'assertive' = 'polite'): void => {\r\n  const announcement = document.createElement('div');\r\n  announcement.setAttribute('aria-live', priority);\r\n  announcement.setAttribute('aria-atomic', 'true');\r\n  announcement.className = 'sr-only';\r\n  announcement.textContent = message;\r\n  \r\n  document.body.appendChild(announcement);\r\n  \r\n  // Remove after announcement\r\n  setTimeout(() => {\r\n    document.body.removeChild(announcement);\r\n  }, 1000);\r\n};\r\n\r\nexport const focusElement = (elementId: string, delay = 100): void => {\r\n  setTimeout(() => {\r\n    const element = document.getElementById(elementId);\r\n    if (element) {\r\n      element.focus();\r\n    }\r\n  }, delay);\r\n};\r\n\r\nexport const trapFocus = (container: HTMLElement): { release: () => void } => {\r\n  const focusableElements = container.querySelectorAll(\r\n    'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n  );\r\n  \r\n  const firstFocusable = focusableElements[0] as HTMLElement;\r\n  const lastFocusable = focusableElements[focusableElements.length - 1] as HTMLElement;\r\n  \r\n  const handleTabKey = (e: KeyboardEvent) => {\r\n    if (e.key !== 'Tab') return;\r\n    \r\n    if (e.shiftKey) {\r\n      if (document.activeElement === firstFocusable) {\r\n        lastFocusable?.focus();\r\n        e.preventDefault();\r\n      }\r\n    } else {\r\n      if (document.activeElement === lastFocusable) {\r\n        firstFocusable?.focus();\r\n        e.preventDefault();\r\n      }\r\n    }\r\n  };\r\n  \r\n  container.addEventListener('keydown', handleTabKey);\r\n  firstFocusable?.focus();\r\n  \r\n  return {\r\n    release: () => {\r\n      container.removeEventListener('keydown', handleTabKey);\r\n    }\r\n  };\r\n};\r\n\r\n// Debounce utility\r\nexport const debounce = <T extends (...args: unknown[]) => void>(\r\n  fn: T,\r\n  delay: number\r\n): ((...args: Parameters<T>) => void) => {\r\n  let timeoutId: NodeJS.Timeout;\r\n  \r\n  return (...args: Parameters<T>) => {\r\n    clearTimeout(timeoutId);\r\n    timeoutId = setTimeout(() => fn(...args), delay);\r\n  };\r\n};\r\n","import { createContext, useContext, useEffect, useState } from 'react';\r\nimport { getStoredTheme, setStoredTheme } from '@/utils';\r\nimport type { Theme } from '@/types';\r\n\r\ninterface ThemeContextType {\r\n  theme: Theme;\r\n  toggleTheme: () => void;\r\n  setTheme: (theme: Theme) => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\nexport const useTheme = () => {\r\n  const context = useContext(ThemeContext);\r\n  if (context === undefined) {\r\n    throw new Error('useTheme must be used within a ThemeProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface ThemeProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const ThemeProvider: React.FC<ThemeProviderProps> = ({ children }) => {\r\n  const [theme, setThemeState] = useState<Theme>(getStoredTheme);\r\n\r\n  const setTheme = (newTheme: Theme) => {\r\n    setThemeState(newTheme);\r\n    setStoredTheme(newTheme);\r\n  };\r\n\r\n  const toggleTheme = () => {\r\n    const newTheme = theme === 'light' ? 'dark' : 'light';\r\n    setTheme(newTheme);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Apply theme on mount\r\n    setStoredTheme(theme);\r\n  }, [theme]);\r\n\r\n  useEffect(() => {\r\n    // Listen for system theme changes\r\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n    \r\n    const handleChange = (e: MediaQueryListEvent) => {\r\n      const storedTheme = localStorage.getItem('bh_theme');\r\n      if (!storedTheme) {\r\n        // Only auto-switch if user hasn't set a preference\r\n        setThemeState(e.matches ? 'dark' : 'light');\r\n      }\r\n    };\r\n\r\n    mediaQuery.addEventListener('change', handleChange);\r\n    return () => mediaQuery.removeEventListener('change', handleChange);\r\n  }, []);\r\n\r\n  const value = {\r\n    theme,\r\n    toggleTheme,\r\n    setTheme,\r\n  };\r\n\r\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>;\r\n};\r\n","import { useEffect, useRef, useCallback } from 'react';\r\nimport { announceToScreenReader, focusElement, trapFocus, debounce } from '@/utils';\r\nimport { A11Y } from '@/config/constants';\r\n// import type { A11yAnnouncement } from '@/types'; // Commented out until used\r\n\r\n// Screen reader announcements\r\nexport const useAnnouncements = () => {\r\n  const announce = useCallback((\r\n    message: string, \r\n    priority: 'polite' | 'assertive' = 'polite'\r\n  ) => {\r\n    announceToScreenReader(message, priority);\r\n  }, []);\r\n\r\n  const announceError = useCallback((message: string) => {\r\n    announce(message, 'assertive');\r\n  }, [announce]);\r\n\r\n  const announceSuccess = useCallback((message: string) => {\r\n    announce(message, 'polite');\r\n  }, [announce]);\r\n\r\n  return {\r\n    announce,\r\n    announceError,\r\n    announceSuccess,\r\n  };\r\n};\r\n\r\n// Focus management\r\nexport const useFocusManagement = () => {\r\n  const focusById = useCallback((elementId: string, delay?: number) => {\r\n    focusElement(elementId, delay);\r\n  }, []);\r\n\r\n  const focusFirst = useCallback((container?: HTMLElement) => {\r\n    const target = container || document;\r\n    const firstFocusable = target.querySelector(\r\n      'button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n    ) as HTMLElement;\r\n    \r\n    if (firstFocusable) {\r\n      firstFocusable.focus();\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    focusById,\r\n    focusFirst,\r\n  };\r\n};\r\n\r\n// Focus trap for modals and dialogs\r\nexport const useFocusTrap = (isActive: boolean) => {\r\n  const containerRef = useRef<HTMLElement>(null);\r\n  const trapRef = useRef<{ release: () => void } | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isActive && containerRef.current) {\r\n      trapRef.current = trapFocus(containerRef.current);\r\n    }\r\n\r\n    return () => {\r\n      if (trapRef.current) {\r\n        trapRef.current.release();\r\n        trapRef.current = null;\r\n      }\r\n    };\r\n  }, [isActive]);\r\n\r\n  return containerRef;\r\n};\r\n\r\n// Keyboard navigation\r\nexport const useKeyboardNavigation = () => {\r\n  const handleEscape = useCallback((callback: () => void) => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape') {\r\n        event.preventDefault();\r\n        callback();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, []);\r\n\r\n  const handleEnterSpace = useCallback((callback: () => void) => {\r\n    return (event: React.KeyboardEvent) => {\r\n      if (event.key === 'Enter' || event.key === ' ') {\r\n        event.preventDefault();\r\n        callback();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    handleEscape,\r\n    handleEnterSpace,\r\n  };\r\n};\r\n\r\n// ARIA live regions for dynamic content\r\nexport const useAriaLive = () => {\r\n  const liveRegionRef = useRef<HTMLDivElement>(null);\r\n\r\n  const updateLiveRegion = useCallback((\r\n    message: string,\r\n    priority: 'polite' | 'assertive' = 'polite'\r\n  ) => {\r\n    if (liveRegionRef.current) {\r\n      liveRegionRef.current.setAttribute('aria-live', priority);\r\n      liveRegionRef.current.textContent = message;\r\n    }\r\n  }, []);\r\n\r\n  const clearLiveRegion = useCallback(() => {\r\n    if (liveRegionRef.current) {\r\n      liveRegionRef.current.textContent = '';\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    liveRegionRef,\r\n    updateLiveRegion,\r\n    clearLiveRegion,\r\n  };\r\n};\r\n\r\n// Progress announcements with debouncing\r\nexport const useProgressAnnouncement = () => {\r\n  const lastAnnouncedProgress = useRef(-1);\r\n\r\n  const debouncedProgressAnnounce = debounce((...args: unknown[]) => {\r\n    const progress = args[0] as number;\r\n    const message = args[1] as string;\r\n    // Only announce significant progress changes\r\n    if (Math.abs(progress - lastAnnouncedProgress.current) >= 10 || progress === 100) {\r\n      announceToScreenReader(`${message} ${progress}% complete`, 'polite');\r\n      lastAnnouncedProgress.current = progress;\r\n    }\r\n  }, A11Y.DEBOUNCE_MS);\r\n\r\n  const announceProgress = useCallback(debouncedProgressAnnounce, []);\r\n\r\n  return { announceProgress };\r\n};\r\n\r\n// Skip to content functionality\r\nexport const useSkipToContent = () => {\r\n  const skipToMain = useCallback(() => {\r\n    focusElement(A11Y.SKIP_TO_CONTENT_ID, A11Y.FOCUS_TIMEOUT);\r\n  }, []);\r\n\r\n  return { skipToMain };\r\n};\r\n\r\n// Form accessibility helpers\r\nexport const useFormAccessibility = () => {\r\n  const getFieldId = useCallback((name: string) => `field-${name}`, []);\r\n  const getErrorId = useCallback((name: string) => `error-${name}`, []);\r\n  const getDescriptionId = useCallback((name: string) => `description-${name}`, []);\r\n\r\n  const getFieldProps = useCallback((\r\n    name: string,\r\n    hasError: boolean,\r\n    hasDescription: boolean\r\n  ) => {\r\n    const props: React.InputHTMLAttributes<HTMLInputElement> = {\r\n      id: getFieldId(name),\r\n      'aria-invalid': hasError,\r\n    };\r\n\r\n    const describedBy: string[] = [];\r\n    \r\n    if (hasError) {\r\n      describedBy.push(getErrorId(name));\r\n    }\r\n    \r\n    if (hasDescription) {\r\n      describedBy.push(getDescriptionId(name));\r\n    }\r\n\r\n    if (describedBy.length > 0) {\r\n      props['aria-describedby'] = describedBy.join(' ');\r\n    }\r\n\r\n    return props;\r\n  }, [getFieldId, getErrorId, getDescriptionId]);\r\n\r\n  return {\r\n    getFieldId,\r\n    getErrorId,\r\n    getDescriptionId,\r\n    getFieldProps,\r\n  };\r\n};\r\n\r\n// Status announcements for file uploads and processing\r\nexport const useStatusAnnouncements = () => {\r\n  const announceUploadStart = useCallback((fileName: string) => {\r\n    announceToScreenReader(`Starting upload of ${fileName}`, 'polite');\r\n  }, []);\r\n\r\n  const announceUploadComplete = useCallback((fileName: string) => {\r\n    announceToScreenReader(`Upload of ${fileName} completed successfully`, 'polite');\r\n  }, []);\r\n\r\n  const announceConversionStart = useCallback((fileName: string) => {\r\n    announceToScreenReader(`Starting audio conversion for ${fileName}`, 'polite');\r\n  }, []);\r\n\r\n  const announceConversionComplete = useCallback((fileName: string) => {\r\n    announceToScreenReader(`Audio conversion for ${fileName} completed`, 'polite');\r\n  }, []);\r\n\r\n  const announcePredictionStart = useCallback((sessionId: string) => {\r\n    announceToScreenReader(`Starting behavioral health prediction for session ${sessionId}`, 'polite');\r\n  }, []);\r\n\r\n  const announcePredictionComplete = useCallback((sessionId: string) => {\r\n    announceToScreenReader(`Behavioral health prediction completed for session ${sessionId}`, 'polite');\r\n  }, []);\r\n\r\n  const announceError = useCallback((operation: string, error: string) => {\r\n    announceToScreenReader(`Error during ${operation}: ${error}`, 'assertive');\r\n  }, []);\r\n\r\n  return {\r\n    announceUploadStart,\r\n    announceUploadComplete,\r\n    announceConversionStart,\r\n    announceConversionComplete,\r\n    announcePredictionStart,\r\n    announcePredictionComplete,\r\n    announceError,\r\n  };\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { useTheme } from '@/contexts/ThemeContext';\r\nimport { useKeyboardNavigation } from '@/hooks/accessibility';\r\n\r\ninterface HeaderProps {\r\n  className?: string;\r\n}\r\n\r\nexport const Header: React.FC<HeaderProps> = ({ className = '' }) => {\r\n  const { theme, toggleTheme } = useTheme();\r\n  const location = useLocation();\r\n  const { handleEnterSpace } = useKeyboardNavigation();\r\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n\r\n  const navItems = [\r\n    { path: '/', label: 'Dashboard', icon: 'üè†' },\r\n    { path: '/upload', label: 'Upload & Analyze', icon: 'üì§' },\r\n    { path: '/sessions', label: 'Sessions', icon: 'üìä' },\r\n    { path: '/predictions', label: 'My Predictions', icon: 'üìà' },\r\n    { path: '/control-panel', label: 'Control Panel', icon: '‚öôÔ∏è' },\r\n    { path: '/health', label: 'System Health', icon: 'üè•' },\r\n  ];\r\n\r\n  const isActivePath = (path: string) => {\r\n    if (path === '/') {\r\n      return location.pathname === '/';\r\n    }\r\n    return location.pathname.startsWith(path);\r\n  };\r\n\r\n  const toggleMobileMenu = () => {\r\n    setIsMobileMenuOpen(!isMobileMenuOpen);\r\n  };\r\n\r\n  const closeMobileMenu = () => {\r\n    setIsMobileMenuOpen(false);\r\n  };\r\n\r\n  // Close mobile menu when route changes\r\n  useEffect(() => {\r\n    setIsMobileMenuOpen(false);\r\n  }, [location.pathname]);\r\n\r\n  return (\r\n    <header className={`bg-surface-light dark:bg-surface-dark border-b border-gray-200 dark:border-gray-700 ${className}`}>\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex justify-between items-center h-16\">\r\n          {/* Logo and title */}\r\n          <div className=\"flex items-center\">\r\n            <Link\r\n              to=\"/\"\r\n              className=\"flex items-center space-x-3 text-xl font-bold text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 rounded-md px-2 py-1\"\r\n              aria-label=\"Behavioral Health System - Go to Dashboard\"\r\n            >\r\n              <span className=\"text-2xl\" role=\"img\" aria-label=\"Brain icon\">üß†</span>\r\n              <span className=\"hidden sm:block\">Behavioral Health System</span>\r\n              <span className=\"sm:hidden\">BHS</span>\r\n            </Link>\r\n          </div>\r\n\r\n          {/* Navigation */}\r\n          <nav className=\"hidden md:flex space-x-1\" role=\"navigation\" aria-label=\"Main navigation\">\r\n            {navItems.map(({ path, label, icon }) => (\r\n              <Link\r\n                key={path}\r\n                to={path}\r\n                className={`\r\n                  flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors\r\n                  focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\r\n                  ${\r\n                    isActivePath(path)\r\n                      ? 'bg-primary-100 text-primary-900 dark:bg-primary-900 dark:text-primary-100'\r\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-gray-100 dark:hover:bg-gray-700'\r\n                  }\r\n                `}\r\n                aria-current={isActivePath(path) ? 'page' : undefined}\r\n              >\r\n                <span role=\"img\" aria-hidden=\"true\">{icon}</span>\r\n                <span>{label}</span>\r\n              </Link>\r\n            ))}\r\n          </nav>\r\n\r\n          {/* Theme toggle */}\r\n          <div className=\"flex items-center space-x-4\">\r\n            <button\r\n              onClick={toggleTheme}\r\n              onKeyDown={handleEnterSpace(toggleTheme)}\r\n              className=\"\r\n                p-2 rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-100\r\n                dark:text-gray-400 dark:hover:text-gray-100 dark:hover:bg-gray-700\r\n                focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\r\n                transition-colors touch-target\r\n              \"\r\n              aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} mode`}\r\n              type=\"button\"\r\n            >\r\n              <span className=\"text-xl\" role=\"img\" aria-hidden=\"true\">\r\n                {theme === 'light' ? 'üåô' : '‚òÄÔ∏è'}\r\n              </span>\r\n            </button>\r\n\r\n            {/* Mobile menu button */}\r\n            <button\r\n              onClick={toggleMobileMenu}\r\n              onKeyDown={handleEnterSpace(toggleMobileMenu)}\r\n              className=\"\r\n                md:hidden p-2 rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-100\r\n                dark:text-gray-400 dark:hover:text-gray-100 dark:hover:bg-gray-700\r\n                focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\r\n                transition-colors touch-target\r\n              \"\r\n              aria-label={isMobileMenuOpen ? \"Close mobile menu\" : \"Open mobile menu\"}\r\n              type=\"button\"\r\n              {...(isMobileMenuOpen ? { 'aria-expanded': true } : { 'aria-expanded': false })}\r\n            >\r\n              <span className=\"text-xl\" role=\"img\" aria-hidden=\"true\">\r\n                {isMobileMenuOpen ? '‚úï' : '‚ò∞'}\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mobile navigation */}\r\n        {isMobileMenuOpen && (\r\n          <div className=\"md:hidden border-t border-gray-200 dark:border-gray-700 pt-4 pb-3\">\r\n            <nav className=\"space-y-1\" role=\"navigation\" aria-label=\"Mobile navigation\">\r\n              {navItems.map(({ path, label, icon }) => (\r\n                <Link\r\n                  key={path}\r\n                  to={path}\r\n                  onClick={closeMobileMenu}\r\n                  className={`\r\n                    flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium transition-colors\r\n                    focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\r\n                    ${\r\n                      isActivePath(path)\r\n                        ? 'bg-primary-100 text-primary-900 dark:bg-primary-900 dark:text-primary-100'\r\n                        : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-gray-100 dark:hover:bg-gray-700'\r\n                    }\r\n                  `}\r\n                  aria-current={isActivePath(path) ? 'page' : undefined}\r\n                >\r\n                  <span role=\"img\" aria-hidden=\"true\">{icon}</span>\r\n                  <span>{label}</span>\r\n                </Link>\r\n              ))}\r\n            </nav>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n","import { SVGProps } from 'react';\r\n\r\ninterface MicrosoftLogoProps extends SVGProps<SVGSVGElement> {\r\n  size?: number;\r\n  className?: string;\r\n}\r\n\r\nexport const MicrosoftLogo: React.FC<MicrosoftLogoProps> = ({\r\n  size = 20,\r\n  className = '',\r\n  ...props\r\n}) => {\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox=\"0 0 23 23\"\r\n      className={className}\r\n      aria-label=\"Microsoft\"\r\n      {...props}\r\n    >\r\n      {/* Microsoft logo squares */}\r\n      <rect x=\"1\" y=\"1\" width=\"10\" height=\"10\" fill=\"#f25022\" />\r\n      <rect x=\"12\" y=\"1\" width=\"10\" height=\"10\" fill=\"#7fba00\" />\r\n      <rect x=\"1\" y=\"12\" width=\"10\" height=\"10\" fill=\"#00a4ef\" />\r\n      <rect x=\"12\" y=\"12\" width=\"10\" height=\"10\" fill=\"#ffb900\" />\r\n    </svg>\r\n  );\r\n};\r\n","import { ReactNode } from 'react';\r\nimport { Header } from './Header';\r\nimport { useSkipToContent } from '@/hooks/accessibility';\r\nimport { A11Y } from '@/config/constants';\r\nimport { MicrosoftLogo } from '@/components/icons';\r\n\r\ninterface LayoutProps {\r\n  children: ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport const Layout: React.FC<LayoutProps> = ({ children, className = '' }) => {\r\n  const { skipToMain } = useSkipToContent();\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background-light dark:bg-background-dark\">\r\n      {/* Skip to content link for keyboard navigation */}\r\n      <a\r\n        href={`#${A11Y.SKIP_TO_CONTENT_ID}`}\r\n        className=\"skip-link\"\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          skipToMain();\r\n        }}\r\n      >\r\n        Skip to main content\r\n      </a>\r\n\r\n      {/* Header */}\r\n      <Header />\r\n\r\n      {/* Main content */}\r\n      <main\r\n        id={A11Y.SKIP_TO_CONTENT_ID}\r\n        className={`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 ${className}`}\r\n        tabIndex={-1}\r\n      >\r\n        {children}\r\n      </main>\r\n\r\n      {/* ARIA live region for announcements */}\r\n      <div\r\n        id={A11Y.ANNOUNCEMENTS_ID}\r\n        className=\"sr-only\"\r\n        aria-live=\"polite\"\r\n        aria-atomic=\"true\"\r\n      />\r\n\r\n      {/* Footer */}\r\n      <footer className=\"bg-surface-light dark:bg-surface-dark border-t border-gray-200 dark:border-gray-700 mt-auto\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n          <div className=\"flex flex-col items-center space-y-4\">\r\n            {/* Microsoft Logo */}\r\n            <div className=\"flex items-center space-x-2\">\r\n              <MicrosoftLogo size={24} className=\"opacity-80\" />\r\n              <span className=\"text-sm text-text-muted-light dark:text-text-muted-dark font-medium\">\r\n                Powered by Microsoft\r\n              </span>\r\n            </div>\r\n            \r\n            {/* Copyright and Compliance */}\r\n            <div className=\"text-center text-sm text-text-muted-light dark:text-text-muted-dark\">\r\n              <p>\r\n                Behavioral Health System &copy; {new Date().getFullYear()}\r\n              </p>\r\n              <p className=\"mt-1\">\r\n                WCAG 2.2 AA Compliant ‚Ä¢ Section 508 Compliant\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n};\n\nexport { hasA11yProp, mergeClasses, toCamelCase, toKebabCase, toPascalCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses, hasA11yProp } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => createElement(\n    \"svg\",\n    {\n      ref,\n      ...defaultAttributes,\n      width: size,\n      height: size,\n      stroke: color,\n      strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n      className: mergeClasses(\"lucide\", className),\n      ...!children && !hasA11yProp(rest) && { \"aria-hidden\": \"true\" },\n      ...rest\n    },\n    [\n      ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n      ...Array.isArray(children) ? children : [children]\n    ]\n  )\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className\n      ),\n      ...props\n    })\n  );\n  Component.displayName = toPascalCase(iconName);\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n];\nconst Activity = createLucideIcon(\"activity\", __iconNode);\n\nexport { __iconNode, Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"arrow-left\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 18V5\", key: \"adv99a\" }],\n  [\"path\", { d: \"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4\", key: \"1e3is1\" }],\n  [\"path\", { d: \"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5\", key: \"1gqd8o\" }],\n  [\"path\", { d: \"M17.997 5.125a4 4 0 0 1 2.526 5.77\", key: \"iwvgf7\" }],\n  [\"path\", { d: \"M18 18a4 4 0 0 0 2-7.464\", key: \"efp6ie\" }],\n  [\"path\", { d: \"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517\", key: \"1gq6am\" }],\n  [\"path\", { d: \"M6 18a4 4 0 0 1-2-7.464\", key: \"k1g0md\" }],\n  [\"path\", { d: \"M6.003 5.125a4 4 0 0 0-2.526 5.77\", key: \"q97ue3\" }]\n];\nconst Brain = createLucideIcon(\"brain\", __iconNode);\n\nexport { __iconNode, Brain as default };\n//# sourceMappingURL=brain.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M8 2v4\", key: \"1cmpym\" }],\n  [\"path\", { d: \"M16 2v4\", key: \"4m81vk\" }],\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", key: \"1hopcy\" }],\n  [\"path\", { d: \"M3 10h18\", key: \"8toen8\" }]\n];\nconst Calendar = createLucideIcon(\"calendar\", __iconNode);\n\nexport { __iconNode, Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 3v16a2 2 0 0 0 2 2h16\", key: \"c24i48\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n];\nconst ChartColumn = createLucideIcon(\"chart-column\", __iconNode);\n\nexport { __iconNode, ChartColumn as default };\n//# sourceMappingURL=chart-column.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z\",\n      key: \"pzmjnu\"\n    }\n  ],\n  [\"path\", { d: \"M21.21 15.89A10 10 0 1 1 8 2.83\", key: \"k2fpak\" }]\n];\nconst ChartPie = createLucideIcon(\"chart-pie\", __iconNode);\n\nexport { __iconNode, ChartPie as default };\n//# sourceMappingURL=chart-pie.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]];\nconst ChevronDown = createLucideIcon(\"chevron-down\", __iconNode);\n\nexport { __iconNode, ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m18 15-6-6-6 6\", key: \"153udz\" }]];\nconst ChevronUp = createLucideIcon(\"chevron-up\", __iconNode);\n\nexport { __iconNode, ChevronUp as default };\n//# sourceMappingURL=chevron-up.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n];\nconst CircleAlert = createLucideIcon(\"circle-alert\", __iconNode);\n\nexport { __iconNode, CircleAlert as default };\n//# sourceMappingURL=circle-alert.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21.801 10A10 10 0 1 1 17 3.335\", key: \"yps3ct\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n];\nconst CircleCheckBig = createLucideIcon(\"circle-check-big\", __iconNode);\n\nexport { __iconNode, CircleCheckBig as default };\n//# sourceMappingURL=circle-check-big.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n];\nconst CircleX = createLucideIcon(\"circle-x\", __iconNode);\n\nexport { __iconNode, CircleX as default };\n//# sourceMappingURL=circle-x.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 6v6l4 2\", key: \"mmk7yg\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n];\nconst Clock = createLucideIcon(\"clock\", __iconNode);\n\nexport { __iconNode, Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 15V3\", key: \"m9g1x1\" }],\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"path\", { d: \"m7 10 5 5 5-5\", key: \"brsn70\" }]\n];\nconst Download = createLucideIcon(\"download\", __iconNode);\n\nexport { __iconNode, Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49\",\n      key: \"ct8e1f\"\n    }\n  ],\n  [\"path\", { d: \"M14.084 14.158a3 3 0 0 1-4.242-4.242\", key: \"151rxh\" }],\n  [\n    \"path\",\n    {\n      d: \"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143\",\n      key: \"13bj9a\"\n    }\n  ],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n];\nconst EyeOff = createLucideIcon(\"eye-off\", __iconNode);\n\nexport { __iconNode, EyeOff as default };\n//# sourceMappingURL=eye-off.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0\",\n      key: \"1nclc0\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n];\nconst Eye = createLucideIcon(\"eye\", __iconNode);\n\nexport { __iconNode, Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3\", key: \"rslqgf\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\n    \"path\",\n    {\n      d: \"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0\",\n      key: \"9f7x3i\"\n    }\n  ]\n];\nconst FileAudio = createLucideIcon(\"file-audio\", __iconNode);\n\nexport { __iconNode, FileAudio as default };\n//# sourceMappingURL=file-audio.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n];\nconst FileText = createLucideIcon(\"file-text\", __iconNode);\n\nexport { __iconNode, FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }]\n];\nconst File = createLucideIcon(\"file\", __iconNode);\n\nexport { __iconNode, File as default };\n//# sourceMappingURL=file.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z\",\n      key: \"1vo8kb\"\n    }\n  ],\n  [\"path\", { d: \"M15 2v4a2 2 0 0 0 2 2h4\", key: \"sud9ri\" }],\n  [\"path\", { d: \"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1\", key: \"l4dndm\" }]\n];\nconst Files = createLucideIcon(\"files\", __iconNode);\n\nexport { __iconNode, Files as default };\n//# sourceMappingURL=files.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z\",\n      key: \"sc7q7i\"\n    }\n  ]\n];\nconst Funnel = createLucideIcon(\"funnel\", __iconNode);\n\nexport { __iconNode, Funnel as default };\n//# sourceMappingURL=funnel.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5\",\n      key: \"mvr1a0\"\n    }\n  ]\n];\nconst Heart = createLucideIcon(\"heart\", __iconNode);\n\nexport { __iconNode, Heart as default };\n//# sourceMappingURL=heart.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n];\nconst Info = createLucideIcon(\"info\", __iconNode);\n\nexport { __iconNode, Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5\",\n      key: \"1gvzjb\"\n    }\n  ],\n  [\"path\", { d: \"M9 18h6\", key: \"x1upvd\" }],\n  [\"path\", { d: \"M10 22h4\", key: \"ceow96\" }]\n];\nconst Lightbulb = createLucideIcon(\"lightbulb\", __iconNode);\n\nexport { __iconNode, Lightbulb as default };\n//# sourceMappingURL=lightbulb.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]];\nconst LoaderCircle = createLucideIcon(\"loader-circle\", __iconNode);\n\nexport { __iconNode, LoaderCircle as default };\n//# sourceMappingURL=loader-circle.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { x: \"14\", y: \"3\", width: \"5\", height: \"18\", rx: \"1\", key: \"kaeet6\" }],\n  [\"rect\", { x: \"5\", y: \"3\", width: \"5\", height: \"18\", rx: \"1\", key: \"1wsw3u\" }]\n];\nconst Pause = createLucideIcon(\"pause\", __iconNode);\n\nexport { __iconNode, Pause as default };\n//# sourceMappingURL=pause.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z\",\n      key: \"10ikf1\"\n    }\n  ]\n];\nconst Play = createLucideIcon(\"play\", __iconNode);\n\nexport { __iconNode, Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n];\nconst Plus = createLucideIcon(\"plus\", __iconNode);\n\nexport { __iconNode, Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n];\nconst RefreshCw = createLucideIcon(\"refresh-cw\", __iconNode);\n\nexport { __iconNode, RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m21 21-4.34-4.34\", key: \"14j7rj\" }],\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }]\n];\nconst Search = createLucideIcon(\"search\", __iconNode);\n\nexport { __iconNode, Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ],\n  [\"path\", { d: \"M12 8v4\", key: \"1got3b\" }],\n  [\"path\", { d: \"M12 16h.01\", key: \"1drbdi\" }]\n];\nconst ShieldAlert = createLucideIcon(\"shield-alert\", __iconNode);\n\nexport { __iconNode, ShieldAlert as default };\n//# sourceMappingURL=shield-alert.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"6\", key: \"1vlfrh\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"2\", key: \"1c9p78\" }]\n];\nconst Target = createLucideIcon(\"target\", __iconNode);\n\nexport { __iconNode, Target as default };\n//# sourceMappingURL=target.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 11v6\", key: \"nco0om\" }],\n  [\"path\", { d: \"M14 11v6\", key: \"outv1u\" }],\n  [\"path\", { d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6\", key: \"miytrc\" }],\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\", key: \"e791ji\" }]\n];\nconst Trash2 = createLucideIcon(\"trash-2\", __iconNode);\n\nexport { __iconNode, Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 17h6v-6\", key: \"t6n2it\" }],\n  [\"path\", { d: \"m22 17-8.5-8.5-5 5L2 7\", key: \"x473p\" }]\n];\nconst TrendingDown = createLucideIcon(\"trending-down\", __iconNode);\n\nexport { __iconNode, TrendingDown as default };\n//# sourceMappingURL=trending-down.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 7h6v6\", key: \"box55l\" }],\n  [\"path\", { d: \"m22 7-8.5 8.5-5-5L2 17\", key: \"1t1m79\" }]\n];\nconst TrendingUp = createLucideIcon(\"trending-up\", __iconNode);\n\nexport { __iconNode, TrendingUp as default };\n//# sourceMappingURL=trending-up.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n];\nconst TriangleAlert = createLucideIcon(\"triangle-alert\", __iconNode);\n\nexport { __iconNode, TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 3v12\", key: \"1x0j5s\" }],\n  [\"path\", { d: \"m17 8-5-5-5 5\", key: \"7q97r8\" }],\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }]\n];\nconst Upload = createLucideIcon(\"upload\", __iconNode);\n\nexport { __iconNode, Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n];\nconst User = createLucideIcon(\"user\", __iconNode);\n\nexport { __iconNode, User as default };\n//# sourceMappingURL=user.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"path\", { d: \"M16 3.128a4 4 0 0 1 0 7.744\", key: \"16gr8j\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }]\n];\nconst Users = createLucideIcon(\"users\", __iconNode);\n\nexport { __iconNode, Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z\",\n      key: \"uqj9uw\"\n    }\n  ],\n  [\"path\", { d: \"M16 9a5 5 0 0 1 0 6\", key: \"1q6k2b\" }],\n  [\"path\", { d: \"M19.364 18.364a9 9 0 0 0 0-12.728\", key: \"ijwkga\" }]\n];\nconst Volume2 = createLucideIcon(\"volume-2\", __iconNode);\n\nexport { __iconNode, Volume2 as default };\n//# sourceMappingURL=volume-2.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n];\nconst X = createLucideIcon(\"x\", __iconNode);\n\nexport { __iconNode, X as default };\n//# sourceMappingURL=x.js.map\n","import { config, API_ENDPOINTS } from '@/config/constants';\r\nimport { createAppError, isNetworkError } from '@/utils';\r\nimport type {\r\n  SessionInitiateRequest,\r\n  SessionInitiateResponse,\r\n  PredictionSubmitRequest,\r\n  PredictionSubmitResponse,\r\n  PredictionResult,\r\n  HealthCheckResponse,\r\n  SessionData,\r\n  RiskAssessment,\r\n  AppError,\r\n} from '@/types';\r\n\r\n// Base API client with error handling\r\nclass ApiClient {\r\n  private baseUrl: string;\r\n\r\n  constructor(baseUrl: string) {\r\n    this.baseUrl = baseUrl;\r\n  }\r\n\r\n  private async handleResponse<T>(response: Response): Promise<T> {\r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => ({}));\r\n      \r\n      throw createAppError(\r\n        `HTTP_${response.status}`,\r\n        errorData.message || `HTTP ${response.status}: ${response.statusText}`,\r\n        {\r\n          status: response.status,\r\n          statusText: response.statusText,\r\n          data: errorData,\r\n        }\r\n      );\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  private async request<T>(\r\n    endpoint: string,\r\n    options: RequestInit = {}\r\n  ): Promise<T> {\r\n    try {\r\n      // Handle trailing/leading slashes to avoid double slashes\r\n      const baseUrl = this.baseUrl.endsWith('/') ? this.baseUrl.slice(0, -1) : this.baseUrl;\r\n      const cleanEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\r\n      const url = `${baseUrl}${cleanEndpoint}`;\r\n      \r\n      const defaultHeaders = {\r\n        'Content-Type': 'application/json',\r\n        ...options.headers,\r\n      };\r\n\r\n      const response = await fetch(url, {\r\n        ...options,\r\n        headers: defaultHeaders,\r\n      });\r\n\r\n      return this.handleResponse<T>(response);\r\n    } catch (error) {\r\n      if (isNetworkError(error)) {\r\n        throw createAppError(\r\n          'NETWORK_ERROR',\r\n          'Unable to connect to the server. Please check your internet connection.',\r\n          { originalError: error }\r\n        );\r\n      }\r\n      \r\n      if (error instanceof Error && 'code' in error) {\r\n        throw error; // Re-throw AppError\r\n      }\r\n      \r\n      throw createAppError(\r\n        'UNKNOWN_ERROR',\r\n        'An unexpected error occurred',\r\n        { originalError: error }\r\n      );\r\n    }\r\n  }\r\n\r\n  async get<T>(endpoint: string): Promise<T> {\r\n    return this.request<T>(endpoint, { method: 'GET' });\r\n  }\r\n\r\n  async post<T>(endpoint: string, data?: unknown): Promise<T> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'POST',\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  }\r\n\r\n  async put<T>(endpoint: string, data?: unknown): Promise<T> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'PUT',\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  }\r\n\r\n  async delete<T>(endpoint: string): Promise<T> {\r\n    return this.request<T>(endpoint, { method: 'DELETE' });\r\n  }\r\n}\r\n\r\n// Create API client instance\r\nconst apiClient = new ApiClient(config.api.baseUrl);\r\n\r\n// API Service functions\r\nexport const apiService = {\r\n  // Health check\r\n  async checkHealth(): Promise<HealthCheckResponse> {\r\n    return apiClient.get<HealthCheckResponse>(API_ENDPOINTS.HEALTH);\r\n  },\r\n\r\n  // Session management\r\n  async initiateSession(request: SessionInitiateRequest): Promise<SessionInitiateResponse> {\r\n    return apiClient.post<SessionInitiateResponse>(\r\n      API_ENDPOINTS.SESSIONS_INITIATE,\r\n      request\r\n    );\r\n  },\r\n\r\n  // Prediction submission\r\n  async submitPrediction(request: PredictionSubmitRequest): Promise<PredictionSubmitResponse> {\r\n    return apiClient.post<PredictionSubmitResponse>(\r\n      API_ENDPOINTS.PREDICTIONS_SUBMIT,\r\n      request\r\n    );\r\n  },\r\n\r\n  // Get prediction results\r\n  async getPredictionBySessionId(sessionId: string): Promise<PredictionResult> {\r\n    return apiClient.get<PredictionResult>(\r\n      `${API_ENDPOINTS.PREDICTIONS_BY_SESSION}/${sessionId}`\r\n    );\r\n  },\r\n\r\n  // Get user predictions\r\n  async getUserPredictions(userId: string): Promise<PredictionResult[]> {\r\n    return apiClient.get<PredictionResult[]>(\r\n      `${API_ENDPOINTS.PREDICTIONS_BY_USER}/${userId}`\r\n    );\r\n  },\r\n\r\n  // Session Storage API methods\r\n  async saveSessionData(sessionData: SessionData): Promise<{ success: boolean; sessionId: string; message: string }> {\r\n    return apiClient.post<{ success: boolean; sessionId: string; message: string }>(\r\n      'sessions',\r\n      sessionData\r\n    );\r\n  },\r\n\r\n  async getSessionData(sessionId: string): Promise<SessionData> {\r\n    return apiClient.get<SessionData>(`sessions/${sessionId}`);\r\n  },\r\n\r\n  async getUserSessions(userId: string): Promise<{ success: boolean; count: number; sessions: SessionData[] }> {\r\n    return apiClient.get<{ success: boolean; count: number; sessions: SessionData[] }>(\r\n      `sessions/users/${userId}`\r\n    );\r\n  },\r\n\r\n  async getAllSessions(): Promise<{ success: boolean; count: number; sessions: SessionData[] }> {\r\n    return apiClient.get<{ success: boolean; count: number; sessions: SessionData[] }>(\r\n      'sessions/all'\r\n    );\r\n  },\r\n\r\n  async updateSessionData(sessionId: string, sessionData: SessionData): Promise<{ success: boolean; message: string }> {\r\n    return apiClient.put<{ success: boolean; message: string }>(\r\n      `sessions/${sessionId}`,\r\n      sessionData\r\n    );\r\n  },\r\n\r\n  async deleteSessionData(sessionId: string): Promise<{ success: boolean; message: string }> {\r\n    return apiClient.delete<{ success: boolean; message: string }>(\r\n      `sessions/${sessionId}`\r\n    );\r\n  },\r\n\r\n  // Test API connection\r\n  async testConnection(): Promise<{ success: boolean; message: string }> {\r\n    try {\r\n      await this.checkHealth();\r\n      return { success: true, message: 'API connection successful' };\r\n    } catch (error) {\r\n      const appError = error as AppError;\r\n      return { \r\n        success: false, \r\n        message: appError.message || 'Connection test failed' \r\n      };\r\n    }\r\n  },\r\n\r\n\r\n\r\n  // Risk Assessment API methods\r\n  async generateRiskAssessment(sessionId: string): Promise<{ success: boolean; riskAssessment?: RiskAssessment; message: string }> {\r\n    return apiClient.post<{ success: boolean; riskAssessment?: RiskAssessment; message: string }>(\r\n      `sessions/${sessionId}/risk-assessment`\r\n    );\r\n  },\r\n\r\n  async getRiskAssessment(sessionId: string): Promise<{ success: boolean; riskAssessment?: RiskAssessment; message: string }> {\r\n    return apiClient.get<{ success: boolean; riskAssessment?: RiskAssessment; message: string }>(\r\n      `sessions/${sessionId}/risk-assessment`\r\n    );\r\n  },\r\n};\r\n\r\n// Polling utilities\r\nexport class PredictionPoller {\r\n  private sessionId: string;\r\n  private intervalMs: number;\r\n  private maxAttempts: number;\r\n  private backoffFactor: number;\r\n  private currentAttempt = 0;\r\n  private timeoutId: number | null = null;\r\n  private isPolling = false;\r\n\r\n  constructor(\r\n    sessionId: string,\r\n    options: {\r\n      intervalMs?: number;\r\n      maxAttempts?: number;\r\n      backoffFactor?: number;\r\n    } = {}\r\n  ) {\r\n    this.sessionId = sessionId;\r\n    this.intervalMs = options.intervalMs || config.polling.intervalMs;\r\n    this.maxAttempts = options.maxAttempts || config.polling.maxAttempts;\r\n    this.backoffFactor = options.backoffFactor || config.polling.backoffFactor;\r\n  }\r\n\r\n  async start(\r\n    onUpdate: (result: PredictionResult) => void,\r\n    onComplete: (result: PredictionResult) => void,\r\n    onError: (error: AppError) => void\r\n  ): Promise<void> {\r\n    if (this.isPolling) {\r\n      return;\r\n    }\r\n\r\n    this.isPolling = true;\r\n    this.currentAttempt = 0;\r\n\r\n    const poll = async (): Promise<void> => {\r\n      try {\r\n        const result = await apiService.getPredictionBySessionId(this.sessionId);\r\n        \r\n        onUpdate(result);\r\n\r\n        if (result.status === 'succeeded' || result.status === 'success' || result.status === 'failed') {\r\n          this.stop();\r\n          onComplete(result);\r\n          return;\r\n        }\r\n\r\n        this.currentAttempt++;\r\n\r\n        if (this.currentAttempt >= this.maxAttempts) {\r\n          this.stop();\r\n          onError(createAppError(\r\n            'POLLING_TIMEOUT',\r\n            'Prediction polling timed out. Please check the session manually.',\r\n            { sessionId: this.sessionId, attempts: this.currentAttempt }\r\n          ));\r\n          return;\r\n        }\r\n\r\n        // Schedule next poll with exponential backoff\r\n        const nextInterval = this.intervalMs * Math.pow(this.backoffFactor, this.currentAttempt);\r\n        this.timeoutId = window.setTimeout(poll, nextInterval);\r\n\r\n      } catch (error) {\r\n        this.stop();\r\n        onError(error as AppError);\r\n      }\r\n    };\r\n\r\n    // Start polling immediately\r\n    await poll();\r\n  }\r\n\r\n  stop(): void {\r\n    this.isPolling = false;\r\n    if (this.timeoutId) {\r\n      clearTimeout(this.timeoutId);\r\n      this.timeoutId = null;\r\n    }\r\n  }\r\n\r\n  getStatus(): { isPolling: boolean; attempt: number; maxAttempts: number } {\r\n    return {\r\n      isPolling: this.isPolling,\r\n      attempt: this.currentAttempt,\r\n      maxAttempts: this.maxAttempts,\r\n    };\r\n  }\r\n}\r\n\r\n\r\n// Export PredictionResult type for external use\r\nexport type { PredictionResult } from '@/types';\r\n","import { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { apiService, PredictionPoller } from '@/services/api';\r\nimport { getUserId } from '@/utils';\r\nimport type {\r\n  SessionInitiateRequest,\r\n  PredictionSubmitRequest,\r\n  PredictionResult,\r\n  HealthCheckResponse,\r\n  SessionData,\r\n  AppError,\r\n} from '@/types';\r\n\r\n// Query keys\r\nexport const QUERY_KEYS = {\r\n  health: ['health'] as const,\r\n  userPredictions: (userId: string) => ['predictions', 'user', userId] as const,\r\n  sessionPrediction: (sessionId: string) => ['predictions', 'session', sessionId] as const,\r\n  userSessions: (userId: string) => ['sessions', 'user', userId] as const,\r\n} as const;\r\n\r\n// Health check query\r\nexport const useHealthCheck = () => {\r\n  return useQuery<HealthCheckResponse, AppError>({\r\n    queryKey: QUERY_KEYS.health,\r\n    queryFn: () => apiService.checkHealth(),\r\n    retry: 2,\r\n    staleTime: 30000, // 30 seconds\r\n    refetchOnWindowFocus: false,\r\n  });\r\n};\r\n\r\n// Session initiation mutation\r\nexport const useInitiateSession = () => {\r\n  return useMutation({\r\n    mutationFn: (request: SessionInitiateRequest) => \r\n      apiService.initiateSession(request),\r\n    onError: () => {\r\n      // Error is handled by the UI components\r\n    },\r\n  });\r\n};\r\n\r\n// Prediction submission mutation\r\nexport const useSubmitPrediction = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: (request: PredictionSubmitRequest) => \r\n      apiService.submitPrediction(request),\r\n    onSuccess: (_, variables) => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({\r\n        queryKey: QUERY_KEYS.sessionPrediction(variables.sessionid),\r\n      });\r\n      \r\n      const userId = getUserId();\r\n      queryClient.invalidateQueries({\r\n        queryKey: QUERY_KEYS.userPredictions(userId),\r\n      });\r\n    },\r\n    onError: () => {\r\n      // Error is handled by the UI components\r\n    },\r\n  });\r\n};\r\n\r\n// Get prediction by session ID\r\nexport const useSessionPrediction = (sessionId: string, enabled = true) => {\r\n  return useQuery<PredictionResult, AppError>({\r\n    queryKey: QUERY_KEYS.sessionPrediction(sessionId),\r\n    queryFn: () => apiService.getPredictionBySessionId(sessionId),\r\n    enabled: enabled && Boolean(sessionId),\r\n    retry: (failureCount, error) => {\r\n      // Don't retry on 404s (session not found)\r\n      if (error.code === 'HTTP_404') {\r\n        return false;\r\n      }\r\n      return failureCount < 3;\r\n    },\r\n    refetchOnWindowFocus: false,\r\n  });\r\n};\r\n\r\n// Get user predictions\r\nexport const useUserPredictions = (userId?: string) => {\r\n  const effectiveUserId = userId || getUserId();\r\n\r\n  return useQuery<PredictionResult[], AppError>({\r\n    queryKey: QUERY_KEYS.userPredictions(effectiveUserId),\r\n    queryFn: () => apiService.getUserPredictions(effectiveUserId),\r\n    enabled: Boolean(effectiveUserId),\r\n    staleTime: 60000, // 1 minute\r\n    refetchOnWindowFocus: false,\r\n  });\r\n};\r\n\r\n// Get user sessions with complete session data\r\nexport const useUserSessions = (userId?: string) => {\r\n  const effectiveUserId = userId || getUserId();\r\n\r\n  return useQuery<{ success: boolean; count: number; sessions: SessionData[] }, AppError>({\r\n    queryKey: QUERY_KEYS.userSessions(effectiveUserId),\r\n    queryFn: () => apiService.getUserSessions(effectiveUserId),\r\n    enabled: Boolean(effectiveUserId),\r\n    staleTime: 30000, // 30 seconds\r\n    refetchOnWindowFocus: false,\r\n  });\r\n};\r\n\r\n// Prediction polling hook\r\nexport const usePredictionPolling = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const startPolling = (\r\n    sessionId: string,\r\n    options?: {\r\n      onUpdate?: (result: PredictionResult) => void;\r\n      onComplete?: (result: PredictionResult) => void;\r\n      onError?: (error: AppError) => void;\r\n    }\r\n  ) => {\r\n    const poller = new PredictionPoller(sessionId);\r\n\r\n    return poller.start(\r\n      (result) => {\r\n        // Update cache\r\n        queryClient.setQueryData(\r\n          QUERY_KEYS.sessionPrediction(sessionId),\r\n          result\r\n        );\r\n        options?.onUpdate?.(result);\r\n      },\r\n      (result) => {\r\n        // Final update and invalidate user predictions\r\n        queryClient.setQueryData(\r\n          QUERY_KEYS.sessionPrediction(sessionId),\r\n          result\r\n        );\r\n        \r\n        const userId = getUserId();\r\n        queryClient.invalidateQueries({\r\n          queryKey: QUERY_KEYS.userPredictions(userId),\r\n        });\r\n        \r\n        options?.onComplete?.(result);\r\n      },\r\n      (error) => {\r\n        options?.onError?.(error);\r\n      }\r\n    );\r\n  };\r\n\r\n  return { startPolling };\r\n};\r\n\r\n// API connection test\r\nexport const useTestConnection = () => {\r\n  return useMutation({\r\n    mutationFn: () => apiService.testConnection(),\r\n    onError: () => {\r\n      // Error is handled by the UI components\r\n    },\r\n  });\r\n};\r\n\r\n// Optimistic updates helper\r\nexport const useOptimisticUpdates = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const updateSessionStatus = (sessionId: string, status: PredictionResult['status']) => {\r\n    queryClient.setQueryData(\r\n      QUERY_KEYS.sessionPrediction(sessionId),\r\n      (old: PredictionResult | undefined) => {\r\n        if (!old) return old;\r\n        return {\r\n          ...old,\r\n          status,\r\n          updatedAt: new Date().toISOString(),\r\n        };\r\n      }\r\n    );\r\n  };\r\n\r\n  const addNewSession = (sessionId: string, userId: string) => {\r\n    const newSession: PredictionResult = {\r\n      sessionId,\r\n      status: 'queued',\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString(),\r\n    };\r\n\r\n    // Add to session cache\r\n    queryClient.setQueryData(\r\n      QUERY_KEYS.sessionPrediction(sessionId),\r\n      newSession\r\n    );\r\n\r\n    // Add to user predictions cache\r\n    queryClient.setQueryData(\r\n      QUERY_KEYS.userPredictions(userId),\r\n      (old: PredictionResult[] | undefined) => {\r\n        if (!old) return [newSession];\r\n        return [newSession, ...old];\r\n      }\r\n    );\r\n  };\r\n\r\n  return {\r\n    updateSessionStatus,\r\n    addNewSession,\r\n  };\r\n};\r\n","import { useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Eye } from 'lucide-react';\r\nimport { getUserId } from '@/utils';\r\nimport { useHealthCheck, useUserSessions } from '@/hooks/api';\r\nimport { useAnnouncements } from '@/hooks/accessibility';\r\n\r\nexport const Dashboard: React.FC = () => {\r\n  const userId = getUserId();\r\n  const { announce } = useAnnouncements();\r\n  \r\n  // Fetch health status and recent sessions\r\n  const { data: healthStatus, isLoading: isHealthLoading, error: healthError } = useHealthCheck();\r\n  const { data: sessionsResponse, isLoading: isSessionsLoading } = useUserSessions(userId);\r\n\r\n  useEffect(() => {\r\n    announce('Dashboard page loaded', 'polite');\r\n  }, [announce]);\r\n\r\n  const quickActions = [\r\n    {\r\n      title: 'Upload & Analyze',\r\n      description: 'Upload audio files for behavioral health analysis',\r\n      href: '/upload',\r\n      icon: 'üì§',\r\n      color: 'primary'\r\n    },\r\n    {\r\n      title: 'View Sessions',\r\n      description: 'Browse all analysis sessions and their results',\r\n      href: '/sessions',\r\n      icon: 'üìä',\r\n      color: 'secondary'\r\n    },\r\n    {\r\n      title: 'My Predictions',\r\n      description: 'View your complete prediction history',\r\n      href: '/predictions',\r\n      icon: 'üìà',\r\n      color: 'accent'\r\n    },\r\n    {\r\n      title: 'System Health',\r\n      description: 'Check API status and system connectivity',\r\n      href: '/health',\r\n      icon: 'üè•',\r\n      color: 'warning'\r\n    }\r\n  ];\r\n\r\n  const getActionClasses = (color: string) => {\r\n    const baseClasses = 'block p-6 rounded-lg border-2 transition-all hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2';\r\n    \r\n    switch (color) {\r\n      case 'primary':\r\n        return `${baseClasses} border-primary-200 bg-primary-50 hover:border-primary-300 hover:bg-primary-100 dark:border-primary-800 dark:bg-primary-900 dark:hover:border-primary-700 dark:hover:bg-primary-800 focus:ring-primary-500`;\r\n      case 'secondary':\r\n        return `${baseClasses} border-secondary-200 bg-secondary-50 hover:border-secondary-300 hover:bg-secondary-100 dark:border-secondary-800 dark:bg-secondary-900 dark:hover:border-secondary-700 dark:hover:bg-secondary-800 focus:ring-secondary-500`;\r\n      case 'accent':\r\n        return `${baseClasses} border-accent-200 bg-accent-50 hover:border-accent-300 hover:bg-accent-100 dark:border-accent-800 dark:bg-accent-900 dark:hover:border-accent-700 dark:hover:bg-accent-800 focus:ring-accent-500`;\r\n      case 'warning':\r\n        return `${baseClasses} border-warning-200 bg-warning-50 hover:border-warning-300 hover:bg-warning-100 dark:border-teal-600 dark:bg-teal-800 dark:hover:border-teal-500 dark:hover:bg-teal-700 focus:ring-warning-500`;\r\n      default:\r\n        return `${baseClasses} border-gray-200 bg-gray-50 hover:border-gray-300 hover:bg-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:hover:border-gray-600 dark:hover:bg-gray-700 focus:ring-gray-500`;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Page header */}\r\n      <div className=\"text-center\">\r\n        <h1 className=\"text-3xl font-bold text-text-primary-light dark:text-text-primary-dark\">\r\n          Behavioral Health System\r\n        </h1>\r\n        <p className=\"mt-2 text-lg text-text-secondary-light dark:text-text-secondary-dark\">\r\n          Audio-based mental health prediction and analysis\r\n        </p>\r\n      </div>\r\n\r\n      {/* User ID display */}\r\n      <div className=\"card\">\r\n        <h2 className=\"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark mb-2\">\r\n          Your User ID\r\n        </h2>\r\n        <div className=\"bg-gray-100 dark:bg-gray-700 p-3 rounded-md\">\r\n          <code className=\"text-sm font-mono text-text-primary-light dark:text-text-primary-dark break-all\">\r\n            {userId}\r\n          </code>\r\n        </div>\r\n        <p className=\"mt-2 text-sm text-text-muted-light dark:text-text-muted-dark\">\r\n          This ID is automatically generated and stored locally to track your sessions.\r\n        </p>\r\n      </div>\r\n\r\n      {/* Quick actions */}\r\n      <div>\r\n        <h2 className=\"text-xl font-semibold text-text-primary-light dark:text-text-primary-dark mb-6\">\r\n          Quick Actions\r\n        </h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          {quickActions.map((action) => (\r\n            <Link\r\n              key={action.href}\r\n              to={action.href}\r\n              className={getActionClasses(action.color)}\r\n              aria-label={`${action.title}: ${action.description}`}\r\n            >\r\n              <div className=\"text-center\">\r\n                <div className=\"text-3xl mb-3\" role=\"img\" aria-hidden=\"true\">\r\n                  {action.icon}\r\n                </div>\r\n                <h3 className=\"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark mb-2\">\r\n                  {action.title}\r\n                </h3>\r\n                <p className=\"text-sm text-text-secondary-light dark:text-text-secondary-dark\">\r\n                  {action.description}\r\n                </p>\r\n              </div>\r\n            </Link>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Recent activity */}\r\n      <div className=\"card\">\r\n        <h2 className=\"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark mb-4\">\r\n          Recent Activity\r\n        </h2>\r\n        {isSessionsLoading ? (\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"spinner w-4 h-4\"></div>\r\n            <span className=\"text-text-secondary-light dark:text-text-secondary-dark\">\r\n              Loading recent sessions...\r\n            </span>\r\n          </div>\r\n        ) : (!sessionsResponse?.sessions || sessionsResponse.sessions.length === 0) ? (\r\n          <div className=\"text-center py-8\">\r\n            <div className=\"text-4xl mb-4\" role=\"img\" aria-label=\"No data\">üì≠</div>\r\n            <p className=\"text-text-secondary-light dark:text-text-secondary-dark\">\r\n              No sessions yet. \r\n              <Link \r\n                to=\"/upload\" \r\n                className=\"text-primary-600 dark:text-primary-400 hover:underline ml-1\"\r\n              >\r\n                Upload your first audio file\r\n              </Link> to get started.\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            {sessionsResponse.sessions.slice(0, 3).map((session) => (\r\n              <div\r\n                key={session.sessionId}\r\n                className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-md\"\r\n              >\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className={`status-${session.status || 'completed'}`}>\r\n                    {session.status || 'completed'}\r\n                  </div>\r\n                  <span className=\"text-text-primary-light dark:text-text-primary-dark\">\r\n                    {session.audioFileName || session.sessionId?.slice(0, 8) || 'Unknown'}\r\n                  </span>\r\n                  <span className=\"text-xs text-gray-500 dark:text-gray-400 ml-2\" title={session.createdAt}>\r\n                    {session.createdAt ? new Date(session.createdAt).toLocaleString() : ''}\r\n                  </span>\r\n                </div>\r\n                <Link\r\n                  to={`/sessions/${session.sessionId || ''}`}\r\n                  className=\"text-primary-600 dark:text-primary-400 hover:underline text-sm flex items-center gap-1\"\r\n                  title=\"View session details\"\r\n                  aria-label={`View details for session ${session.audioFileName || session.sessionId?.slice(0, 8) || 'Unknown'}`}\r\n                >\r\n                  <Eye className=\"w-4 h-4\" aria-hidden=\"true\" />\r\n                </Link>\r\n              </div>\r\n            ))}\r\n            {sessionsResponse.sessions.length > 3 && (\r\n              <div className=\"text-center pt-3\">\r\n                <Link\r\n                  to=\"/sessions\"\r\n                  className=\"text-primary-600 dark:text-primary-400 hover:underline\"\r\n                >\r\n                  View all {sessionsResponse.sessions.length} sessions ‚Üí\r\n                </Link>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* System status */}\r\n      <div className=\"card\">\r\n        <h2 className=\"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark mb-4\">\r\n          System Status\r\n        </h2>\r\n        {isHealthLoading ? (\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"spinner w-4 h-4\"></div>\r\n            <span className=\"text-text-secondary-light dark:text-text-secondary-dark\">\r\n              Checking system health...\r\n            </span>\r\n          </div>\r\n        ) : healthError ? (\r\n          <div className=\"flex items-center space-x-2 text-error-600 dark:text-error-400\">\r\n            <span role=\"img\" aria-label=\"Error\">‚ö†Ô∏è</span>\r\n            <span>System health check failed</span>\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex items-center space-x-2 text-success-600 dark:text-success-400\">\r\n            <span role=\"img\" aria-label=\"Healthy\">‚úÖ</span>\r\n            <span>All systems operational</span>\r\n            {healthStatus?.checks && (\r\n              <span className=\"text-text-muted-light dark:text-text-muted-dark\">\r\n                ({Object.keys(healthStatus.checks).length} services checked)\r\n              </span>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { FFmpeg } from '@ffmpeg/ffmpeg';\r\nimport { fetchFile, toBlobURL } from '@ffmpeg/util';\r\nimport { config } from '@/config/constants';\r\nimport { createAppError } from '@/utils';\r\nimport type { AudioConversionOptions } from '@/types';\r\n// import type { AppError } from '@/types'; // Commented out until used\r\n\r\nexport interface ConversionProgress {\r\n  stage: 'loading' | 'converting' | 'completed';\r\n  progress: number;\r\n  message: string;\r\n}\r\n\r\nexport class AudioProcessor {\r\n  private ffmpeg: FFmpeg | null = null;\r\n  private isLoaded = false;\r\n  private loadingPromise: Promise<void> | null = null;\r\n\r\n  constructor() {\r\n    this.ffmpeg = new FFmpeg();\r\n  }\r\n\r\n  private async loadFFmpeg(): Promise<void> {\r\n    if (this.isLoaded) return;\r\n    \r\n    if (this.loadingPromise) {\r\n      return this.loadingPromise;\r\n    }\r\n\r\n    this.loadingPromise = this.doLoadFFmpeg();\r\n    return this.loadingPromise;\r\n  }\r\n\r\n  private async doLoadFFmpeg(): Promise<void> {\r\n    if (!this.ffmpeg) {\r\n      throw createAppError(\r\n        'FFMPEG_INIT_ERROR',\r\n        'Failed to initialize FFmpeg'\r\n      );\r\n    }\r\n\r\n    try {\r\n      // Load FFmpeg with CDN URLs for better reliability\r\n      const baseURL = 'https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm';\r\n      \r\n      await this.ffmpeg.load({\r\n        coreURL: await toBlobURL(`${baseURL}/ffmpeg-core.js`, 'text/javascript'),\r\n        wasmURL: await toBlobURL(`${baseURL}/ffmpeg-core.wasm`, 'application/wasm'),\r\n      });\r\n\r\n      this.isLoaded = true;\r\n    } catch (error) {\r\n      this.loadingPromise = null;\r\n      throw createAppError(\r\n        'FFMPEG_LOAD_ERROR',\r\n        'Failed to load FFmpeg. Please check your internet connection and try again.',\r\n        { originalError: error }\r\n      );\r\n    }\r\n  }\r\n\r\n  async convertAudio(\r\n    file: File,\r\n    options: AudioConversionOptions = {\r\n      outputFormat: 'wav',\r\n      sampleRate: 44100,\r\n      channels: 1,\r\n    },\r\n    onProgress?: (progress: ConversionProgress) => void\r\n  ): Promise<File> {\r\n    try {\r\n      // Notify loading stage\r\n      onProgress?.({\r\n        stage: 'loading',\r\n        progress: 0,\r\n        message: 'Loading audio processor...',\r\n      });\r\n\r\n      await this.loadFFmpeg();\r\n\r\n      if (!this.ffmpeg) {\r\n        throw createAppError('FFMPEG_NOT_LOADED', 'FFmpeg not properly loaded');\r\n      }\r\n\r\n      // Setup progress callback\r\n      this.ffmpeg.on('progress', ({ progress }) => {\r\n        onProgress?.({\r\n          stage: 'converting',\r\n          progress: Math.round(progress * 100),\r\n          message: `Converting audio... ${Math.round(progress * 100)}%`,\r\n        });\r\n      });\r\n\r\n      onProgress?.({\r\n        stage: 'converting',\r\n        progress: 0,\r\n        message: 'Preparing audio file...',\r\n      });\r\n\r\n      // Write input file\r\n      const inputName = 'input.' + this.getFileExtension(file.name);\r\n      await this.ffmpeg.writeFile(inputName, await fetchFile(file));\r\n\r\n      // Build FFmpeg command\r\n      const outputName = `output.${options.outputFormat}`;\r\n      const command = [\r\n        '-i', inputName,\r\n        '-ac', options.channels.toString(),\r\n        '-ar', options.sampleRate.toString(),\r\n        '-f', options.outputFormat,\r\n        outputName\r\n      ];\r\n\r\n      // Execute conversion\r\n      await this.ffmpeg.exec(command);\r\n\r\n      // Read output file\r\n      const outputData = await this.ffmpeg.readFile(outputName);\r\n      const outputBlob = new Blob([outputData as unknown as ArrayBuffer], { type: `audio/${options.outputFormat}` });\r\n      \r\n      // Create new File object with converted audio\r\n      const convertedFile = new File(\r\n        [outputBlob],\r\n        `${this.getFileNameWithoutExtension(file.name)}.${options.outputFormat}`,\r\n        { type: `audio/${options.outputFormat}` }\r\n      );\r\n\r\n      // Clean up temporary files\r\n      await this.ffmpeg.deleteFile(inputName);\r\n      await this.ffmpeg.deleteFile(outputName);\r\n\r\n      onProgress?.({\r\n        stage: 'completed',\r\n        progress: 100,\r\n        message: 'Audio conversion completed',\r\n      });\r\n\r\n      return convertedFile;\r\n\r\n    } catch (error) {\r\n      throw createAppError(\r\n        'AUDIO_CONVERSION_ERROR',\r\n        'Failed to convert audio file. Please try with a different file.',\r\n        { \r\n          originalError: error,\r\n          fileName: file.name,\r\n          fileSize: file.size,\r\n          fileType: file.type\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  private getFileExtension(filename: string): string {\r\n    const lastDot = filename.lastIndexOf('.');\r\n    return lastDot !== -1 ? filename.slice(lastDot + 1).toLowerCase() : '';\r\n  }\r\n\r\n  private getFileNameWithoutExtension(filename: string): string {\r\n    const lastDot = filename.lastIndexOf('.');\r\n    return lastDot !== -1 ? filename.slice(0, lastDot) : filename;\r\n  }\r\n\r\n  async isFormatSupported(file: File): Promise<boolean> {\r\n    try {\r\n      await this.loadFFmpeg();\r\n      \r\n      // Check if file extension is in supported formats\r\n      const supportedFormats = ['wav', 'mp3', 'mp4', 'm4a', 'aac', 'flac', 'ogg'];\r\n      const extension = this.getFileExtension(file.name);\r\n      \r\n      return supportedFormats.includes(extension);\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  dispose(): void {\r\n    if (this.ffmpeg) {\r\n      this.ffmpeg.terminate();\r\n      this.ffmpeg = null;\r\n    }\r\n    this.isLoaded = false;\r\n    this.loadingPromise = null;\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nlet audioProcessorInstance: AudioProcessor | null = null;\r\n\r\nexport const getAudioProcessor = (): AudioProcessor => {\r\n  if (!audioProcessorInstance) {\r\n    audioProcessorInstance = new AudioProcessor();\r\n  }\r\n  return audioProcessorInstance;\r\n};\r\n\r\n// Fallback for browsers that don't support SharedArrayBuffer or other requirements\r\nexport const isFFmpegSupported = (): boolean => {\r\n  try {\r\n    // Check for SharedArrayBuffer support (required for FFmpeg.wasm)\r\n    if (typeof SharedArrayBuffer === 'undefined') {\r\n      return false;\r\n    }\r\n\r\n    // Check if in a secure context (required for some FFmpeg features)\r\n    if (!window.isSecureContext) {\r\n      return false;\r\n    }\r\n\r\n    return config.features.enableFFmpegWorker;\r\n  } catch {\r\n    return false;\r\n  }\r\n};\r\n\r\n// Server fallback (for when FFmpeg.wasm is not supported)\r\nexport const convertAudioOnServer = async (\r\n  file: File,\r\n  _options: AudioConversionOptions\r\n): Promise<File> => {\r\n  // This would be implemented as a backend endpoint\r\n  // For now, return the original file as fallback\r\n  return file;\r\n};\r\n\r\n// Convenience function for the Upload & Analyze page\r\nexport const convertAudioToWav = async (\r\n  file: File,\r\n  onProgress?: (progress: number) => void\r\n): Promise<Blob> => {\r\n  const processor = getAudioProcessor();\r\n  \r\n  const convertedFile = await processor.convertAudio(\r\n    file,\r\n    {\r\n      outputFormat: 'wav',\r\n      sampleRate: 44100,\r\n      channels: 1,\r\n    },\r\n    onProgress ? (progress) => onProgress(progress.progress) : undefined\r\n  );\r\n\r\n  // Convert File to Blob\r\n  return new Blob([convertedFile], { type: 'audio/wav' });\r\n};\r\n","import { BlobServiceClient, ContainerClient } from '@azure/storage-blob';\r\nimport { config } from '@/config/constants';\r\nimport { createAppError } from '@/utils';\r\n\r\nexport interface UploadProgress {\r\n  progress: number;\r\n  stage: 'preparing' | 'uploading' | 'completed';\r\n  message: string;\r\n}\r\n\r\nexport interface UploadResult {\r\n  url: string;\r\n  fileName: string;\r\n  size: number;\r\n}\r\n\r\nexport class AzureBlobService {\r\n  private containerClient: ContainerClient | null = null;\r\n  private sasUrl: string;\r\n\r\n  constructor(sasUrl?: string) {\r\n    this.sasUrl = sasUrl || config.azure.blobSasUrl;\r\n    \r\n    if (!this.sasUrl) {\r\n      throw createAppError(\r\n        'AZURE_CONFIG_ERROR',\r\n        'Azure Blob Storage SAS URL not configured'\r\n      );\r\n    }\r\n  }\r\n\r\n  private getContainerClient(): ContainerClient {\r\n    if (!this.containerClient) {\r\n      try {\r\n        const blobServiceClient = new BlobServiceClient(this.sasUrl);\r\n        this.containerClient = blobServiceClient.getContainerClient(config.azure.containerName);\r\n      } catch (error) {\r\n        throw createAppError(\r\n          'AZURE_CLIENT_ERROR',\r\n          'Failed to initialize Azure Blob Storage client',\r\n          { originalError: error }\r\n        );\r\n      }\r\n    }\r\n    \r\n    return this.containerClient;\r\n  }\r\n\r\n  async uploadFile(\r\n    file: File,\r\n    fileName?: string,\r\n    onProgress?: (progress: UploadProgress) => void\r\n  ): Promise<UploadResult> {\r\n    try {\r\n      onProgress?.({\r\n        progress: 0,\r\n        stage: 'preparing',\r\n        message: 'Preparing upload...',\r\n      });\r\n\r\n      const containerClient = this.getContainerClient();\r\n      const blobName = fileName || this.generateBlobName(file.name);\r\n      const blockBlobClient = containerClient.getBlockBlobClient(blobName);\r\n\r\n      // Upload with progress tracking\r\n      onProgress?.({\r\n        progress: 10,\r\n        stage: 'uploading',\r\n        message: 'Starting upload...',\r\n      });\r\n\r\n      await blockBlobClient.uploadData(file, {\r\n        blobHTTPHeaders: {\r\n          blobContentType: file.type,\r\n        },\r\n        onProgress: (uploadProgress) => {\r\n          const progressPercent = uploadProgress.loadedBytes && file.size \r\n            ? Math.round((uploadProgress.loadedBytes / file.size) * 90) + 10\r\n            : 50;\r\n            \r\n          onProgress?.({\r\n            progress: progressPercent,\r\n            stage: 'uploading',\r\n            message: `Uploading... ${progressPercent}%`,\r\n          });\r\n        },\r\n      });\r\n\r\n      // Get the URL for the uploaded blob\r\n      const blobUrl = blockBlobClient.url;\r\n\r\n      onProgress?.({\r\n        progress: 100,\r\n        stage: 'completed',\r\n        message: 'Upload completed',\r\n      });\r\n\r\n      return {\r\n        url: blobUrl,\r\n        fileName: blobName,\r\n        size: file.size,\r\n      };\r\n\r\n    } catch (error) {\r\n      throw createAppError(\r\n        'UPLOAD_ERROR',\r\n        'Failed to upload file to Azure Blob Storage',\r\n        { \r\n          originalError: error,\r\n          fileName: file.name,\r\n          fileSize: file.size\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  private generateBlobName(originalFileName: string): string {\r\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\r\n    const randomId = Math.random().toString(36).substring(2, 8);\r\n    const extension = originalFileName.split('.').pop() || 'wav';\r\n    \r\n    return `audio/${timestamp}-${randomId}.${extension}`;\r\n  }\r\n\r\n  async testConnection(): Promise<{ success: boolean; message: string }> {\r\n    try {\r\n      const containerClient = this.getContainerClient();\r\n      \r\n      // Try to get container properties to test connection\r\n      await containerClient.getProperties();\r\n      \r\n      return {\r\n        success: true,\r\n        message: 'Azure Blob Storage connection successful',\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'Failed to connect to Azure Blob Storage. Please check your SAS URL configuration.',\r\n      };\r\n    }\r\n  }\r\n\r\n  async deleteFile(fileName: string): Promise<void> {\r\n    try {\r\n      const containerClient = this.getContainerClient();\r\n      const blockBlobClient = containerClient.getBlockBlobClient(fileName);\r\n      \r\n      await blockBlobClient.deleteIfExists();\r\n    } catch (error) {\r\n      throw createAppError(\r\n        'DELETE_ERROR',\r\n        'Failed to delete file from Azure Blob Storage',\r\n        { originalError: error, fileName }\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nlet blobServiceInstance: AzureBlobService | null = null;\r\n\r\nexport const getBlobService = (sasUrl?: string): AzureBlobService => {\r\n  if (!blobServiceInstance || (sasUrl && sasUrl !== blobServiceInstance['sasUrl'])) {\r\n    blobServiceInstance = new AzureBlobService(sasUrl);\r\n  }\r\n  return blobServiceInstance;\r\n};\r\n\r\n// Check if Azure Blob Storage is properly configured\r\nexport const isAzureBlobConfigured = (): boolean => {\r\n  return Boolean(config.azure.blobSasUrl && config.azure.containerName);\r\n};\r\n\r\n// Convenience function for the Upload & Analyze page\r\nexport const uploadToAzureBlob = async (\r\n  file: File | Blob,\r\n  fileName: string,\r\n  onProgress?: (progress: number) => void\r\n): Promise<string> => {\r\n  const blobService = getBlobService();\r\n  \r\n  // Convert Blob to File if needed\r\n  const fileToUpload = file instanceof File ? file : new File([file], fileName, { type: file.type });\r\n  \r\n  const result = await blobService.uploadFile(\r\n    fileToUpload,\r\n    fileName,\r\n    onProgress ? (progress) => onProgress(progress.progress) : undefined\r\n  );\r\n\r\n  return result.url;\r\n};\r\n","import { useCallback, useRef } from 'react';\r\n\r\n/**\r\n * Hook for accessibility features like screen reader announcements\r\n */\r\nexport const useAccessibility = () => {\r\n  const announcementRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  /**\r\n   * Announce text to screen readers\r\n   */\r\n  const announceToScreenReader = useCallback((message: string) => {\r\n    // Create a live region if it doesn't exist\r\n    if (!announcementRef.current) {\r\n      const liveRegion = document.createElement('div');\r\n      liveRegion.setAttribute('aria-live', 'polite');\r\n      liveRegion.setAttribute('aria-atomic', 'true');\r\n      liveRegion.style.position = 'absolute';\r\n      liveRegion.style.left = '-10000px';\r\n      liveRegion.style.width = '1px';\r\n      liveRegion.style.height = '1px';\r\n      liveRegion.style.overflow = 'hidden';\r\n      document.body.appendChild(liveRegion);\r\n      announcementRef.current = liveRegion;\r\n    }\r\n\r\n    // Clear previous message and set new one\r\n    announcementRef.current.textContent = '';\r\n    setTimeout(() => {\r\n      if (announcementRef.current) {\r\n        announcementRef.current.textContent = message;\r\n      }\r\n    }, 100);\r\n  }, []);\r\n\r\n  /**\r\n   * Focus management utilities\r\n   */\r\n  const focusManagement = {\r\n    /**\r\n     * Set focus to element by ID\r\n     */\r\n    focusById: (elementId: string) => {\r\n      const element = document.getElementById(elementId);\r\n      if (element) {\r\n        element.focus();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Focus the first focusable element within a container\r\n     */\r\n    focusFirstInContainer: (container: HTMLElement) => {\r\n      const focusableElements = container.querySelectorAll(\r\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n      );\r\n      \r\n      const firstElement = focusableElements[0] as HTMLElement;\r\n      if (firstElement) {\r\n        firstElement.focus();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Trap focus within a container (for modals)\r\n     */\r\n    trapFocus: (container: HTMLElement) => {\r\n      const focusableElements = container.querySelectorAll(\r\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n      ) as NodeListOf<HTMLElement>;\r\n\r\n      const firstElement = focusableElements[0];\r\n      const lastElement = focusableElements[focusableElements.length - 1];\r\n\r\n      const handleTabKey = (e: KeyboardEvent) => {\r\n        if (e.key !== 'Tab') return;\r\n\r\n        if (e.shiftKey) {\r\n          if (document.activeElement === firstElement) {\r\n            lastElement.focus();\r\n            e.preventDefault();\r\n          }\r\n        } else {\r\n          if (document.activeElement === lastElement) {\r\n            firstElement.focus();\r\n            e.preventDefault();\r\n          }\r\n        }\r\n      };\r\n\r\n      container.addEventListener('keydown', handleTabKey);\r\n\r\n      // Return cleanup function\r\n      return () => {\r\n        container.removeEventListener('keydown', handleTabKey);\r\n      };\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Keyboard navigation helpers\r\n   */\r\n  const keyboardNavigation = {\r\n    /**\r\n     * Handle arrow key navigation for lists\r\n     */\r\n    handleArrowNavigation: (\r\n      event: React.KeyboardEvent,\r\n      items: HTMLElement[],\r\n      currentIndex: number,\r\n      onIndexChange: (newIndex: number) => void\r\n    ) => {\r\n      let newIndex = currentIndex;\r\n\r\n      switch (event.key) {\r\n        case 'ArrowDown':\r\n          event.preventDefault();\r\n          newIndex = currentIndex < items.length - 1 ? currentIndex + 1 : 0;\r\n          break;\r\n        case 'ArrowUp':\r\n          event.preventDefault();\r\n          newIndex = currentIndex > 0 ? currentIndex - 1 : items.length - 1;\r\n          break;\r\n        case 'Home':\r\n          event.preventDefault();\r\n          newIndex = 0;\r\n          break;\r\n        case 'End':\r\n          event.preventDefault();\r\n          newIndex = items.length - 1;\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n\r\n      onIndexChange(newIndex);\r\n      items[newIndex]?.focus();\r\n    },\r\n\r\n    /**\r\n     * Handle escape key to close modals/dropdowns\r\n     */\r\n    handleEscape: (event: React.KeyboardEvent, onEscape: () => void) => {\r\n      if (event.key === 'Escape') {\r\n        event.preventDefault();\r\n        onEscape();\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Generate unique IDs for form elements\r\n   */\r\n  const generateId = useCallback((prefix: string = 'element') => {\r\n    return `${prefix}-${Math.random().toString(36).substr(2, 9)}`;\r\n  }, []);\r\n\r\n  /**\r\n   * Check if user prefers reduced motion\r\n   */\r\n  const prefersReducedMotion = useCallback(() => {\r\n    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\r\n  }, []);\r\n\r\n  /**\r\n   * Get appropriate ARIA attributes for form validation\r\n   */\r\n  const getValidationAttributes = useCallback((\r\n    isValid: boolean,\r\n    errorMessage?: string,\r\n    describedById?: string\r\n  ) => {\r\n    const attributes: Record<string, string> = {};\r\n\r\n    if (!isValid) {\r\n      attributes['aria-invalid'] = 'true';\r\n      if (errorMessage && describedById) {\r\n        attributes['aria-describedby'] = describedById;\r\n      }\r\n    }\r\n\r\n    return attributes;\r\n  }, []);\r\n\r\n  return {\r\n    announceToScreenReader,\r\n    focusManagement,\r\n    keyboardNavigation,\r\n    generateId,\r\n    prefersReducedMotion,\r\n    getValidationAttributes,\r\n  };\r\n};\r\n","import React, { useState, useCallback, useRef } from 'react';\r\nimport { Upload, Play, Pause, X, AlertCircle, CheckCircle, Loader2, Volume2, Plus, Trash2, Files, File } from 'lucide-react';\r\nimport { convertAudioToWav } from '../services/audio';\r\nimport { uploadToAzureBlob } from '../services/azure';\r\nimport { apiService, PredictionPoller } from '../services/api';\r\nimport { useAccessibility } from '../hooks/useAccessibility';\r\nimport { getUserId, getStoredProcessingMode, setStoredProcessingMode, setUserId, generateNewUserId, isCustomUserId, setUserIdMode } from '../utils';\r\nimport type { PredictionResult, AppError, SessionMetadata } from '../types';\r\n\r\ninterface UploadProgress {\r\n  stage: 'idle' | 'starting' | 'initiating' | 'converting' | 'uploading' | 'submitting' | 'analyzing' | 'complete' | 'error';\r\n  progress: number;\r\n  message: string;\r\n  error?: {\r\n    code: string;\r\n    message: string;\r\n    details?: Record<string, unknown>;\r\n    uploadedFileUrl?: string; // Track uploaded file for cleanup\r\n  };\r\n}\r\n\r\ninterface AudioFile {\r\n  id: string;\r\n  file: File;\r\n  url: string;\r\n  duration?: number;\r\n}\r\n\r\ninterface ProcessingProgress {\r\n  [fileId: string]: UploadProgress;\r\n}\r\n\r\ninterface FileResults {\r\n  [fileId: string]: AnalysisResult;\r\n}\r\n\r\ninterface FileProcessingState {\r\n  [fileId: string]: 'ready' | 'processing' | 'complete' | 'error';\r\n}\r\n\r\ninterface SessionInfo {\r\n  sessionId: string;\r\n  userId: string;\r\n}\r\n\r\ninterface AnalysisResult {\r\n  sessionId: string;\r\n  depressionScore?: number;\r\n  riskLevel?: 'low' | 'medium' | 'high';\r\n  confidence?: number;\r\n  insights?: string[];\r\n  timestamp: string;\r\n  audioUrl?: string;\r\n  rawApiResponse?: any; // Store the complete API response\r\n}\r\n\r\nconst UploadAnalyze: React.FC = () => {\r\n  const [audioFiles, setAudioFiles] = useState<AudioFile[]>([]);\r\n  const [isMultiMode, setIsMultiMode] = useState(() => getStoredProcessingMode());\r\n  const [processingProgress, setProcessingProgress] = useState<ProcessingProgress>({});\r\n  const [results, setResults] = useState<FileResults>({});\r\n  const [fileStates, setFileStates] = useState<FileProcessingState>({});\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  \r\n  // Legacy single file state for backward compatibility\r\n  const [audioFile, setAudioFile] = useState<AudioFile | null>(null);\r\n  const [progress, setProgress] = useState<UploadProgress>({\r\n    stage: 'idle',\r\n    progress: 0,\r\n    message: ''\r\n  });\r\n  const [result, setResult] = useState<AnalysisResult | null>(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [playingFileId, setPlayingFileId] = useState<string | null>(null);\r\n  const [userMetadata, setUserMetadata] = useState({\r\n    age: '',\r\n    gender: '',\r\n    race: '',\r\n    ethnicity: '',\r\n    language: '',\r\n    weight: '',\r\n    zipcode: '',\r\n    sessionNotes: ''\r\n  });\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [toasts, setToasts] = useState<Array<{\r\n    id: string;\r\n    type: 'error' | 'warning' | 'info' | 'success';\r\n    title: string;\r\n    message: string;\r\n    timestamp: number;\r\n  }>>([]);\r\n\r\n  // User ID management state\r\n  const [isCustomUserIdMode, setIsCustomUserIdMode] = useState(() => isCustomUserId());\r\n  const [customUserId, setCustomUserId] = useState('');\r\n  const [userIdError, setUserIdError] = useState<string | null>(null);\r\n\r\n  // Get the current user ID from localStorage\r\n  const userId = getUserId();\r\n\r\n  const audioRef = useRef<HTMLAudioElement>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const { announceToScreenReader } = useAccessibility();\r\n\r\n  // Toast utility functions\r\n  const addToast = useCallback((type: 'error' | 'warning' | 'info' | 'success', title: string, message: string) => {\r\n    const id = Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n    const newToast = {\r\n      id,\r\n      type,\r\n      title,\r\n      message,\r\n      timestamp: Date.now()\r\n    };\r\n    setToasts(prev => [...prev, newToast]);\r\n    \r\n    // Auto-remove toast after 8 seconds for errors, 5 seconds for others\r\n    const duration = type === 'error' ? 8000 : 5000;\r\n    setTimeout(() => {\r\n      setToasts(prev => prev.filter(toast => toast.id !== id));\r\n    }, duration);\r\n  }, []);\r\n\r\n  const removeToast = useCallback((id: string) => {\r\n    setToasts(prev => prev.filter(toast => toast.id !== id));\r\n  }, []);\r\n\r\n  const resetState = useCallback(() => {\r\n    setAudioFiles([]);\r\n    setAudioFile(null);\r\n    setProgress({ stage: 'idle', progress: 0, message: '' });\r\n    setResult(null);\r\n    setResults({});\r\n    setProcessingProgress({});\r\n    setError(null);\r\n    setIsPlaying(false);\r\n    setCurrentTime(0);\r\n    setPlayingFileId(null);\r\n    setIsProcessing(false);\r\n  }, []);\r\n\r\n  // User ID management functions\r\n  const handleToggleUserIdMode = useCallback(() => {\r\n    setIsCustomUserIdMode(prev => {\r\n      const newMode = !prev;\r\n      setUserIdMode(newMode);\r\n      setUserIdError(null);\r\n      \r\n      if (!newMode) {\r\n        // Switching back to auto-generated mode\r\n        setCustomUserId('');\r\n        const newUserId = generateNewUserId();\r\n        announceToScreenReader(`Switched to auto-generated mode. New User ID: ${newUserId}`);\r\n      } else {\r\n        // Switching to custom mode\r\n        setCustomUserId(userId);\r\n        announceToScreenReader('Switched to custom User ID mode');\r\n      }\r\n      \r\n      return newMode;\r\n    });\r\n  }, [userId, announceToScreenReader]);\r\n\r\n  const handleCustomUserIdChange = useCallback((value: string) => {\r\n    setCustomUserId(value);\r\n    setUserIdError(null);\r\n  }, []);\r\n\r\n  const handleApplyCustomUserId = useCallback(() => {\r\n    const trimmedUserId = customUserId.trim();\r\n    \r\n    if (!trimmedUserId) {\r\n      setUserIdError('User ID cannot be empty');\r\n      return;\r\n    }\r\n\r\n    // Basic validation - allow any string but check for reasonable length and characters\r\n    if (trimmedUserId.length < 3) {\r\n      setUserIdError('User ID must be at least 3 characters long');\r\n      return;\r\n    }\r\n\r\n    if (trimmedUserId.length > 100) {\r\n      setUserIdError('User ID must be less than 100 characters');\r\n      return;\r\n    }\r\n\r\n    // Check for potentially problematic characters (optional - you can remove this if you want to allow all characters)\r\n    const problematicChars = /[<>\"/\\\\|?*\\x00-\\x1f]/;\r\n    if (problematicChars.test(trimmedUserId)) {\r\n      setUserIdError('User ID contains invalid characters. Please avoid special characters like < > \" / \\\\ | ? *');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setUserId(trimmedUserId);\r\n      setUserIdError(null);\r\n      announceToScreenReader(`Custom User ID applied: ${trimmedUserId}`);\r\n      \r\n      // Refresh the page to use the new user ID\r\n      window.location.reload();\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Failed to set User ID';\r\n      setUserIdError(errorMessage);\r\n    }\r\n  }, [customUserId, announceToScreenReader]);\r\n\r\n  const handleGenerateNewUserId = useCallback(() => {\r\n    const newUserId = generateNewUserId();\r\n    announceToScreenReader(`New User ID generated: ${newUserId}`);\r\n    // Refresh the page to use the new user ID\r\n    window.location.reload();\r\n  }, [announceToScreenReader]);\r\n\r\n  const generateFileId = () => {\r\n    return Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n  };\r\n\r\n  const addAudioFile = useCallback((file: File) => {\r\n    const id = generateFileId();\r\n    const url = URL.createObjectURL(file);\r\n    const audioFile: AudioFile = { id, file, url };\r\n    \r\n    if (isMultiMode) {\r\n      setAudioFiles(prev => [...prev, audioFile]);\r\n      setFileStates(prev => ({ ...prev, [id]: 'ready' }));\r\n      setProcessingProgress(prev => ({ ...prev, [id]: { stage: 'idle', progress: 0, message: 'Ready to process' } }));\r\n    } else {\r\n      setAudioFile(audioFile);\r\n    }\r\n    \r\n    announceToScreenReader(`Audio file selected: ${file.name}`);\r\n\r\n    // Get audio duration\r\n    const audio = new Audio(url);\r\n    audio.addEventListener('loadedmetadata', () => {\r\n      if (isMultiMode) {\r\n        setAudioFiles(prev => prev.map(af => \r\n          af.id === id ? { ...af, duration: audio.duration } : af\r\n        ));\r\n      } else {\r\n        setAudioFile(prev => prev ? { ...prev, duration: audio.duration } : null);\r\n      }\r\n    });\r\n  }, [isMultiMode, announceToScreenReader]);\r\n\r\n  const removeAudioFile = useCallback((fileId: string) => {\r\n    if (isMultiMode) {\r\n      setAudioFiles(prev => {\r\n        const fileToRemove = prev.find(f => f.id === fileId);\r\n        if (fileToRemove) {\r\n          URL.revokeObjectURL(fileToRemove.url);\r\n        }\r\n        return prev.filter(f => f.id !== fileId);\r\n      });\r\n      // Clean up associated progress, results, and states\r\n      setProcessingProgress(prev => {\r\n        const { [fileId]: removed, ...rest } = prev;\r\n        return rest;\r\n      });\r\n      setResults(prev => {\r\n        const { [fileId]: removed, ...rest } = prev;\r\n        return rest;\r\n      });\r\n      setFileStates(prev => {\r\n        const { [fileId]: removed, ...rest } = prev;\r\n        return rest;\r\n      });\r\n    }\r\n  }, [isMultiMode]);\r\n\r\n  const handleFileSelect = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = event.target.files;\r\n    if (!files || files.length === 0) return;\r\n\r\n    // Process multiple files or single file\r\n    Array.from(files).forEach(file => {\r\n      // Validate file type - check both MIME type and file extension\r\n      const supportedMimeTypes = [\r\n        'audio/wav', 'audio/wave', 'audio/x-wav',\r\n        'audio/mp3', 'audio/mpeg', 'audio/mp4',\r\n        'audio/m4a', 'audio/x-m4a', 'audio/mp4a-latm',\r\n        'audio/aac', 'audio/x-aac',\r\n        'audio/flac', 'audio/x-flac'\r\n      ];\r\n      \r\n      const fileName = file.name.toLowerCase();\r\n      const supportedExtensions = ['.wav', '.mp3', '.m4a', '.aac', '.flac'];\r\n      const hasValidExtension = supportedExtensions.some(ext => fileName.endsWith(ext));\r\n      const hasValidMimeType = supportedMimeTypes.includes(file.type);\r\n      \r\n      // Accept file if either MIME type OR extension is valid (some browsers don't set MIME types correctly)\r\n      if (!hasValidMimeType && !hasValidExtension) {\r\n        setError(`Unsupported file type for ${file.name}. Please select supported audio files (WAV, MP3, M4A, AAC, or FLAC)`);\r\n        addToast('error', 'Unsupported File', `${file.name} is not a supported audio file format`);\r\n        announceToScreenReader(`Error: Unsupported file format selected for ${file.name}`);\r\n        return;\r\n      }\r\n\r\n      // Validate file size (50MB limit)\r\n      const maxSize = 50 * 1024 * 1024;\r\n      if (file.size > maxSize) {\r\n        setError(`File ${file.name} is too large. File size must be less than 50MB`);\r\n        addToast('error', 'File Too Large', `${file.name} size must be less than 50MB`);\r\n        announceToScreenReader(`Error: File ${file.name} is too large`);\r\n        return;\r\n      }\r\n\r\n      addAudioFile(file);\r\n      setError(null);\r\n    });\r\n  }, [announceToScreenReader, addAudioFile, addToast]);\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n  }, []);\r\n\r\n  const handleDrop = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    const files = e.dataTransfer.files;\r\n    if (files.length > 0) {\r\n      const mockEvent = { target: { files } } as React.ChangeEvent<HTMLInputElement>;\r\n      handleFileSelect(mockEvent);\r\n    }\r\n  }, [handleFileSelect]);\r\n\r\n  const toggleMode = useCallback(() => {\r\n    setIsMultiMode(prev => {\r\n      const newMode = !prev;\r\n      // Save to localStorage\r\n      setStoredProcessingMode(newMode);\r\n      // Clear files when switching modes\r\n      resetState();\r\n      return newMode;\r\n    });\r\n  }, [resetState]);\r\n\r\n  const handlePlayPause = useCallback(() => {\r\n    if (!audioRef.current) return;\r\n\r\n    if (isPlaying) {\r\n      audioRef.current.pause();\r\n      setIsPlaying(false);\r\n      announceToScreenReader('Audio paused');\r\n    } else {\r\n      audioRef.current.play();\r\n      setIsPlaying(true);\r\n      announceToScreenReader('Audio playing');\r\n    }\r\n  }, [isPlaying, announceToScreenReader]);\r\n\r\n  const handleTimeUpdate = useCallback(() => {\r\n    if (audioRef.current) {\r\n      setCurrentTime(audioRef.current.currentTime);\r\n    }\r\n  }, []);\r\n\r\n  const formatTime = useCallback((seconds: number): string => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  }, []);\r\n\r\n  const validateMetadata = useCallback(() => {\r\n    const errors: string[] = [];\r\n\r\n    // Age validation\r\n    if (userMetadata.age) {\r\n      const age = parseInt(userMetadata.age);\r\n      if (isNaN(age) || age < 18 || age > 130) {\r\n        errors.push('Age must be between 18 and 130');\r\n      }\r\n    }\r\n\r\n    // Gender validation\r\n    if (userMetadata.gender) {\r\n      const validGenders = ['male', 'female', 'non-binary', 'transgender female', 'transgender male', 'other', 'prefer'];\r\n      if (!validGenders.includes(userMetadata.gender)) {\r\n        errors.push('Invalid gender. Must be: male, female, non-binary, transgender female, transgender male, other, or prefer');\r\n      }\r\n    }\r\n\r\n    // Race validation\r\n    if (userMetadata.race) {\r\n      const validRaces = ['white', 'black or african-american', 'asian', 'american indian or alaskan native', 'native Hawaiian or pacific islander', 'two or more races', 'other', 'prefer not to say'];\r\n      if (!validRaces.includes(userMetadata.race)) {\r\n        errors.push('Invalid race. Must be: white, black or african-american, asian, american indian or alaskan native, native Hawaiian or pacific islander, two or more races, other, prefer not to say');\r\n      }\r\n    }\r\n\r\n    // Ethnicity validation\r\n    if (userMetadata.ethnicity) {\r\n      const validEthnicities = ['Hispanic, Latino, or Spanish Origin', 'Not Hispanic, Latino, or Spanish Origin'];\r\n      if (!validEthnicities.includes(userMetadata.ethnicity)) {\r\n        errors.push('Invalid ethnicity. Must be: Hispanic, Latino, or Spanish Origin | Not Hispanic, Latino, or Spanish Origin');\r\n      }\r\n    }\r\n\r\n    // Zipcode validation\r\n    if (userMetadata.zipcode) {\r\n      const zipcodeRegex = /^[a-zA-Z0-9]{1,10}$/;\r\n      if (!zipcodeRegex.test(userMetadata.zipcode)) {\r\n        errors.push('Zipcode must be alphanumeric and contain no more than 10 characters');\r\n      }\r\n    }\r\n\r\n    // Weight validation\r\n    if (userMetadata.weight) {\r\n      const weight = parseInt(userMetadata.weight);\r\n      if (isNaN(weight) || weight < 10 || weight > 1000) {\r\n        errors.push('Weight must be between 10 and 1000 pounds (lbs)');\r\n      }\r\n    }\r\n\r\n    return errors;\r\n  }, [userMetadata]);\r\n\r\n  const buildMetadata = useCallback(() => {\r\n    const metadata: Partial<SessionMetadata> = {};\r\n    let hasMetadata = false;\r\n\r\n    if (userMetadata.age) {\r\n      metadata.age = parseInt(userMetadata.age);\r\n      hasMetadata = true;\r\n    }\r\n    if (userMetadata.gender) {\r\n      metadata.gender = userMetadata.gender as SessionMetadata['gender'];\r\n      hasMetadata = true;\r\n    }\r\n    if (userMetadata.race) {\r\n      metadata.race = userMetadata.race as SessionMetadata['race'];\r\n      hasMetadata = true;\r\n    }\r\n    if (userMetadata.ethnicity) {\r\n      metadata.ethnicity = userMetadata.ethnicity as SessionMetadata['ethnicity'];\r\n      hasMetadata = true;\r\n    }\r\n    if (userMetadata.language === 'true' || userMetadata.language === 'false') {\r\n      metadata.language = userMetadata.language === 'true';\r\n      hasMetadata = true;\r\n    }\r\n    if (userMetadata.weight) {\r\n      metadata.weight = parseInt(userMetadata.weight);\r\n      hasMetadata = true;\r\n    }\r\n    if (userMetadata.zipcode) {\r\n      metadata.zipcode = userMetadata.zipcode;\r\n      hasMetadata = true;\r\n    }\r\n\r\n    return hasMetadata ? metadata : undefined;\r\n  }, [userMetadata]);\r\n\r\n  const processAndAnalyze = useCallback(async () => {\r\n    if (isMultiMode) {\r\n      if (audioFiles.length === 0 || !userId.trim()) {\r\n        setError('Please select audio files. User ID is automatically generated.');\r\n        addToast('error', 'Missing Information', 'Please select audio files. User ID is automatically generated.');\r\n        return;\r\n      }\r\n      await processMultipleFiles();\r\n    } else {\r\n      if (!audioFile || !userId.trim()) {\r\n        setError('Please select an audio file. User ID is automatically generated.');\r\n        addToast('error', 'Missing Information', 'Please select an audio file. User ID is automatically generated.');\r\n        return;\r\n      }\r\n      await processSingleFile();\r\n    }\r\n  }, [audioFile, audioFiles, userId, isMultiMode]);\r\n\r\n  const processSingleFileById = useCallback(async (fileId: string, audioFile: AudioFile) => {\r\n    try {\r\n      // Step 1: Initiate session\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'initiating', progress: 5, message: 'Initiating session...' }\r\n      }));\r\n\r\n      const metadata = buildMetadata();\r\n      const sessionRequest: any = {\r\n        userid: userId.trim(),\r\n        is_initiated: true\r\n      };\r\n\r\n      // Only include metadata if we have any\r\n      if (metadata) {\r\n        sessionRequest.metadata = metadata;\r\n      }\r\n\r\n      const sessionResponse = await apiService.initiateSession(sessionRequest);\r\n\r\n      const sessionData: SessionInfo = {\r\n        sessionId: sessionResponse.sessionId,\r\n        userId: userId.trim()\r\n      };\r\n\r\n      // Save initial session data to blob storage so it appears in Analysis Sessions UI\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'initiating', progress: 10, message: 'Saving session data...' }\r\n      }));\r\n\r\n      const initialSessionData = {\r\n        sessionId: sessionResponse.sessionId,\r\n        userId: userId.trim(),\r\n        userMetadata: metadata,\r\n        audioFileName: audioFile.file.name,\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        status: 'initiated'\r\n      };\r\n\r\n      try {\r\n        await apiService.saveSessionData(initialSessionData);\r\n      } catch (error) {\r\n        // Continue with the process even if saving fails\r\n        // Error is handled silently as this is not critical for the main workflow\r\n      }\r\n\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'converting', progress: 15, message: 'Converting audio to required format...' }\r\n      }));\r\n\r\n      // Step 2: Convert audio using FFmpeg\r\n      const convertedBlob = await convertAudioToWav(audioFile.file, (progressPercent: number) => {\r\n        setProcessingProgress(prev => ({\r\n          ...prev,\r\n          [fileId]: {\r\n            stage: 'converting',\r\n            progress: 15 + (progressPercent * 0.25), // 15-40% for conversion\r\n            message: `Converting audio... ${Math.round(progressPercent)}%`\r\n          }\r\n        }));\r\n      });\r\n\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'uploading', progress: 40, message: 'Uploading to Azure Blob Storage...' }\r\n      }));\r\n\r\n      // Step 3: Upload to Azure Blob Storage\r\n      const fileName = `${userId}_${sessionData.sessionId}_${Date.now()}.wav`;\r\n      const audioUrl = await uploadToAzureBlob(convertedBlob, fileName, (progressPercent: number) => {\r\n        setProcessingProgress(prev => ({\r\n          ...prev,\r\n          [fileId]: {\r\n            stage: 'uploading',\r\n            progress: 40 + (progressPercent * 0.25), // 40-65% for upload\r\n            message: `Uploading... ${Math.round(progressPercent)}%`\r\n          }\r\n        }));\r\n      });\r\n\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'submitting', progress: 65, message: 'Submitting for analysis...' }\r\n      }));\r\n\r\n      // Update session data with audio information\r\n      try {\r\n        const updatedSessionData = {\r\n          ...initialSessionData,\r\n          audioUrl: audioUrl,\r\n          audioFileName: fileName,\r\n          status: 'processing',\r\n          updatedAt: new Date().toISOString()\r\n        };\r\n        await apiService.updateSessionData(sessionData.sessionId, updatedSessionData);\r\n      } catch (error) {\r\n        console.warn('Failed to update session data with audio info:', error);\r\n        // Continue with the process even if updating fails\r\n      }\r\n\r\n      // Step 4: Submit prediction with URL to /predictions/submit endpoint\r\n      await apiService.submitPrediction({\r\n        userId: userId.trim(),\r\n        sessionid: sessionData.sessionId,\r\n        audioFileUrl: audioUrl,\r\n        audioFileName: fileName\r\n      });\r\n\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'analyzing', progress: 70, message: 'Analyzing audio with Kintsugi Health API...' }\r\n      }));\r\n\r\n      // Step 5: Poll for results\r\n      const poller = new PredictionPoller(sessionData.sessionId);\r\n      \r\n      await new Promise<void>((resolve, reject) => {\r\n        poller.start(\r\n          (result: PredictionResult) => {\r\n            // Update progress during polling\r\n            const progressPercent = result.status === 'processing' ? 80 : \r\n                                  result.status === 'success' ? 95 : 70;\r\n            setProcessingProgress(prev => ({\r\n              ...prev,\r\n              [fileId]: { \r\n                stage: 'analyzing', \r\n                progress: progressPercent, \r\n                message: `Analysis ${result.status}...` \r\n              }\r\n            }));\r\n\r\n            // Check for predict_error and show toast\r\n            if (result.predictError) {\r\n              addToast('error', 'Prediction Error', \r\n                `${result.predictError.error}: ${result.predictError.message}`);\r\n            }\r\n          },\r\n          (result: PredictionResult) => {\r\n            // Check for final errors before completing\r\n            if (result.predictError) {\r\n              addToast('error', 'Analysis Failed', \r\n                `The analysis completed with an error: ${result.predictError.error} - ${result.predictError.message}`);\r\n              setProcessingProgress(prev => ({\r\n                ...prev,\r\n                [fileId]: { stage: 'error', progress: 0, message: 'Analysis failed with errors' }\r\n              }));\r\n              reject(new Error(`Prediction error: ${result.predictError.error}`));\r\n              return;\r\n            }\r\n\r\n            // Analysis complete successfully\r\n            const analysisResult: AnalysisResult = {\r\n              sessionId: sessionData.sessionId,\r\n              depressionScore: result.predictedScoreDepression ? parseFloat(result.predictedScoreDepression) : 0,\r\n              riskLevel: result.predictedScoreDepression && parseFloat(result.predictedScoreDepression) > 0.7 ? 'high' :\r\n                        result.predictedScoreDepression && parseFloat(result.predictedScoreDepression) > 0.4 ? 'medium' : 'low',\r\n              confidence: 0.85, // This would come from the API in a real scenario\r\n              insights: [\r\n                'Analysis completed using Kintsugi Health API',\r\n                result.predictedScoreDepression ? `Depression score: ${result.predictedScoreDepression}` : '',\r\n                result.predictedScoreAnxiety ? `Anxiety score: ${result.predictedScoreAnxiety}` : '',\r\n                'Results should be reviewed by a qualified healthcare professional'\r\n              ].filter(insight => insight.trim() !== ''),\r\n              timestamp: result.updatedAt,\r\n              audioUrl: audioUrl,\r\n              rawApiResponse: result // Store the complete API response\r\n            };            \r\n            setProcessingProgress(prev => ({\r\n              ...prev,\r\n              [fileId]: { stage: 'complete', progress: 100, message: 'Analysis complete!' }\r\n            }));\r\n            setResults(prev => ({\r\n              ...prev,\r\n              [fileId]: analysisResult\r\n            }));\r\n            resolve();\r\n          },\r\n          (error: AppError) => {\r\n            reject(error);\r\n          }\r\n        );\r\n      });\r\n\r\n    } catch (err) {\r\n      console.error(`Error processing file ${fileId}:`, err);\r\n      \r\n      // Extract error details for enhanced error display\r\n      let errorCode = 'UNKNOWN_ERROR';\r\n      let errorMessage = 'An unexpected error occurred';\r\n      let errorDetails: Record<string, unknown> = {};\r\n\r\n      if (err && typeof err === 'object') {\r\n        // Handle AppError interface\r\n        if ('code' in err && typeof err.code === 'string') {\r\n          errorCode = err.code;\r\n        }\r\n        if ('message' in err && typeof err.message === 'string') {\r\n          errorMessage = err.message;\r\n        }\r\n        if ('details' in err && typeof err.details === 'object') {\r\n          errorDetails = err.details as Record<string, unknown>;\r\n        }\r\n      } else if (err instanceof Error) {\r\n        errorMessage = err.message;\r\n        errorCode = err.name || 'ERROR';\r\n      }\r\n\r\n      // Attempt to find and cleanup uploaded file if it exists\r\n      // The file name should follow the pattern we used: `${userId}_${sessionId}_${timestamp}.wav`\r\n      try {\r\n        // Try to extract session ID from error context or generate cleanup pattern\r\n        const currentProgress = processingProgress[fileId];\r\n        if (currentProgress && (currentProgress.stage === 'uploading' || \r\n                              currentProgress.stage === 'submitting' || \r\n                              currentProgress.stage === 'analyzing')) {\r\n          // File was likely uploaded, attempt cleanup with pattern matching\r\n          const fileName = `${userId}_*_*.wav`; // Pattern for potential cleanup\r\n          // Note: In a real implementation, you'd want to track the exact fileName\r\n          // For now, log the cleanup attempt\r\n          console.log(`Attempting cleanup for file pattern: ${fileName}`);\r\n        }\r\n      } catch (cleanupError) {\r\n        console.warn('Error during cleanup attempt:', cleanupError);\r\n      }\r\n\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { \r\n          stage: 'error', \r\n          progress: 0, \r\n          message: 'Processing failed',\r\n          error: {\r\n            code: errorCode,\r\n            message: errorMessage,\r\n            details: errorDetails\r\n          }\r\n        }\r\n      }));\r\n      throw err; // Re-throw to be handled by the calling function\r\n    }\r\n  }, [userId, buildMetadata, apiService, uploadToAzureBlob, convertAudioToWav, addToast]);\r\n\r\n  const processMultipleFiles = useCallback(async () => {\r\n    setIsProcessing(true);\r\n    setError(null);\r\n    \r\n    // Validate metadata once for all files\r\n    const validationErrors = validateMetadata();\r\n    if (validationErrors.length > 0) {\r\n      setError(`Validation error: ${validationErrors.join(', ')}`);\r\n      addToast('error', 'Validation Error', validationErrors.join(', '));\r\n      setIsProcessing(false);\r\n      return;\r\n    }\r\n\r\n    // Only process files that are in 'ready' state\r\n    const filesToProcess = audioFiles.filter(file => fileStates[file.id] === 'ready');\r\n    \r\n    if (filesToProcess.length === 0) {\r\n      addToast('info', 'No Files Ready', 'No files are ready to process');\r\n      setIsProcessing(false);\r\n      return;\r\n    }\r\n\r\n    const totalFiles = filesToProcess.length;\r\n    let completedFiles = 0;\r\n\r\n    try {\r\n      for (const audioFile of filesToProcess) {\r\n        completedFiles++;\r\n        addToast('info', 'Processing File', `Processing ${audioFile.file.name} (${completedFiles}/${totalFiles})`);\r\n        \r\n        // Set file state to processing\r\n        setFileStates(prev => ({ ...prev, [audioFile.id]: 'processing' }));\r\n        \r\n        try {\r\n          await processSingleFileById(audioFile.id, audioFile);\r\n          setFileStates(prev => ({ ...prev, [audioFile.id]: 'complete' }));\r\n          addToast('success', 'File Complete', `${audioFile.file.name} processed successfully`);\r\n        } catch (error) {\r\n          // Extract detailed error information\r\n          let errorCode = 'FILE_PROCESSING_ERROR';\r\n          let errorMessage = 'An unexpected error occurred';\r\n          let errorDetails: Record<string, unknown> = {};\r\n\r\n          if (error && typeof error === 'object') {\r\n            if ('code' in error && typeof error.code === 'string') {\r\n              errorCode = error.code;\r\n            }\r\n            if ('message' in error && typeof error.message === 'string') {\r\n              errorMessage = error.message;\r\n            }\r\n            if ('details' in error && typeof error.details === 'object') {\r\n              errorDetails = error.details as Record<string, unknown>;\r\n            }\r\n          } else if (error instanceof Error) {\r\n            errorMessage = error.message;\r\n            errorCode = error.name || 'ERROR';\r\n          }\r\n\r\n          addToast('error', 'File Failed', `Failed to process ${audioFile.file.name}: ${errorMessage}`);\r\n          \r\n          // Set error state for this file with detailed error information\r\n          setFileStates(prev => ({ ...prev, [audioFile.id]: 'error' }));\r\n          setProcessingProgress(prev => ({\r\n            ...prev,\r\n            [audioFile.id]: { \r\n              stage: 'error', \r\n              progress: 0, \r\n              message: `Failed: ${errorMessage}`,\r\n              error: {\r\n                code: errorCode,\r\n                message: errorMessage,\r\n                details: errorDetails\r\n              }\r\n            }\r\n          }));\r\n        }\r\n      }\r\n      \r\n      addToast('success', 'Batch Complete', `Processed ${completedFiles} file${completedFiles !== 1 ? 's' : ''}`);\r\n      announceToScreenReader(`Batch processing complete. ${completedFiles} files processed.`);\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'An unexpected error occurred';\r\n      setError(errorMessage);\r\n      addToast('error', 'Batch Failed', errorMessage);\r\n      announceToScreenReader(`Error: ${errorMessage}`);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  }, [audioFiles, fileStates, validateMetadata, addToast, announceToScreenReader, processSingleFileById]);\r\n\r\n  const startSingleFile = useCallback(async (fileId: string) => {\r\n    const audioFile = audioFiles.find(f => f.id === fileId);\r\n    if (!audioFile) return;\r\n\r\n    // Validate metadata\r\n    const validationErrors = validateMetadata();\r\n    if (validationErrors.length > 0) {\r\n      setError(`Validation error: ${validationErrors.join(', ')}`);\r\n      addToast('error', 'Validation Error', validationErrors.join(', '));\r\n      return;\r\n    }\r\n\r\n    setFileStates(prev => ({ ...prev, [fileId]: 'processing' }));\r\n    \r\n    try {\r\n      await processSingleFileById(fileId, audioFile);\r\n      setFileStates(prev => ({ ...prev, [fileId]: 'complete' }));\r\n      addToast('success', 'File Complete', `${audioFile.file.name} processed successfully`);\r\n    } catch (error) {\r\n      console.error(`Error processing ${audioFile.file.name}:`, error);\r\n      const errorMessage = error instanceof Error ? error.message : 'An unexpected error occurred';\r\n      addToast('error', 'File Failed', `Failed to process ${audioFile.file.name}: ${errorMessage}`);\r\n      setFileStates(prev => ({ ...prev, [fileId]: 'error' }));\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'error', progress: 0, message: `Failed: ${errorMessage}` }\r\n      }));\r\n    }\r\n  }, [audioFiles, validateMetadata, addToast, processSingleFileById]);\r\n\r\n  const processSingleFile = useCallback(async () => {\r\n    if (!audioFile || !userId.trim()) {\r\n      setError('Please select an audio file. User ID is automatically generated.');\r\n      addToast('error', 'Missing Information', 'Please select an audio file. User ID is automatically generated.');\r\n      return;\r\n    }\r\n\r\n    // Validate metadata\r\n    const validationErrors = validateMetadata();\r\n    if (validationErrors.length > 0) {\r\n      setError(`Validation error: ${validationErrors.join(', ')}`);\r\n      addToast('error', 'Validation Error', validationErrors.join(', '));\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      \r\n      // Step 1: Initiate session\r\n      setProgress({ stage: 'initiating', progress: 5, message: 'Initiating session...' });\r\n      announceToScreenReader('Starting analysis process - initiating session');\r\n\r\n      const metadata = buildMetadata();\r\n      const sessionRequest: any = {\r\n        userid: userId.trim(),\r\n        is_initiated: true\r\n      };\r\n\r\n      // Only include metadata if we have any\r\n      if (metadata) {\r\n        sessionRequest.metadata = metadata;\r\n      }\r\n\r\n      const sessionResponse = await apiService.initiateSession(sessionRequest);\r\n\r\n      const sessionData: SessionInfo = {\r\n        sessionId: sessionResponse.sessionId,\r\n        userId: userId.trim()\r\n      };\r\n\r\n      // Save initial session data to blob storage so it appears in Analysis Sessions UI\r\n      setProgress({ stage: 'initiating', progress: 10, message: 'Saving session data...' });\r\n\r\n      const initialSessionData = {\r\n        sessionId: sessionResponse.sessionId,\r\n        userId: userId.trim(),\r\n        userMetadata: metadata,\r\n        audioFileName: audioFile.file.name,\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        status: 'initiated'\r\n      };\r\n\r\n      try {\r\n        await apiService.saveSessionData(initialSessionData);\r\n      } catch (error) {\r\n        // Continue with the process even if saving fails\r\n        // Error is handled silently as this is not critical for the main workflow\r\n      }\r\n\r\n      setProgress({ stage: 'converting', progress: 15, message: 'Converting audio to required format...' });\r\n      announceToScreenReader('Session created successfully, now converting audio');\r\n\r\n      // Step 2: Convert audio using FFmpeg\r\n      const convertedBlob = await convertAudioToWav(audioFile.file, (progressPercent: number) => {\r\n        setProgress({\r\n          stage: 'converting',\r\n          progress: 15 + (progressPercent * 0.25), // 15-40% for conversion\r\n          message: `Converting audio... ${Math.round(progressPercent)}%`\r\n        });\r\n      });\r\n\r\n      setProgress({ stage: 'uploading', progress: 40, message: 'Uploading to Azure Blob Storage...' });\r\n      announceToScreenReader('Audio converted successfully, now uploading');\r\n\r\n      // Step 3: Upload to Azure Blob Storage\r\n      const fileName = `${userId}_${sessionData.sessionId}_${Date.now()}.wav`;\r\n      const audioUrl = await uploadToAzureBlob(convertedBlob, fileName, (progressPercent: number) => {\r\n        setProgress({\r\n          stage: 'uploading',\r\n          progress: 40 + (progressPercent * 0.25), // 40-65% for upload\r\n          message: `Uploading... ${Math.round(progressPercent)}%`\r\n        });\r\n      });\r\n\r\n      setProgress({ stage: 'submitting', progress: 65, message: 'Submitting for analysis...' });\r\n      announceToScreenReader('Upload complete, submitting for behavioral health analysis');\r\n\r\n      // Update session data with audio information\r\n      try {\r\n        const updatedSessionData = {\r\n          ...initialSessionData,\r\n          audioUrl: audioUrl,\r\n          audioFileName: fileName,\r\n          status: 'processing',\r\n          updatedAt: new Date().toISOString()\r\n        };\r\n        await apiService.updateSessionData(sessionData.sessionId, updatedSessionData);\r\n      } catch (error) {\r\n        console.warn('Failed to update session data with audio info:', error);\r\n        // Continue with the process even if updating fails\r\n      }\r\n\r\n      // Step 4: Submit prediction with URL to /predictions/submit endpoint\r\n      await apiService.submitPrediction({\r\n        userId: userId.trim(),\r\n        sessionid: sessionData.sessionId,\r\n        audioFileUrl: audioUrl,\r\n        audioFileName: fileName\r\n      });\r\n\r\n      setProgress({ stage: 'analyzing', progress: 70, message: 'Analyzing audio with Kintsugi Health API...' });\r\n      announceToScreenReader('Prediction submitted, analysis in progress');\r\n\r\n      // Step 5: Poll for results\r\n      const poller = new PredictionPoller(sessionData.sessionId);\r\n      \r\n      await new Promise<void>((resolve, reject) => {\r\n        poller.start(\r\n          (result: PredictionResult) => {\r\n            // Update progress during polling\r\n            const progressPercent = result.status === 'processing' ? 80 : \r\n                                  result.status === 'success' ? 95 : 70;\r\n            setProgress({ \r\n              stage: 'analyzing', \r\n              progress: progressPercent, \r\n              message: `Analysis ${result.status}...` \r\n            });\r\n\r\n            // Check for predict_error and show toast\r\n            if (result.predictError) {\r\n              addToast('error', 'Prediction Error', \r\n                `${result.predictError.error}: ${result.predictError.message}`);\r\n            }\r\n          },\r\n          (result: PredictionResult) => {\r\n            // Check for final errors before completing\r\n            if (result.predictError) {\r\n              addToast('error', 'Analysis Failed', \r\n                `The analysis completed with an error: ${result.predictError.error} - ${result.predictError.message}`);\r\n              setProgress({ stage: 'error', progress: 0, message: 'Analysis failed with errors' });\r\n              reject(new Error(`Prediction error: ${result.predictError.error}`));\r\n              return;\r\n            }\r\n\r\n            // Analysis complete successfully\r\n            const analysisResult: AnalysisResult = {\r\n              sessionId: sessionData.sessionId,\r\n              depressionScore: result.predictedScoreDepression ? parseFloat(result.predictedScoreDepression) : 0,\r\n              riskLevel: result.predictedScoreDepression && parseFloat(result.predictedScoreDepression) > 0.7 ? 'high' :\r\n                        result.predictedScoreDepression && parseFloat(result.predictedScoreDepression) > 0.4 ? 'medium' : 'low',\r\n              confidence: 0.85, // This would come from the API in a real scenario\r\n            insights: [\r\n              'Analysis completed using Kintsugi Health API',\r\n              result.predictedScoreDepression ? `Depression score: ${result.predictedScoreDepression}` : '',\r\n              result.predictedScoreAnxiety ? `Anxiety score: ${result.predictedScoreAnxiety}` : '',\r\n              'Results should be reviewed by a qualified healthcare professional'\r\n            ].filter(insight => insight.trim() !== ''),\r\n            timestamp: result.updatedAt,\r\n            audioUrl: audioUrl,\r\n            rawApiResponse: result // Store the complete API response\r\n          };            \r\n            setProgress({ stage: 'complete', progress: 100, message: 'Analysis complete!' });\r\n            setResult(analysisResult);\r\n            addToast('success', 'Analysis Complete', 'Your behavioral health analysis has been completed successfully.');\r\n            announceToScreenReader('Behavioral health analysis completed successfully');\r\n            resolve();\r\n          },\r\n          (error: AppError) => {\r\n            addToast('error', 'Analysis Error', error.message || 'An unexpected error occurred during analysis.');\r\n            reject(error);\r\n          }\r\n        );\r\n      });\r\n\r\n    } catch (err) {\r\n      console.error('Processing error:', err);\r\n      const errorMessage = err instanceof Error ? err.message : 'An unexpected error occurred';\r\n      setError(errorMessage);\r\n      setProgress({ stage: 'error', progress: 0, message: 'Processing failed' });\r\n      addToast('error', 'Processing Failed', errorMessage);\r\n      announceToScreenReader(`Error: ${errorMessage}`);\r\n    }\r\n  }, [audioFile, userId, announceToScreenReader, validateMetadata, buildMetadata]);\r\n\r\n  const getProgressColor = useCallback((stage: string) => {\r\n    switch (stage) {\r\n      case 'error': return 'processing-progress__fill--error';\r\n      case 'complete': return 'processing-progress__fill--success';\r\n      default: return ''; // Use default blue color from CSS\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-6 space-y-8\">\r\n      {/* Header with Dark Mode Toggle and Mode Switcher */}\r\n      <div className=\"text-center\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          {/* Mode Switcher */}\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Processing Mode:</span>\r\n              <div className=\"relative inline-flex items-center\">\r\n                <button type=\"button\"\r\n                  onClick={toggleMode}\r\n                  className={`relative inline-flex h-8 w-16 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 ${\r\n                    isMultiMode \r\n                      ? 'bg-blue-600 hover:bg-blue-700' \r\n                      : 'bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500'\r\n                  }`}\r\n                  aria-label={`Switch to ${isMultiMode ? 'single file' : 'multi-file'} mode`}\r\n                >\r\n                  <span\r\n                    className={`inline-flex h-6 w-6 transform rounded-full bg-white items-center justify-center transition-transform ${\r\n                      isMultiMode ? 'translate-x-9' : 'translate-x-1'\r\n                    }`}\r\n                  >\r\n                    {isMultiMode ? (\r\n                      <Files className=\"h-3 w-3 text-blue-600\" />\r\n                    ) : (\r\n                      <File className=\"h-3 w-3 text-gray-600\" />\r\n                    )}\r\n                  </span>\r\n                </button>\r\n                <div className=\"ml-3 flex items-center space-x-4\">\r\n                  <span className={`text-sm font-medium ${!isMultiMode ? 'text-gray-900 dark:text-white' : 'text-gray-500 dark:text-gray-400'}`}>\r\n                    Single\r\n                  </span>\r\n                  <span className={`text-sm font-medium ${isMultiMode ? 'text-gray-900 dark:text-white' : 'text-gray-500 dark:text-gray-400'}`}>\r\n                    Multi\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Status Badge */}\r\n            <div className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${\r\n              isMultiMode \r\n                ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200' \r\n                : 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\r\n            }`}>\r\n              {isMultiMode ? (\r\n                <>\r\n                  <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path fillRule=\"evenodd\" d=\"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                  Batch Processing\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                  Single File\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">\r\n          Upload & Analyze Audio\r\n        </h1>\r\n        <p className=\"text-gray-600 dark:text-gray-300 mb-4\">\r\n          Upload {isMultiMode ? 'multiple audio files' : 'an audio file'} for behavioral health analysis using AI-powered speech pattern recognition\r\n        </p>\r\n        \r\n        {/* Mode Description */}\r\n        <div className={`inline-flex items-center px-4 py-2 rounded-lg text-sm ${\r\n          isMultiMode \r\n            ? 'bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300' \r\n            : 'bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-300'\r\n        }`}>\r\n          {isMultiMode ? (\r\n            <>\r\n              <svg className=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path d=\"M9 12a1 1 0 000 2h2a1 1 0 100-2H9z\" />\r\n                <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 0v12h8V4H6z\" clipRule=\"evenodd\" />\r\n              </svg>\r\n              Process multiple files with individual controls and batch options\r\n            </>\r\n          ) : (\r\n            <>\r\n              <svg className=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fillRule=\"evenodd\" d=\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\r\n              </svg>\r\n              Upload and analyze one file at a time with detailed progress tracking\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* User Metadata Form */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n          Patient Information\r\n        </h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          <div className=\"md:col-span-2 lg:col-span-3 mb-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              User ID Management\r\n            </label>\r\n            <div className=\"bg-gray-100 dark:bg-gray-700 p-4 rounded-md border space-y-3\">\r\n              {/* Current User ID Display */}\r\n              <div>\r\n                <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Current User ID:</p>\r\n                <code className=\"text-sm font-mono text-gray-900 dark:text-gray-100 break-all block bg-white dark:bg-gray-800 p-2 rounded border\">\r\n                  {userId}\r\n                </code>\r\n              </div>\r\n              \r\n              {/* User ID Management Controls */}\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button type=\"button\"\r\n                    onClick={handleToggleUserIdMode}\r\n                    className=\"px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors\"\r\n                    aria-describedby=\"user-id-mode-help\"\r\n                  >\r\n                    {isCustomUserIdMode ? 'Switch to Auto-Generated' : 'Use Custom User ID'}\r\n                  </button>\r\n                  \r\n                  {!isCustomUserIdMode && (\r\n                    <button type=\"button\"\r\n                      onClick={handleGenerateNewUserId}\r\n                      className=\"px-3 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800 transition-colors\"\r\n                      title=\"Generate a new random User ID\"\r\n                    >\r\n                      Generate New ID\r\n                    </button>\r\n                  )}\r\n                </div>\r\n\r\n                {isCustomUserIdMode && (\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex gap-2\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={customUserId}\r\n                        onChange={(e) => handleCustomUserIdChange(e.target.value)}\r\n                        placeholder=\"Enter custom User ID (any unique string)\"\r\n                        className=\"flex-1 px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                        aria-describedby=\"custom-user-id-help\"\r\n                        aria-invalid={userIdError ? 'true' : 'false'}\r\n                      />\r\n                      <button type=\"button\"\r\n                        onClick={handleApplyCustomUserId}\r\n                        disabled={!customUserId.trim()}\r\n                        className=\"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors\"\r\n                      >\r\n                        Apply\r\n                      </button>\r\n                    </div>\r\n                    \r\n                    {userIdError && (\r\n                      <p className=\"text-sm text-red-600 dark:text-red-400\" role=\"alert\">\r\n                        {userIdError}\r\n                      </p>\r\n                    )}\r\n                    \r\n                    <p id=\"custom-user-id-help\" className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                      Any unique string (3-100 characters). Examples: \"patient-001\", \"john.doe@clinic\", \"study-participant-42\"\r\n                    </p>\r\n                  </div>\r\n                )}\r\n                \r\n                <p id=\"user-id-mode-help\" className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                  {isCustomUserIdMode \r\n                    ? 'Custom mode: Use any unique identifier for tracking (e.g., patient ID, username, study code)' \r\n                    : 'Auto mode: System generates unique UUIDs automatically'\r\n                  }\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"age\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Age (Optional)\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"age\"\r\n              value={userMetadata.age}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, age: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n              placeholder=\"Age in years\"\r\n              min=\"1\"\r\n              max=\"150\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"weight\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Weight (Optional)\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"weight\"\r\n              value={userMetadata.weight}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, weight: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n              placeholder=\"Weight in lbs\"\r\n              min=\"1\"\r\n              max=\"1000\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"gender\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Gender (Optional)\r\n            </label>\r\n            <select\r\n              id=\"gender\"\r\n              value={userMetadata.gender}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, gender: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            >\r\n              <option value=\"\">Select gender</option>\r\n              <option value=\"male\">Male</option>\r\n              <option value=\"female\">Female</option>\r\n              <option value=\"non-binary\">Non-binary</option>\r\n              <option value=\"transgender female\">Transgender female</option>\r\n              <option value=\"transgender male\">Transgender male</option>\r\n              <option value=\"other\">Other</option>\r\n              <option value=\"prefer\">Prefer</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"race\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Race (Optional)\r\n            </label>\r\n            <select\r\n              id=\"race\"\r\n              value={userMetadata.race}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, race: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            >\r\n              <option value=\"\">Select race</option>\r\n              <option value=\"white\">White</option>\r\n              <option value=\"black or african-american\">Black or African-American</option>\r\n              <option value=\"asian\">Asian</option>\r\n              <option value=\"american indian or alaskan native\">American Indian or Alaskan Native</option>\r\n              <option value=\"native Hawaiian or pacific islander\">Native Hawaiian or Pacific Islander</option>\r\n              <option value=\"two or more races\">Two or more races</option>\r\n              <option value=\"other\">Other</option>\r\n              <option value=\"prefer not to say\">Prefer not to say</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"ethnicity\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Ethnicity (Optional)\r\n            </label>\r\n            <select\r\n              id=\"ethnicity\"\r\n              value={userMetadata.ethnicity}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, ethnicity: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            >\r\n              <option value=\"\">Select ethnicity</option>\r\n              <option value=\"Hispanic, Latino, or Spanish Origin\">Hispanic, Latino, or Spanish Origin</option>\r\n              <option value=\"Not Hispanic, Latino, or Spanish Origin\">Not Hispanic, Latino, or Spanish Origin</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"language\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Primary Language (Optional)\r\n            </label>\r\n            <select\r\n              id=\"language\"\r\n              value={userMetadata.language}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, language: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            >\r\n              <option value=\"\">Select language</option>\r\n              <option value=\"true\">English</option>\r\n              <option value=\"false\">Other</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"zipcode\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              ZIP Code (Optional)\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"zipcode\"\r\n              value={userMetadata.zipcode}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, zipcode: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n              placeholder=\"Enter ZIP code\"\r\n              pattern=\"[0-9]{5}(-[0-9]{4})?\"\r\n              title=\"Enter a valid ZIP code (e.g., 12345 or 12345-6789)\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"md:col-span-2 lg:col-span-3\">\r\n            <label htmlFor=\"sessionNotes\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Session Notes (Optional)\r\n            </label>\r\n            <textarea\r\n              id=\"sessionNotes\"\r\n              value={userMetadata.sessionNotes}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, sessionNotes: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n              rows={3}\r\n              placeholder=\"Additional notes about this session or patient context\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* File Upload Area */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n          Audio File Upload {isMultiMode && <span className=\"text-sm font-normal text-gray-500 dark:text-gray-400\">(Multi-File Mode)</span>}\r\n        </h2>\r\n        \r\n        {(!isMultiMode && !audioFile) || (isMultiMode && audioFiles.length === 0) ? (\r\n          <div\r\n            className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors\"\r\n            onDragOver={handleDragOver}\r\n            onDrop={handleDrop}\r\n          >\r\n            <Upload className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" aria-hidden=\"true\" />\r\n            <div className=\"mb-4\">\r\n              <button type=\"button\"\r\n                onClick={() => fileInputRef.current?.click()}\r\n                className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800\"\r\n              >\r\n                <Plus className=\"h-4 w-4 mr-2\" />\r\n                Select Audio File{isMultiMode ? 's' : ''}\r\n              </button>\r\n              <p className=\"mt-2 text-sm text-gray-600 dark:text-gray-400\">\r\n                or drag and drop {isMultiMode ? 'files' : 'file'} here\r\n              </p>\r\n            </div>\r\n            <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n              Supported formats: WAV, MP3, M4A, AAC, FLAC (max 50MB each)\r\n              {isMultiMode && <br />}\r\n              {isMultiMode && 'You can select multiple files at once'}\r\n            </p>\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              className=\"hidden\"\r\n              accept=\".wav,.mp3,.m4a,.aac,.flac,audio/*\"\r\n              onChange={handleFileSelect}\r\n              multiple={isMultiMode}\r\n              aria-label={`Select audio file${isMultiMode ? 's' : ''} for analysis`}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {/* Single File Display */}\r\n            {!isMultiMode && audioFile && (\r\n              <div className=\"border border-gray-200 dark:border-gray-600 rounded-lg p-4\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <Volume2 className=\"h-5 w-5 text-blue-500\" aria-hidden=\"true\" />\r\n                    <div>\r\n                      <p className=\"font-medium text-gray-900 dark:text-white\">\r\n                        {audioFile.file.name}\r\n                      </p>\r\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        {(audioFile.file.size / 1024 / 1024).toFixed(2)} MB\r\n                        {audioFile.duration && ` ‚Ä¢ ${formatTime(audioFile.duration)}`}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <button type=\"button\"\r\n                    onClick={resetState}\r\n                    className=\"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\r\n                    aria-label=\"Remove selected file\"\r\n                  >\r\n                    <X className=\"h-5 w-5\" />\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Audio Player */}\r\n                <div className=\"space-y-3\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <button type=\"button\"\r\n                      onClick={handlePlayPause}\r\n                      className=\"flex items-center justify-center w-10 h-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800\"\r\n                      aria-label={isPlaying ? 'Pause audio' : 'Play audio'}\r\n                    >\r\n                      {isPlaying ? (\r\n                        <Pause className=\"h-5 w-5\" aria-hidden=\"true\" />\r\n                      ) : (\r\n                        <Play className=\"h-5 w-5 ml-0.5\" aria-hidden=\"true\" />\r\n                      )}\r\n                    </button>\r\n                    <div className=\"flex-1\">\r\n                      {audioFile.duration && (\r\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          {formatTime(currentTime)} / {formatTime(audioFile.duration)}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {audioFile.duration && (\r\n                    <div className=\"audio-progress\">\r\n                      <div\r\n                        className=\"audio-progress__fill progress-animated\"\r\n                        style={{ width: `${(currentTime / audioFile.duration) * 100}%` }}\r\n                        role=\"progressbar\"\r\n                        aria-label=\"Audio playback progress\"\r\n                        aria-valuenow={currentTime}\r\n                        aria-valuemin={0}\r\n                        aria-valuemax={audioFile.duration}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <audio\r\n                  ref={audioRef}\r\n                  src={audioFile.url}\r\n                  onTimeUpdate={handleTimeUpdate}\r\n                  onEnded={() => setIsPlaying(false)}\r\n                  onPlay={() => setIsPlaying(true)}\r\n                  onPause={() => setIsPlaying(false)}\r\n                  className=\"hidden\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Multi-File Display */}\r\n            {isMultiMode && audioFiles.length > 0 && (\r\n              <>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\r\n                    Selected Files ({audioFiles.length})\r\n                  </h3>\r\n                  <button type=\"button\"\r\n                    onClick={() => fileInputRef.current?.click()}\r\n                    className=\"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800\"\r\n                  >\r\n                    <Plus className=\"h-4 w-4 mr-2\" />\r\n                    Add More Files\r\n                  </button>\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  {audioFiles.map((file) => {\r\n                    const fileState = fileStates[file.id] || 'ready';\r\n                    const progress = processingProgress[file.id];\r\n                    \r\n                    return (\r\n                      <div key={file.id} className=\"border border-gray-200 dark:border-gray-600 rounded-lg p-4\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <div className=\"flex items-center space-x-2 flex-1 min-w-0\">\r\n                            <Volume2 className=\"h-4 w-4 text-blue-500 flex-shrink-0\" aria-hidden=\"true\" />\r\n                            <div className=\"min-w-0 flex-1\">\r\n                              <p className=\"font-medium text-gray-900 dark:text-white truncate\">\r\n                                {file.file.name}\r\n                              </p>\r\n                              <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                {(file.file.size / 1024 / 1024).toFixed(2)} MB\r\n                                {file.duration && ` ‚Ä¢ ${formatTime(file.duration)}`}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            {/* Start button for individual file */}\r\n                            {fileState === 'ready' && (\r\n                              <button type=\"button\"\r\n                                onClick={() => startSingleFile(file.id)}\r\n                                className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-800\"\r\n                                aria-label={`Start processing ${file.file.name}`}\r\n                              >\r\n                                <Play className=\"h-3 w-3 mr-1\" />\r\n                                Start\r\n                              </button>\r\n                            )}\r\n                            {fileState === 'processing' && (\r\n                              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200\">\r\n                                Processing...\r\n                              </span>\r\n                            )}\r\n                            {fileState === 'complete' && (\r\n                              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\">\r\n                                <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n                                Complete\r\n                              </span>\r\n                            )}\r\n                            {fileState === 'error' && (\r\n                              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200\">\r\n                                <X className=\"h-3 w-3 mr-1\" />\r\n                                Error\r\n                              </span>\r\n                            )}\r\n                            <button type=\"button\"\r\n                              onClick={() => removeAudioFile(file.id)}\r\n                              className=\"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400\"\r\n                              aria-label={`Remove ${file.file.name}`}\r\n                            >\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        {/* Processing status for this file */}\r\n                        {progress && (\r\n                          <div className=\"mt-2\">\r\n                            <div className=\"flex items-center justify-between text-xs\">\r\n                              <span className=\"text-gray-600 dark:text-gray-400\">\r\n                                {progress.message}\r\n                              </span>\r\n                              <span className=\"font-medium text-gray-900 dark:text-white\">\r\n                                {Math.round(progress.progress)}%\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"processing-progress mt-1\">\r\n                              <div\r\n                                className={`processing-progress__fill progress-animated ${getProgressColor(progress.stage)}`}\r\n                                style={{ width: `${progress.progress}%` }}\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  className=\"hidden\"\r\n                  accept=\".wav,.mp3,.m4a,.aac,.flac,audio/*\"\r\n                  onChange={handleFileSelect}\r\n                  multiple={isMultiMode}\r\n                  aria-label=\"Select additional audio files for analysis\"\r\n                />\r\n              </>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Error Display */}\r\n      {error && (\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4\" role=\"alert\">\r\n          <div className=\"flex items-center\">\r\n            <AlertCircle className=\"h-5 w-5 text-red-500 mr-2\" aria-hidden=\"true\" />\r\n            <span className=\"text-red-700 dark:text-red-300\">{error}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Progress Display - Only show in single-file mode */}\r\n      {!isMultiMode && progress.stage !== 'idle' && !result && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n            Processing Status\r\n          </h3>\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                {progress.message}\r\n              </span>\r\n              <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                {Math.round(progress.progress)}%\r\n              </span>\r\n            </div>\r\n            <div className=\"processing-progress\">\r\n              <div\r\n                className={`processing-progress__fill progress-animated ${getProgressColor(progress.stage)}`}\r\n                style={{ width: `${progress.progress}%` }}\r\n                role=\"progressbar\"\r\n                aria-label=\"Processing progress\"\r\n                aria-valuenow={progress.progress}\r\n                aria-valuemin={0}\r\n                aria-valuemax={100}\r\n              />\r\n            </div>\r\n            {progress.stage === 'analyzing' && (\r\n              <div className=\"flex items-center text-sm text-gray-600 dark:text-gray-400\">\r\n                <Loader2 className=\"h-4 w-4 animate-spin mr-2\" aria-hidden=\"true\" />\r\n                This may take a few minutes...\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Analysis Results */}\r\n      {result && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\r\n          <div className=\"flex items-center mb-4\">\r\n            <CheckCircle className=\"h-6 w-6 text-green-500 mr-2\" aria-hidden=\"true\" />\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n              Analysis Results\r\n            </h3>\r\n          </div>\r\n          \r\n          {/* Raw API Response */}\r\n          {result.rawApiResponse && (\r\n            <div className=\"mb-6\">\r\n              <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">API Response Details</h4>\r\n              <div className=\"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border\">\r\n                <div className=\"space-y-3\">\r\n                  {/* Predicted Scores */}\r\n                  <div>\r\n                    <h5 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Predicted Scores</h5>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Depression:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white\">{result.rawApiResponse.predicted_score_depression || 'N/A'}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Anxiety:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white\">{result.rawApiResponse.predicted_score_anxiety || 'N/A'}</span>\r\n                      </div>\r\n                      {/* Note: Overall predicted_score is deprecated and no longer displayed */}\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Status:</span>\r\n                        <span className={`font-mono ${result.rawApiResponse.status === 'success' ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\r\n                          {result.rawApiResponse.status || 'N/A'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Model Information */}\r\n                  <div>\r\n                    <h5 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Model Information</h5>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Category:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white\">{result.rawApiResponse.model_category || 'N/A'}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Granularity:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white\">{result.rawApiResponse.model_granularity || 'N/A'}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Calibrated:</span>\r\n                        <span className={`font-mono ${result.rawApiResponse.is_calibrated ? 'text-green-600 dark:text-green-400' : 'text-yellow-600 dark:text-yellow-400'}`}>\r\n                          {result.rawApiResponse.is_calibrated ? 'Yes' : 'No'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Actual Scores (if available) */}\r\n                  {result.rawApiResponse.actual_score && (\r\n                    <div>\r\n                      <h5 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Clinical Assessment Scores</h5>\r\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                        {result.rawApiResponse.actual_score.depression_binary !== undefined && (\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">Depression Binary:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                              {result.rawApiResponse.actual_score.depression_binary || 'N/A'}\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                        {result.rawApiResponse.actual_score.anxiety_binary !== undefined && (\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">Anxiety Binary:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                              {result.rawApiResponse.actual_score.anxiety_binary || 'N/A'}\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                        {result.rawApiResponse.actual_score.phq_9 && result.rawApiResponse.actual_score.phq_9.length > 0 && (\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">PHQ-9:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                              [{result.rawApiResponse.actual_score.phq_9.join(', ')}]\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                        {result.rawApiResponse.actual_score.phq_2 && result.rawApiResponse.actual_score.phq_2.length > 0 && (\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">PHQ-2:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                              [{result.rawApiResponse.actual_score.phq_2.join(', ')}]\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                        {result.rawApiResponse.actual_score.gad_7 && result.rawApiResponse.actual_score.gad_7.length > 0 && (\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">GAD-7:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                              [{result.rawApiResponse.actual_score.gad_7.join(', ')}]\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Timestamps */}\r\n                  <div>\r\n                    <h5 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Timeline</h5>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Created:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white text-xs\">\r\n                          {result.rawApiResponse.created_at ? new Date(result.rawApiResponse.created_at).toLocaleString() : 'N/A'}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Updated:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white text-xs\">\r\n                          {result.rawApiResponse.updated_at ? new Date(result.rawApiResponse.updated_at).toLocaleString() : 'N/A'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Session Information */}\r\n                  <div>\r\n                    <h5 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Session Information</h5>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Session ID:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white text-xs\">\r\n                          {result.sessionId}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Error Information (if present) */}\r\n                  {result.rawApiResponse.predict_error && (\r\n                    <div className=\"border-l-4 border-red-400 bg-red-50 dark:bg-red-900/20 p-3\">\r\n                      <h5 className=\"text-sm font-medium text-red-700 dark:text-red-300 mb-1\">Prediction Error</h5>\r\n                      <div className=\"text-sm space-y-1\">\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-red-600 dark:text-red-400\">Error Type:</span>\r\n                          <span className=\"font-mono text-red-900 dark:text-red-100\">{result.rawApiResponse.predict_error.error}</span>\r\n                        </div>\r\n                        <div className=\"text-red-700 dark:text-red-300\">\r\n                          <span className=\"font-medium\">Message:</span> {result.rawApiResponse.predict_error.message}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Raw JSON Toggle */}\r\n                  <details className=\"mt-4\">\r\n                    <summary className=\"cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white\">\r\n                      View Raw JSON Response\r\n                    </summary>\r\n                    <div className=\"mt-2 bg-gray-100 dark:bg-gray-800 rounded p-3 overflow-auto\">\r\n                      <pre className=\"text-xs text-gray-800 dark:text-gray-200 whitespace-pre-wrap\">\r\n                        {JSON.stringify(result.rawApiResponse, null, 2)}\r\n                      </pre>\r\n                    </div>\r\n                  </details>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {result.insights && result.insights.length > 0 && (\r\n            <div className=\"mt-6\">\r\n              <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">Clinical Insights</h4>\r\n              <ul className=\"space-y-1\">\r\n                {result.insights.map((insight, index) => (\r\n                  <li key={index} className=\"text-gray-600 dark:text-gray-400 text-sm\">\r\n                    ‚Ä¢ {insight}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mt-6 flex space-x-3\">\r\n            <button type=\"button\"\r\n              onClick={resetState}\r\n              className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800\"\r\n            >\r\n              Analyze Another File\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Analyze Button */}\r\n      {((isMultiMode && audioFiles.length > 0) || (!isMultiMode && audioFile)) && \r\n       !result && Object.keys(results).length === 0 && \r\n       progress.stage === 'idle' && !isProcessing && (\r\n        <div className=\"text-center\">\r\n          {isMultiMode ? (\r\n            // Multi-file mode controls\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\r\n                <button type=\"button\"\r\n                  onClick={processMultipleFiles}\r\n                  disabled={audioFiles.length === 0 || !userId.trim() || \r\n                           !audioFiles.some(file => fileStates[file.id] === 'ready')}\r\n                  className=\"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed dark:focus:ring-offset-gray-800\"\r\n                >\r\n                  <Play className=\"h-5 w-5 mr-2\" aria-hidden=\"true\" />\r\n                  Start All Ready Files\r\n                  {audioFiles.filter(file => fileStates[file.id] === 'ready').length > 0 && \r\n                   ` (${audioFiles.filter(file => fileStates[file.id] === 'ready').length})`}\r\n                </button>\r\n              </div>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                Use individual \"Start\" buttons on each file for selective processing, or \"Start All\" to process all ready files sequentially\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            // Single-file mode controls\r\n            <div>\r\n              <button type=\"button\"\r\n                onClick={processAndAnalyze}\r\n                disabled={!audioFile || !userId.trim()}\r\n                className=\"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed dark:focus:ring-offset-gray-800\"\r\n              >\r\n                <Play className=\"h-5 w-5 mr-2\" aria-hidden=\"true\" />\r\n                Start Analysis\r\n              </button>\r\n              <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\r\n                This will convert, upload, and analyze your audio file\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Multi-File Results */}\r\n      {isMultiMode && Object.keys(results).length > 0 && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\r\n          <div className=\"flex items-center mb-4\">\r\n            <CheckCircle className=\"h-6 w-6 text-green-500 mr-2\" aria-hidden=\"true\" />\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n              Batch Analysis Results ({Object.keys(results).length} files)\r\n            </h3>\r\n          </div>\r\n\r\n          <div className=\"space-y-6\">\r\n            {Object.entries(results).map(([fileId, result]) => {\r\n              const audioFile = audioFiles.find(f => f.id === fileId);\r\n              const progress = processingProgress[fileId];\r\n              \r\n              return (\r\n                <div key={fileId} className=\"border dark:border-gray-700 rounded-lg p-4\">\r\n                  <div className=\"flex items-center justify-between mb-3\">\r\n                    <h4 className=\"font-medium text-gray-900 dark:text-white\">\r\n                      {audioFile?.file.name || `File ${fileId}`}\r\n                    </h4>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      {progress?.stage === 'complete' && (\r\n                        <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\">\r\n                          <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n                          Complete\r\n                        </span>\r\n                      )}\r\n                      {progress?.stage === 'error' && (\r\n                        <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200\">\r\n                          <X className=\"h-3 w-3 mr-1\" />\r\n                          Error\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Error Details Section */}\r\n                  {progress?.stage === 'error' && progress?.error && (\r\n                    <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mt-3\">\r\n                      <div className=\"flex items-start\">\r\n                        <AlertCircle className=\"h-5 w-5 text-red-500 mr-3 mt-0.5 flex-shrink-0\" aria-hidden=\"true\" />\r\n                        <div className=\"flex-1\">\r\n                          <h4 className=\"text-sm font-medium text-red-800 dark:text-red-200 mb-2\">\r\n                            Error Details\r\n                          </h4>\r\n                          <div className=\"space-y-2\">\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-red-600 dark:text-red-400 font-medium\">Error Code:</span>\r\n                                <span className=\"font-mono text-red-900 dark:text-red-100\">{progress.error.code}</span>\r\n                              </div>\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-red-600 dark:text-red-400 font-medium\">Error Message:</span>\r\n                                <span className=\"font-mono text-red-900 dark:text-red-100 text-right\">{progress.error.message}</span>\r\n                              </div>\r\n                            </div>\r\n                            {progress.error.details && Object.keys(progress.error.details).length > 0 && (\r\n                              <details className=\"mt-3\">\r\n                                <summary className=\"cursor-pointer text-sm font-medium text-red-700 dark:text-red-300 hover:text-red-900 dark:hover:text-red-100\">\r\n                                  View Additional Error Details\r\n                                </summary>\r\n                                <div className=\"mt-2 bg-red-100 dark:bg-red-900/40 rounded p-3 overflow-auto max-h-32\">\r\n                                  <pre className=\"text-xs text-red-800 dark:text-red-200 whitespace-pre-wrap\">\r\n                                    {JSON.stringify(progress.error.details, null, 2)}\r\n                                  </pre>\r\n                                </div>\r\n                              </details>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* API Response Summary for this file */}\r\n                  {result.rawApiResponse && (\r\n                    <div className=\"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 border\">\r\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                        {/* Note: Overall predicted_score is deprecated */}\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-gray-600 dark:text-gray-400\">Depression:</span>\r\n                          <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                            {result.rawApiResponse.predicted_score_depression || 'N/A'}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-gray-600 dark:text-gray-400\">Anxiety:</span>\r\n                          <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                            {result.rawApiResponse.predicted_score_anxiety || 'N/A'}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      {/* Session Info */}\r\n                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">Session ID:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">{result.sessionId}</span>\r\n                          </div>\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">Status:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                              {result.rawApiResponse.status || 'N/A'}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Raw JSON Toggle for this file */}\r\n                      <details className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\r\n                        <summary className=\"cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white\">\r\n                          View Raw JSON Response\r\n                        </summary>\r\n                        <div className=\"mt-2 bg-gray-100 dark:bg-gray-800 rounded p-3 overflow-auto max-h-64\">\r\n                          <pre className=\"text-xs text-gray-800 dark:text-gray-200 whitespace-pre-wrap\">\r\n                            {JSON.stringify(result.rawApiResponse, null, 2)}\r\n                          </pre>\r\n                        </div>\r\n                      </details>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Audio Player for this file */}\r\n                  {audioFile && (\r\n                    <div className=\"mt-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <button type=\"button\"\r\n                          onClick={() => {\r\n                            const audio = document.getElementById(`audio-${fileId}`) as HTMLAudioElement;\r\n                            if (audio.paused) {\r\n                              // Pause all other audio elements first\r\n                              document.querySelectorAll('audio').forEach(a => a.pause());\r\n                              setPlayingFileId(fileId);\r\n                              audio.play();\r\n                            } else {\r\n                              audio.pause();\r\n                              setPlayingFileId(null);\r\n                            }\r\n                          }}\r\n                          className=\"p-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900\"\r\n                          aria-label={playingFileId === fileId ? 'Pause audio' : 'Play audio'}\r\n                        >\r\n                          {playingFileId === fileId ? (\r\n                            <Pause className=\"h-4 w-4\" />\r\n                          ) : (\r\n                            <Play className=\"h-4 w-4\" />\r\n                          )}\r\n                        </button>\r\n                        <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                          {audioFile.file.name} ‚Ä¢ {audioFile.duration ? `${Math.round(audioFile.duration)}s` : 'Duration unknown'}\r\n                        </span>\r\n                      </div>\r\n                      <audio\r\n                        id={`audio-${fileId}`}\r\n                        src={audioFile.url}\r\n                        onEnded={() => setPlayingFileId(null)}\r\n                        className=\"hidden\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Toast Notifications */}\r\n      {toasts.length > 0 && (\r\n        <div className=\"fixed top-4 right-4 z-50 space-y-2\">\r\n          {toasts.map((toast) => (\r\n            <div\r\n              key={toast.id}\r\n              className={`max-w-sm w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg border-l-4 p-4 transition-all duration-300 transform ${\r\n                toast.type === 'error' ? 'border-red-500' :\r\n                toast.type === 'warning' ? 'border-yellow-500' :\r\n                toast.type === 'success' ? 'border-green-500' : 'border-blue-500'\r\n              }`}\r\n              role=\"alert\"\r\n            >\r\n              <div className=\"flex items-start\">\r\n                <div className=\"flex-shrink-0\">\r\n                  {toast.type === 'error' && (\r\n                    <AlertCircle className=\"h-5 w-5 text-red-500\" aria-hidden=\"true\" />\r\n                  )}\r\n                  {toast.type === 'warning' && (\r\n                    <AlertCircle className=\"h-5 w-5 text-yellow-500\" aria-hidden=\"true\" />\r\n                  )}\r\n                  {toast.type === 'success' && (\r\n                    <CheckCircle className=\"h-5 w-5 text-green-500\" aria-hidden=\"true\" />\r\n                  )}\r\n                  {toast.type === 'info' && (\r\n                    <AlertCircle className=\"h-5 w-5 text-blue-500\" aria-hidden=\"true\" />\r\n                  )}\r\n                </div>\r\n                <div className=\"ml-3 flex-1\">\r\n                  <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                    {toast.title}\r\n                  </p>\r\n                  <p className=\"mt-1 text-sm text-gray-600 dark:text-gray-400\">\r\n                    {toast.message}\r\n                  </p>\r\n                </div>\r\n                <div className=\"ml-4 flex-shrink-0\">\r\n                  <button type=\"button\"\r\n                    onClick={() => removeToast(toast.id)}\r\n                    className=\"inline-flex text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    aria-label=\"Close notification\"\r\n                  >\r\n                    <X className=\"h-4 w-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadAnalyze;\r\n","import React, { useState, useCallback, useMemo, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Search, Filter, ChevronDown, ChevronUp, Eye, Download, Trash2, RefreshCw, AlertCircle, CheckCircle, Clock, XCircle } from 'lucide-react';\r\nimport { useAccessibility } from '../hooks/useAccessibility';\r\nimport { apiService } from '../services/api';\r\nimport { getUserId, formatRelativeTime, formatDateTime } from '../utils';\r\nimport type { SessionData, AppError } from '../types';\r\n\r\n// Session interface for UI with additional computed fields\r\ninterface SessionWithUI extends SessionData {\r\n  fileName?: string;\r\n  fileSize?: number;\r\n  uploadedAt: string;\r\n  riskLevel?: string;\r\n  depressionScore?: string;\r\n  anxietyScore?: string;\r\n}\r\n\r\n// Filter and sort types\r\ninterface SessionFilters {\r\n  search: string;\r\n  status: string | 'all';\r\n  dateRange: 'all' | 'today' | 'week' | 'month' | 'year';\r\n  sortBy: 'date' | 'status' | 'depressionScore' | 'anxietyScore';\r\n  sortOrder: 'asc' | 'desc';\r\n}\r\n\r\n// Status color mapping for accessibility\r\nconst statusConfig = {\r\n  queued: { color: 'yellow', icon: Clock, label: 'Queued' },\r\n  running: { color: 'blue', icon: RefreshCw, label: 'Processing' },\r\n  processing: { color: 'blue', icon: RefreshCw, label: 'Processing' },\r\n  succeeded: { color: 'green', icon: CheckCircle, label: 'Completed' },\r\n  success: { color: 'green', icon: CheckCircle, label: 'Completed' },\r\n  failed: { color: 'red', icon: XCircle, label: 'Failed' },\r\n  error: { color: 'red', icon: XCircle, label: 'Error' },\r\n} as const;\r\n\r\n// Utility function to format score categories\r\nconst formatScoreCategory = (category?: string): string => {\r\n  if (!category) return '‚Äî';\r\n  return category\r\n    .replace(/_/g, ' ')\r\n    .replace(/\\b\\w/g, (l: string) => l.toUpperCase());\r\n};\r\n\r\n// Utility function to get severity level for sorting\r\nconst getSeverityLevel = (category?: string): number => {\r\n  if (!category) return 0;\r\n  switch (category.toLowerCase()) {\r\n    // Depression categories: no_to_mild, mild_to_moderate, moderate_to_severe\r\n    case 'no_to_mild':\r\n      return 1;\r\n    case 'mild_to_moderate':\r\n      return 2;\r\n    case 'moderate_to_severe':\r\n      return 3;\r\n    // Anxiety categories: no_or_minimal, moderate, moderately_severe, severe\r\n    case 'no_or_minimal':\r\n      return 1;\r\n    case 'moderate':\r\n      return 2;\r\n    case 'moderately_severe':\r\n      return 3;\r\n    case 'severe':\r\n      return 4;\r\n    default:\r\n      return 0;\r\n  }\r\n};\r\n\r\nconst Sessions: React.FC = () => {\r\n  const [sessions, setSessions] = useState<SessionWithUI[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<AppError | null>(null);\r\n  const [selectedSessions, setSelectedSessions] = useState<Set<string>>(new Set());\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [filters, setFilters] = useState<SessionFilters>({\r\n    search: '',\r\n    status: 'all',\r\n    dateRange: 'all',\r\n    sortBy: 'date',\r\n    sortOrder: 'desc',\r\n  });\r\n\r\n  const { announceToScreenReader } = useAccessibility();\r\n\r\n  // Load sessions from API\r\n  const loadSessions = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const userId = getUserId();\r\n      const response = await apiService.getUserSessions(userId);\r\n      \r\n      // Transform session data to include computed UI fields\r\n      const transformedSessions: SessionWithUI[] = response.sessions.map(session => {\r\n        // Handle both camelCase and snake_case property names from API\r\n        const prediction = session.prediction as any;\r\n        \r\n        return {\r\n          ...session,\r\n          uploadedAt: session.createdAt,\r\n          fileName: session.audioFileName || `Audio_${session.sessionId.slice(-8)}.wav`,\r\n          fileSize: Math.floor(Math.random() * 5000000) + 1000000, // Mock file size for now\r\n          riskLevel: session.analysisResults?.riskLevel || 'unknown',\r\n          depressionScore: prediction?.predicted_score_depression || \r\n                          prediction?.predictedScoreDepression ||\r\n                          undefined,\r\n          anxietyScore: prediction?.predicted_score_anxiety || \r\n                       prediction?.predictedScoreAnxiety ||\r\n                       undefined,\r\n        };\r\n      });\r\n\r\n      setSessions(transformedSessions);\r\n      announceToScreenReader(`${transformedSessions.length} sessions loaded successfully`);\r\n    } catch (err) {\r\n      const appError = err as AppError;\r\n      setError(appError);\r\n      announceToScreenReader(`Error loading sessions: ${appError.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [announceToScreenReader]);\r\n\r\n  // Load sessions on component mount\r\n  useEffect(() => {\r\n    loadSessions();\r\n  }, [loadSessions]);\r\n\r\n  // Filter and sort sessions\r\n  const filteredAndSortedSessions = useMemo(() => {\r\n    let filtered = sessions;\r\n\r\n    // Search filter\r\n    if (filters.search) {\r\n      const searchLower = filters.search.toLowerCase();\r\n      filtered = filtered.filter(session => \r\n        session.sessionId.toLowerCase().includes(searchLower) ||\r\n        session.fileName?.toLowerCase().includes(searchLower) ||\r\n        statusConfig[session.status as keyof typeof statusConfig]?.label.toLowerCase().includes(searchLower)\r\n      );\r\n    }\r\n\r\n    // Status filter\r\n    if (filters.status !== 'all') {\r\n      filtered = filtered.filter(session => session.status === filters.status);\r\n    }\r\n\r\n    // Date range filter\r\n    if (filters.dateRange !== 'all') {\r\n      const now = new Date();\r\n      const startDate = new Date();\r\n      \r\n      switch (filters.dateRange) {\r\n        case 'today':\r\n          startDate.setHours(0, 0, 0, 0);\r\n          break;\r\n        case 'week':\r\n          startDate.setDate(now.getDate() - 7);\r\n          break;\r\n        case 'month':\r\n          startDate.setMonth(now.getMonth() - 1);\r\n          break;\r\n        case 'year':\r\n          startDate.setFullYear(now.getFullYear() - 1);\r\n          break;\r\n      }\r\n      \r\n      filtered = filtered.filter(session => \r\n        new Date(session.uploadedAt) >= startDate\r\n      );\r\n    }\r\n\r\n    // Sort\r\n    filtered.sort((a, b) => {\r\n      let comparison = 0;\r\n      \r\n      switch (filters.sortBy) {\r\n        case 'date':\r\n          comparison = new Date(a.uploadedAt).getTime() - new Date(b.uploadedAt).getTime();\r\n          break;\r\n        case 'status':\r\n          comparison = a.status.localeCompare(b.status);\r\n          break;\r\n        case 'depressionScore':\r\n          const depressionA = getSeverityLevel(a.depressionScore);\r\n          const depressionB = getSeverityLevel(b.depressionScore);\r\n          comparison = depressionA - depressionB;\r\n          break;\r\n        case 'anxietyScore':\r\n          const anxietyA = getSeverityLevel(a.anxietyScore);\r\n          const anxietyB = getSeverityLevel(b.anxietyScore);\r\n          comparison = anxietyA - anxietyB;\r\n          break;\r\n      }\r\n      \r\n      return filters.sortOrder === 'desc' ? -comparison : comparison;\r\n    });\r\n\r\n    return filtered;\r\n  }, [sessions, filters]);\r\n\r\n  // Handle filter changes\r\n  const updateFilter = useCallback((key: keyof SessionFilters, value: any) => {\r\n    setFilters(prev => ({ ...prev, [key]: value }));\r\n    announceToScreenReader(`Filter ${key} changed to ${value}`);\r\n  }, [announceToScreenReader]);\r\n\r\n  // Handle session selection\r\n  const toggleSessionSelection = useCallback((sessionId: string) => {\r\n    setSelectedSessions(prev => {\r\n      const newSelection = new Set(prev);\r\n      if (newSelection.has(sessionId)) {\r\n        newSelection.delete(sessionId);\r\n        announceToScreenReader('Session deselected');\r\n      } else {\r\n        newSelection.add(sessionId);\r\n        announceToScreenReader('Session selected');\r\n      }\r\n      return newSelection;\r\n    });\r\n  }, [announceToScreenReader]);\r\n\r\n  // Handle select all\r\n  const toggleSelectAll = useCallback(() => {\r\n    const allSelected = selectedSessions.size === filteredAndSortedSessions.length;\r\n    if (allSelected) {\r\n      setSelectedSessions(new Set());\r\n      announceToScreenReader('All sessions deselected');\r\n    } else {\r\n      setSelectedSessions(new Set(filteredAndSortedSessions.map(s => s.sessionId)));\r\n      announceToScreenReader(`All ${filteredAndSortedSessions.length} sessions selected`);\r\n    }\r\n  }, [selectedSessions.size, filteredAndSortedSessions, announceToScreenReader]);\r\n\r\n  // Handle individual session deletion\r\n  const handleDeleteSession = useCallback(async (sessionId: string) => {\r\n    const confirmed = window.confirm('Are you sure you want to delete this session? This action cannot be undone.');\r\n    if (!confirmed) return;\r\n\r\n    try {\r\n      await apiService.deleteSessionData(sessionId);\r\n      \r\n      // Remove from local state after successful API call\r\n      setSessions(prev => prev.filter(session => session.sessionId !== sessionId));\r\n      \r\n      // Remove from selection if it was selected\r\n      setSelectedSessions(prev => {\r\n        const newSelection = new Set(prev);\r\n        newSelection.delete(sessionId);\r\n        return newSelection;\r\n      });\r\n      \r\n      announceToScreenReader('Session deleted successfully');\r\n    } catch (err) {\r\n      const appError = err as AppError;\r\n      announceToScreenReader(`Error deleting session: ${appError.message}`);\r\n      // Optionally show a toast or alert for the error\r\n      alert(`Failed to delete session: ${appError.message}`);\r\n    }\r\n  }, [announceToScreenReader]);\r\n\r\n  // Handle bulk actions\r\n  const handleBulkDelete = useCallback(async () => {\r\n    if (selectedSessions.size === 0) return;\r\n    \r\n    const confirmed = window.confirm(`Are you sure you want to delete ${selectedSessions.size} session(s)? This action cannot be undone.`);\r\n    if (!confirmed) return;\r\n\r\n    const sessionIds = Array.from(selectedSessions);\r\n    let successCount = 0;\r\n    let failedSessions: string[] = [];\r\n\r\n    // Process deletions sequentially to avoid overwhelming the server\r\n    for (const sessionId of sessionIds) {\r\n      try {\r\n        await apiService.deleteSessionData(sessionId);\r\n        successCount++;\r\n      } catch (err) {\r\n        const appError = err as AppError;\r\n        failedSessions.push(sessionId);\r\n        console.error(`Failed to delete session ${sessionId}:`, appError.message);\r\n      }\r\n    }\r\n\r\n    // Remove successfully deleted sessions from local state\r\n    if (successCount > 0) {\r\n      setSessions(prev => prev.filter(session => {\r\n        const wasDeleted = selectedSessions.has(session.sessionId) && !failedSessions.includes(session.sessionId);\r\n        return !wasDeleted;\r\n      }));\r\n    }\r\n\r\n    // Clear selection\r\n    setSelectedSessions(new Set());\r\n\r\n    // Announce results\r\n    if (failedSessions.length === 0) {\r\n      announceToScreenReader(`${successCount} sessions deleted successfully`);\r\n    } else {\r\n      const message = `${successCount} sessions deleted successfully, ${failedSessions.length} failed`;\r\n      announceToScreenReader(message);\r\n      alert(`${message}. Failed sessions: ${failedSessions.join(', ')}`);\r\n    }\r\n  }, [selectedSessions, announceToScreenReader]);\r\n\r\n  // Format file size\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes === 0) return '0 B';\r\n    const k = 1024;\r\n    const sizes = ['B', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(1))} ${sizes[i]}`;\r\n  };\r\n\r\n  // Get status badge component\r\n  const StatusBadge: React.FC<{ status: string }> = ({ status }) => {\r\n    // For any unknown status that contains \"error\" or \"fail\", treat as error\r\n    const normalizedStatus = status.toLowerCase();\r\n    let config = statusConfig[status as keyof typeof statusConfig];\r\n    \r\n    if (!config) {\r\n      if (normalizedStatus.includes('error') || normalizedStatus.includes('fail')) {\r\n        config = statusConfig.error;\r\n      } else {\r\n        config = statusConfig.failed; // Default fallback\r\n      }\r\n    }\r\n    \r\n    const Icon = config.icon;\r\n    \r\n    return (\r\n      <span\r\n        className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n          config.color === 'green' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' :\r\n          config.color === 'blue' ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200' :\r\n          config.color === 'yellow' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200' :\r\n          'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\r\n        }`}\r\n        role=\"status\"\r\n        aria-label={`Status: ${config.label}`}\r\n      >\r\n        <Icon className=\"w-3 h-3 mr-1\" aria-hidden=\"true\" />\r\n        {config.label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        <div className=\"flex items-center justify-center py-16\">\r\n          <RefreshCw className=\"w-8 h-8 text-blue-600 animate-spin mr-3\" aria-hidden=\"true\" />\r\n          <span className=\"text-lg text-gray-900 dark:text-white\">Loading sessions...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6\">\r\n          <div className=\"flex items-center\">\r\n            <AlertCircle className=\"w-5 h-5 text-red-500 mr-3\" aria-hidden=\"true\" />\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-red-900 dark:text-red-200\">\r\n                Error Loading Sessions\r\n              </h3>\r\n              <p className=\"text-red-700 dark:text-red-300 mt-1\">{error.message}</p>\r\n              <button type=\"button\"\r\n                onClick={loadSessions}\r\n                className=\"mt-4 btn btn--primary\"\r\n                aria-label=\"Retry loading sessions\"\r\n              >\r\n                Try Again\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\r\n            Analysis Sessions\r\n          </h1>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mt-1\">\r\n            View and manage your audio analysis sessions\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-3\">\r\n          <button type=\"button\"\r\n            onClick={loadSessions}\r\n            disabled={loading}\r\n            className=\"btn btn--secondary\"\r\n            aria-label=\"Refresh sessions list\"\r\n          >\r\n            <RefreshCw className={`w-4 h-4 mr-2 ${loading ? 'animate-spin' : ''}`} aria-hidden=\"true\" />\r\n            Refresh\r\n          </button>\r\n          \r\n          <Link\r\n            to=\"/upload\"\r\n            className=\"btn btn--primary\"\r\n            aria-label=\"Start new analysis session\"\r\n          >\r\n            New Analysis\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters and Search */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n        <div className=\"flex flex-col lg:flex-row lg:items-center gap-4\">\r\n          {/* Search */}\r\n          <div className=\"flex-1 min-w-0\">\r\n            <label htmlFor=\"search-sessions\" className=\"sr-only\">\r\n              Search sessions\r\n            </label>\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" aria-hidden=\"true\" />\r\n              <input\r\n                id=\"search-sessions\"\r\n                type=\"text\"\r\n                placeholder=\"Search by session ID, filename, or status...\"\r\n                value={filters.search}\r\n                onChange={(e) => updateFilter('search', e.target.value)}\r\n                className=\"form__input w-full pl-10 pr-4 py-2\"\r\n                aria-describedby=\"search-help\"\r\n              />\r\n            </div>\r\n            <p id=\"search-help\" className=\"sr-only\">\r\n              Search through your analysis sessions by ID, filename, or status\r\n            </p>\r\n          </div>\r\n\r\n          {/* Filter Toggle */}\r\n          <button type=\"button\"\r\n            onClick={() => setShowFilters(!showFilters)}\r\n            className=\"btn btn--secondary flex items-center\"\r\n            aria-expanded={showFilters ? \"true\" : \"false\"}\r\n            aria-controls=\"filter-panel\"\r\n            aria-label={`${showFilters ? 'Hide' : 'Show'} filter options`}\r\n          >\r\n            <Filter className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n            Filters\r\n            {showFilters ? <ChevronUp className=\"w-4 h-4 ml-2\" aria-hidden=\"true\" /> : <ChevronDown className=\"w-4 h-4 ml-2\" aria-hidden=\"true\" />}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Expanded Filters */}\r\n        {showFilters && (\r\n          <div id=\"filter-panel\" className=\"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            {/* Status Filter */}\r\n            <div>\r\n              <label htmlFor=\"status-filter\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Status\r\n              </label>\r\n              <select\r\n                id=\"status-filter\"\r\n                value={filters.status}\r\n                onChange={(e) => updateFilter('status', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Statuses</option>\r\n                <option value=\"queued\">Queued</option>\r\n                <option value=\"processing\">Processing</option>\r\n                <option value=\"running\">Running</option>\r\n                <option value=\"succeeded\">Completed</option>\r\n                <option value=\"success\">Success</option>\r\n                <option value=\"failed\">Failed</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Date Range Filter */}\r\n            <div>\r\n              <label htmlFor=\"date-filter\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Date Range\r\n              </label>\r\n              <select\r\n                id=\"date-filter\"\r\n                value={filters.dateRange}\r\n                onChange={(e) => updateFilter('dateRange', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Time</option>\r\n                <option value=\"today\">Today</option>\r\n                <option value=\"week\">Past Week</option>\r\n                <option value=\"month\">Past Month</option>\r\n                <option value=\"year\">Past Year</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Sort By */}\r\n            <div>\r\n              <label htmlFor=\"sort-by\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Sort By\r\n              </label>\r\n              <select\r\n                id=\"sort-by\"\r\n                value={filters.sortBy}\r\n                onChange={(e) => updateFilter('sortBy', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"date\">Date</option>\r\n                <option value=\"status\">Status</option>\r\n                <option value=\"depressionScore\">Depression Score</option>\r\n                <option value=\"anxietyScore\">Anxiety Score</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Sort Order */}\r\n            <div>\r\n              <label htmlFor=\"sort-order\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Sort Order\r\n              </label>\r\n              <select\r\n                id=\"sort-order\"\r\n                value={filters.sortOrder}\r\n                onChange={(e) => updateFilter('sortOrder', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"desc\">Newest First</option>\r\n                <option value=\"asc\">Oldest First</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Results Summary and Bulk Actions */}\r\n      {filteredAndSortedSessions.length > 0 && (\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <p className=\"text-sm text-gray-600 dark:text-gray-300\">\r\n              {filteredAndSortedSessions.length} of {sessions.length} sessions\r\n              {selectedSessions.size > 0 && ` ‚Ä¢ ${selectedSessions.size} selected`}\r\n            </p>\r\n          </div>\r\n          \r\n          {selectedSessions.size > 0 && (\r\n            <div className=\"flex items-center gap-2\">\r\n              <button type=\"button\"\r\n                onClick={handleBulkDelete}\r\n                className=\"btn btn--danger\"\r\n                aria-label={`Delete ${selectedSessions.size} selected sessions`}\r\n              >\r\n                <Trash2 className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n                Delete Selected\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Sessions Table */}\r\n      {filteredAndSortedSessions.length > 0 ? (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden\">\r\n          {/* Desktop Table */}\r\n          <div className=\"hidden md:block overflow-x-auto\">\r\n            <table className=\"w-full\" role=\"table\" aria-label=\"Analysis sessions\">\r\n              <thead className=\"bg-gray-50 dark:bg-gray-700\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedSessions.size === filteredAndSortedSessions.length}\r\n                      onChange={toggleSelectAll}\r\n                      className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                      aria-label=\"Select all sessions\"\r\n                    />\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Session\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Status\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Depression Score\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Anxiety Score\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Date\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Actions\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200 dark:divide-gray-600\">\r\n                {filteredAndSortedSessions.map((session) => (\r\n                  <tr\r\n                    key={session.sessionId}\r\n                    className=\"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\"\r\n                  >\r\n                    <td className=\"px-6 py-4\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedSessions.has(session.sessionId)}\r\n                        onChange={() => toggleSessionSelection(session.sessionId)}\r\n                        className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                        aria-label={`Select session ${session.sessionId}`}\r\n                      />\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div>\r\n                        <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                          {session.fileName}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          ID: {session.sessionId.slice(-12)}\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-400 dark:text-gray-500\">\r\n                          {formatFileSize(session.fileSize || 0)}\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <StatusBadge status={session.status} />\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"text-sm\">\r\n                        {session.depressionScore ? (\r\n                          <span className=\"text-gray-900 dark:text-white font-medium\">\r\n                            {formatScoreCategory(session.depressionScore)}\r\n                          </span>\r\n                        ) : (\r\n                          <span className=\"text-gray-400 dark:text-gray-500\">‚Äî</span>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"text-sm\">\r\n                        {session.anxietyScore ? (\r\n                          <span className=\"text-gray-900 dark:text-white font-medium\">\r\n                            {formatScoreCategory(session.anxietyScore)}\r\n                          </span>\r\n                        ) : (\r\n                          <span className=\"text-gray-400 dark:text-gray-500\">‚Äî</span>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"text-sm text-gray-900 dark:text-white\">\r\n                        {formatRelativeTime(session.uploadedAt)}\r\n                      </div>\r\n                      <div className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                        {formatDateTime(session.uploadedAt)}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-right\">\r\n                      <div className=\"flex items-center justify-end gap-2\">\r\n                        <Link\r\n                          to={`/sessions/${session.sessionId}`}\r\n                          className=\"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300\"\r\n                          aria-label={`View details for session ${session.sessionId}`}\r\n                        >\r\n                          <Eye className=\"w-4 h-4\" aria-hidden=\"true\" />\r\n                        </Link>\r\n                        {session.status === 'succeeded' && (\r\n                          <button type=\"button\"\r\n                            className=\"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300\"\r\n                            aria-label={`Download results for session ${session.sessionId}`}\r\n                          >\r\n                            <Download className=\"w-4 h-4\" aria-hidden=\"true\" />\r\n                          </button>\r\n                        )}\r\n                        <button type=\"button\"\r\n                          onClick={() => handleDeleteSession(session.sessionId)}\r\n                          className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\"\r\n                          aria-label={`Delete session ${session.sessionId}`}\r\n                        >\r\n                          <Trash2 className=\"w-4 h-4\" aria-hidden=\"true\" />\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          {/* Mobile Cards */}\r\n          <div className=\"md:hidden space-y-4 p-4\">\r\n            {filteredAndSortedSessions.map((session) => (\r\n              <div\r\n                key={session.sessionId}\r\n                className=\"border border-gray-200 dark:border-gray-600 rounded-lg p-4 space-y-3\"\r\n              >\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex items-start space-x-3\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedSessions.has(session.sessionId)}\r\n                      onChange={() => toggleSessionSelection(session.sessionId)}\r\n                      className=\"mt-1 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                      aria-label={`Select session ${session.sessionId}`}\r\n                    />\r\n                    <div>\r\n                      <h3 className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                        {session.fileName}\r\n                      </h3>\r\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                        ID: {session.sessionId.slice(-12)}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <StatusBadge status={session.status} />\r\n                </div>\r\n\r\n                {(session.depressionScore || session.anxietyScore) && (\r\n                  <div className=\"text-sm\">\r\n                    {session.depressionScore && (\r\n                      <div>Depression: {formatScoreCategory(session.depressionScore)}</div>\r\n                    )}\r\n                    {session.anxietyScore && (\r\n                      <div>Anxiety: {formatScoreCategory(session.anxietyScore)}</div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400\">\r\n                  <span>{formatRelativeTime(session.uploadedAt)}</span>\r\n                  <span>{formatFileSize(session.fileSize || 0)}</span>\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-end gap-2 pt-2 border-t border-gray-200 dark:border-gray-600\">\r\n                  <Link\r\n                    to={`/sessions/${session.sessionId}`}\r\n                    className=\"btn btn--secondary text-xs\"\r\n                    aria-label={`View details for session ${session.sessionId}`}\r\n                  >\r\n                    <Eye className=\"w-4 h-4 mr-1\" aria-hidden=\"true\" />\r\n                    View\r\n                  </Link>\r\n                  {session.status === 'succeeded' && (\r\n                    <button type=\"button\"\r\n                      className=\"btn btn--secondary text-xs\"\r\n                      aria-label={`Download results for session ${session.sessionId}`}\r\n                    >\r\n                      <Download className=\"w-4 h-4 mr-1\" aria-hidden=\"true\" />\r\n                      Download\r\n                    </button>\r\n                  )}\r\n                  <button type=\"button\"\r\n                    onClick={() => handleDeleteSession(session.sessionId)}\r\n                    className=\"btn btn--danger text-xs\"\r\n                    aria-label={`Delete session ${session.sessionId}`}\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4 mr-1\" aria-hidden=\"true\" />\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-16 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n          <AlertCircle className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" aria-hidden=\"true\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\r\n            No sessions found\r\n          </h3>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\r\n            {sessions.length === 0 \r\n              ? \"You haven't created any analysis sessions yet.\"\r\n              : \"No sessions match your current filters.\"\r\n            }\r\n          </p>\r\n          {sessions.length === 0 ? (\r\n            <Link to=\"/upload\" className=\"btn btn--primary\">\r\n              Start Your First Analysis\r\n            </Link>\r\n          ) : (\r\n            <button type=\"button\"\r\n              onClick={() => setFilters({\r\n                search: '',\r\n                status: 'all',\r\n                dateRange: 'all',\r\n                sortBy: 'date',\r\n                sortOrder: 'desc',\r\n              })}\r\n              className=\"btn btn--secondary\"\r\n            >\r\n              Clear Filters\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sessions;\r\n","import React, { useState, useCallback } from 'react';\r\nimport { \r\n  Brain, \r\n  AlertTriangle, \r\n  CheckCircle, \r\n  RefreshCw, \r\n  Clock, \r\n  TrendingUp,\r\n  Lightbulb,\r\n  ShieldAlert,\r\n  FileText,\r\n  Target,\r\n  Calendar\r\n} from 'lucide-react';\r\nimport { apiService } from '../services/api';\r\nimport { useAccessibility } from '../hooks/useAccessibility';\r\nimport { formatDateTime } from '../utils';\r\nimport type { RiskAssessment, AppError } from '../types';\r\n\r\ninterface RiskAssessmentProps {\r\n  sessionId: string;\r\n  existingAssessment?: RiskAssessment | null;\r\n  onAssessmentUpdated?: (assessment: RiskAssessment) => void;\r\n}\r\n\r\n// Risk level configuration\r\nconst riskLevelConfig = {\r\n  low: { \r\n    color: 'green', \r\n    label: 'Low Risk',\r\n    icon: CheckCircle,\r\n    description: 'Low likelihood of immediate concerns'\r\n  },\r\n  moderate: { \r\n    color: 'yellow', \r\n    label: 'Moderate Risk',\r\n    icon: AlertTriangle,\r\n    description: 'Some concerns that warrant attention'\r\n  },\r\n  high: { \r\n    color: 'red', \r\n    label: 'High Risk',\r\n    icon: ShieldAlert,\r\n    description: 'Significant concerns requiring immediate attention'\r\n  },\r\n  critical: { \r\n    color: 'red', \r\n    label: 'Critical Risk',\r\n    icon: ShieldAlert,\r\n    description: 'Urgent intervention required'\r\n  },\r\n} as const;\r\n\r\nconst RiskAssessmentComponent: React.FC<RiskAssessmentProps> = ({\r\n  sessionId,\r\n  existingAssessment,\r\n  onAssessmentUpdated\r\n}) => {\r\n  const { announceToScreenReader } = useAccessibility();\r\n  const [assessment, setAssessment] = useState<RiskAssessment | null>(existingAssessment || null);\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<AppError | null>(null);\r\n\r\n  // Generate new risk assessment\r\n  const generateAssessment = useCallback(async () => {\r\n    try {\r\n      setIsGenerating(true);\r\n      setError(null);\r\n      announceToScreenReader('Generating AI risk assessment...');\r\n\r\n      const response = await apiService.generateRiskAssessment(sessionId);\r\n      \r\n      if (response.success && response.riskAssessment) {\r\n        setAssessment(response.riskAssessment);\r\n        onAssessmentUpdated?.(response.riskAssessment);\r\n        announceToScreenReader('Risk assessment generated successfully');\r\n      } else {\r\n        throw new Error(response.message || 'Failed to generate risk assessment');\r\n      }\r\n    } catch (err) {\r\n      const appError = err as AppError;\r\n      setError(appError);\r\n      announceToScreenReader(`Error generating assessment: ${appError.message}`);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  }, [sessionId, onAssessmentUpdated, announceToScreenReader]);\r\n\r\n  // Load existing assessment\r\n  const loadAssessment = useCallback(async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const response = await apiService.getRiskAssessment(sessionId);\r\n      \r\n      if (response.success && response.riskAssessment) {\r\n        setAssessment(response.riskAssessment);\r\n        onAssessmentUpdated?.(response.riskAssessment);\r\n      }\r\n    } catch (err) {\r\n      const appError = err as AppError;\r\n      setError(appError);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [sessionId, onAssessmentUpdated]);\r\n\r\n  // Risk level badge component\r\n  const RiskLevelBadge: React.FC<{ riskLevel: string; riskScore?: number }> = ({ riskLevel, riskScore }) => {\r\n    const config = riskLevelConfig[riskLevel.toLowerCase() as keyof typeof riskLevelConfig];\r\n    if (!config) return null;\r\n\r\n    const Icon = config.icon;\r\n    \r\n    return (\r\n      <div className=\"flex items-center space-x-2\">\r\n        <span\r\n          className={`inline-flex items-center px-3 py-2 rounded-full text-sm font-medium ${\r\n            config.color === 'green' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' :\r\n            config.color === 'yellow' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200' :\r\n            'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\r\n          }`}\r\n          role=\"status\"\r\n          aria-label={`Risk level: ${config.label}`}\r\n        >\r\n          <Icon className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n          {config.label}\r\n          {riskScore && (\r\n            <span className=\"ml-2 px-2 py-0.5 bg-white dark:bg-gray-800 rounded text-xs font-bold\">\r\n              {riskScore}/10\r\n            </span>\r\n          )}\r\n        </span>\r\n        <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          {config.description}\r\n        </span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // If no assessment exists and not generating, show generate button\r\n  if (!assessment && !isGenerating && !isLoading) {\r\n    return (\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n          <Brain className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n          AI Risk Assessment\r\n        </h2>\r\n        \r\n        <div className=\"text-center py-8\">\r\n          <Brain className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" aria-hidden=\"true\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\r\n            No Risk Assessment Available\r\n          </h3>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\r\n            Generate an AI-powered risk assessment based on session data and clinical insights.\r\n          </p>\r\n          \r\n          <div className=\"space-y-3\">\r\n            <button type=\"button\"\r\n              onClick={generateAssessment}\r\n              className=\"btn btn--primary\"\r\n              aria-label=\"Generate AI risk assessment\"\r\n            >\r\n              <Brain className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n              Generate AI Risk Assessment\r\n            </button>\r\n            \r\n            <button type=\"button\"\r\n              onClick={loadAssessment}\r\n              className=\"btn btn--secondary\"\r\n              aria-label=\"Check for existing assessment\"\r\n            >\r\n              <RefreshCw className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n              Check for Existing Assessment\r\n            </button>\r\n          </div>\r\n          \r\n          {error && (\r\n            <div className=\"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\r\n              <p className=\"text-red-700 dark:text-red-300 text-sm\">\r\n                {error.message}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Loading state\r\n  if (isGenerating || isLoading) {\r\n    return (\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n          <Brain className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n          AI Risk Assessment\r\n        </h2>\r\n        \r\n        <div className=\"flex items-center justify-center py-16\">\r\n          <RefreshCw className=\"w-8 h-8 text-blue-600 animate-spin mr-3\" aria-hidden=\"true\" />\r\n          <span className=\"text-lg text-gray-900 dark:text-white\">\r\n            {isGenerating ? 'Generating AI risk assessment...' : 'Loading assessment...'}\r\n          </span>\r\n        </div>\r\n        \r\n        {isGenerating && (\r\n          <div className=\"mt-4 text-center\">\r\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n              This may take a few moments as AI analyzes the session data...\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Display assessment\r\n  if (!assessment) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white flex items-center\">\r\n          <Brain className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n          AI Risk Assessment\r\n        </h2>\r\n        \r\n        <div className=\"flex items-center space-x-3 mt-4 sm:mt-0\">\r\n          <button type=\"button\"\r\n            onClick={generateAssessment}\r\n            disabled={isGenerating}\r\n            className=\"btn btn--secondary text-xs\"\r\n            aria-label=\"Regenerate risk assessment\"\r\n          >\r\n            <RefreshCw className={`w-3 h-3 mr-1 ${isGenerating ? 'animate-spin' : ''}`} aria-hidden=\"true\" />\r\n            Regenerate\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-6\">\r\n        {/* Risk Level and Score */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n          <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg\">\r\n            <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n              Overall Risk Level\r\n            </h3>\r\n            <RiskLevelBadge riskLevel={assessment.overallRiskLevel} riskScore={assessment.riskScore} />\r\n          </div>\r\n          \r\n          {assessment.generatedAt && (\r\n            <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg\">\r\n              <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center\">\r\n                <Calendar className=\"w-4 h-4 mr-1\" aria-hidden=\"true\" />\r\n                Generated\r\n              </h3>\r\n              <div className=\"text-sm text-gray-900 dark:text-white\">\r\n                {formatDateTime(assessment.generatedAt)}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Summary */}\r\n        {assessment.summary && (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center\">\r\n              <FileText className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n              Summary\r\n            </h3>\r\n            <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800\">\r\n              <p className=\"text-blue-900 dark:text-blue-100 text-sm leading-relaxed\">\r\n                {assessment.summary}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Key Risk Factors */}\r\n        {assessment.keyFactors && assessment.keyFactors.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center\">\r\n              <AlertTriangle className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n              Key Risk Factors\r\n            </h3>\r\n            <div className=\"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800\">\r\n              <ul className=\"space-y-2\">\r\n                {assessment.keyFactors.map((factor: string, index: number) => (\r\n                  <li key={index} className=\"text-yellow-900 dark:text-yellow-100 text-sm flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-yellow-600 dark:bg-yellow-400 rounded-full mt-2 mr-3 flex-shrink-0\" aria-hidden=\"true\"></span>\r\n                    {factor}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Recommendations */}\r\n        {assessment.recommendations && assessment.recommendations.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center\">\r\n              <Lightbulb className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n              Recommendations\r\n            </h3>\r\n            <div className=\"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800\">\r\n              <ul className=\"space-y-2\">\r\n                {assessment.recommendations.map((recommendation: string, index: number) => (\r\n                  <li key={index} className=\"text-green-900 dark:text-green-100 text-sm flex items-start\">\r\n                    <CheckCircle className=\"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 mr-3 flex-shrink-0\" aria-hidden=\"true\" />\r\n                    {recommendation}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Immediate Actions */}\r\n        {assessment.immediateActions && assessment.immediateActions.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center\">\r\n              <Target className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n              Immediate Actions Required\r\n            </h3>\r\n            <div className=\"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800\">\r\n              <ul className=\"space-y-2\">\r\n                {assessment.immediateActions.map((action: string, index: number) => (\r\n                  <li key={index} className=\"text-red-900 dark:text-red-100 text-sm flex items-start\">\r\n                    <ShieldAlert className=\"w-4 h-4 text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0\" aria-hidden=\"true\" />\r\n                    {action}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Follow-up Recommendations */}\r\n        {assessment.followUpRecommendations && assessment.followUpRecommendations.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center\">\r\n              <TrendingUp className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n              Follow-up Recommendations\r\n            </h3>\r\n            <div className=\"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800\">\r\n              <ul className=\"space-y-2\">\r\n                {assessment.followUpRecommendations.map((followUp: string, index: number) => (\r\n                  <li key={index} className=\"text-purple-900 dark:text-purple-100 text-sm flex items-start\">\r\n                    <Clock className=\"w-4 h-4 text-purple-600 dark:text-purple-400 mt-0.5 mr-3 flex-shrink-0\" aria-hidden=\"true\" />\r\n                    {followUp}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Last Updated */}\r\n        <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n          <div className=\"flex items-center text-xs text-gray-500 dark:text-gray-400\">\r\n            <Clock className=\"w-3 h-3 mr-1\" aria-hidden=\"true\" />\r\n            Generated: {formatDateTime(assessment.generatedAt)}\r\n            {assessment.modelVersion && (\r\n              <span className=\"ml-4\">Model: {assessment.modelVersion}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {error && (\r\n        <div className=\"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\r\n          <p className=\"text-red-700 dark:text-red-300 text-sm\">\r\n            {error.message}\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RiskAssessmentComponent;\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom';\r\nimport { \r\n  ArrowLeft, \r\n  RefreshCw, \r\n  Download, \r\n  AlertCircle, \r\n  CheckCircle, \r\n  Clock, \r\n  XCircle,\r\n  Eye,\r\n  EyeOff,\r\n  Play,\r\n  Pause,\r\n  Calendar,\r\n  User,\r\n  FileAudio,\r\n  Activity,\r\n  TrendingUp,\r\n  Brain,\r\n  Heart,\r\n  Info\r\n} from 'lucide-react';\r\nimport { useAccessibility } from '../hooks/useAccessibility';\r\nimport { apiService } from '../services/api';\r\nimport { formatDateTime, formatRelativeTime } from '../utils';\r\nimport RiskAssessmentComponent from '../components/RiskAssessment';\r\nimport type { SessionData, AppError } from '../types';\r\n\r\n// Status configuration for consistent styling\r\nconst statusConfig = {\r\n  queued: { color: 'yellow', icon: Clock, label: 'Queued', description: 'Waiting to be processed' },\r\n  initiated: { color: 'blue', icon: Clock, label: 'Initiated', description: 'Session has been created' },\r\n  running: { color: 'blue', icon: RefreshCw, label: 'Processing', description: 'Audio is being analyzed' },\r\n  processing: { color: 'blue', icon: RefreshCw, label: 'Processing', description: 'Analysis in progress' },\r\n  succeeded: { color: 'green', icon: CheckCircle, label: 'Completed', description: 'Analysis completed successfully' },\r\n  success: { color: 'green', icon: CheckCircle, label: 'Completed', description: 'Analysis completed successfully' },\r\n  failed: { color: 'red', icon: XCircle, label: 'Failed', description: 'Analysis encountered an error' },\r\n  error: { color: 'red', icon: XCircle, label: 'Error', description: 'An error occurred during processing' },\r\n} as const;\r\n\r\nconst SessionDetail: React.FC = () => {\r\n  const { sessionId } = useParams<{ sessionId: string }>();\r\n  const navigate = useNavigate();\r\n  const { announceToScreenReader } = useAccessibility();\r\n\r\n  const [session, setSession] = useState<SessionData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<AppError | null>(null);\r\n  const [showRawJson, setShowRawJson] = useState(false);\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [audioPlaying, setAudioPlaying] = useState(false);\r\n  const audioRef = useRef<HTMLAudioElement>(null);\r\n\r\n  // Load session data\r\n  const loadSession = useCallback(async () => {\r\n    if (!sessionId) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const sessionData = await apiService.getSessionData(sessionId);\r\n      setSession(sessionData);\r\n      announceToScreenReader(`Session ${sessionId} loaded successfully`);\r\n    } catch (err) {\r\n      const appError = err as AppError;\r\n      setError(appError);\r\n      announceToScreenReader(`Error loading session: ${appError.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [sessionId, announceToScreenReader]);\r\n\r\n  // Refresh session data\r\n  const refreshSession = useCallback(async () => {\r\n    setIsRefreshing(true);\r\n    await loadSession();\r\n    setIsRefreshing(false);\r\n    announceToScreenReader('Session data refreshed');\r\n  }, [loadSession, announceToScreenReader]);\r\n\r\n  // Load session on component mount\r\n  useEffect(() => {\r\n    loadSession();\r\n  }, [loadSession]);\r\n\r\n  // Handle JSON view toggle\r\n  const toggleRawJson = useCallback(() => {\r\n    setShowRawJson(prev => {\r\n      const newState = !prev;\r\n      announceToScreenReader(`Raw JSON view ${newState ? 'enabled' : 'disabled'}`);\r\n      return newState;\r\n    });\r\n  }, [announceToScreenReader]);\r\n\r\n  // Audio controls\r\n  const toggleAudioPlayback = useCallback(() => {\r\n    if (!audioRef.current) return;\r\n    \r\n    if (audioPlaying) {\r\n      audioRef.current.pause();\r\n      setAudioPlaying(false);\r\n      announceToScreenReader('Audio paused');\r\n    } else {\r\n      audioRef.current.play().catch(() => {\r\n        announceToScreenReader('Failed to play audio');\r\n      });\r\n      setAudioPlaying(true);\r\n      announceToScreenReader('Audio playing');\r\n    }\r\n  }, [audioPlaying, announceToScreenReader]);\r\n\r\n  // Download session data\r\n  const downloadSessionData = useCallback(() => {\r\n    if (!session) return;\r\n\r\n    const dataStr = JSON.stringify(session, null, 2);\r\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n    const url = URL.createObjectURL(dataBlob);\r\n    \r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `session-${session.sessionId}-${new Date().toISOString().split('T')[0]}.json`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n    \r\n    announceToScreenReader('Session data download started');\r\n  }, [session, announceToScreenReader]);\r\n\r\n  // Status badge component\r\n  const StatusBadge: React.FC<{ status: string }> = ({ status }) => {\r\n    // For any unknown status that contains \"error\" or \"fail\", treat as error\r\n    const normalizedStatus = status.toLowerCase();\r\n    let config = statusConfig[status as keyof typeof statusConfig];\r\n    \r\n    if (!config) {\r\n      if (normalizedStatus.includes('error') || normalizedStatus.includes('fail')) {\r\n        config = statusConfig.error;\r\n      } else {\r\n        config = statusConfig.failed; // Default fallback\r\n      }\r\n    }\r\n    \r\n    const Icon = config.icon;\r\n    \r\n    return (\r\n      <div className=\"flex items-center space-x-2\">\r\n        <span\r\n          className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${\r\n            config.color === 'green' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' :\r\n            config.color === 'blue' ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200' :\r\n            config.color === 'yellow' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200' :\r\n            'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\r\n          }`}\r\n          role=\"status\"\r\n          aria-label={`Status: ${config.label}`}\r\n        >\r\n          <Icon className={`w-4 h-4 mr-2 ${config.color === 'blue' && status === 'processing' ? 'animate-spin' : ''}`} aria-hidden=\"true\" />\r\n          {config.label}\r\n        </span>\r\n        <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          {config.description}\r\n        </span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-6xl mx-auto p-6\">\r\n        <div className=\"flex items-center justify-center py-16\">\r\n          <RefreshCw className=\"w-8 h-8 text-blue-600 animate-spin mr-3\" aria-hidden=\"true\" />\r\n          <span className=\"text-lg text-gray-900 dark:text-white\">Loading session details...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"max-w-6xl mx-auto p-6\">\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6\">\r\n          <div className=\"flex items-center\">\r\n            <AlertCircle className=\"w-5 h-5 text-red-500 mr-3\" aria-hidden=\"true\" />\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-red-900 dark:text-red-200\">\r\n                Error Loading Session\r\n              </h3>\r\n              <p className=\"text-red-700 dark:text-red-300 mt-1\">{error.message}</p>\r\n              <div className=\"mt-4 space-x-3\">\r\n                <button type=\"button\"\r\n                  onClick={loadSession}\r\n                  className=\"btn btn--primary\"\r\n                  aria-label=\"Retry loading session\"\r\n                >\r\n                  Try Again\r\n                </button>\r\n                <Link to=\"/sessions\" className=\"btn btn--secondary\">\r\n                  Back to Sessions\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!session) {\r\n    return (\r\n      <div className=\"max-w-6xl mx-auto p-6\">\r\n        <div className=\"text-center py-16\">\r\n          <AlertCircle className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" aria-hidden=\"true\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\r\n            Session Not Found\r\n          </h3>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\r\n            The requested session could not be found.\r\n          </p>\r\n          <Link to=\"/sessions\" className=\"btn btn--primary\">\r\n            Back to Sessions\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <button type=\"button\"\r\n            onClick={() => navigate('/sessions')}\r\n            className=\"btn btn--secondary\"\r\n            aria-label=\"Back to sessions list\"\r\n          >\r\n            <ArrowLeft className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n            Back to Sessions\r\n          </button>\r\n          \r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\r\n              Session Details\r\n            </h1>\r\n            <p className=\"text-gray-600 dark:text-gray-300 mt-1\">\r\n              ID: {session.sessionId}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-3\">\r\n          <button type=\"button\"\r\n            onClick={toggleRawJson}\r\n            className=\"btn btn--secondary\"\r\n            aria-label={`${showRawJson ? 'Hide' : 'Show'} raw JSON data`}\r\n          >\r\n            {showRawJson ? <EyeOff className=\"w-4 h-4 mr-2\" /> : <Eye className=\"w-4 h-4 mr-2\" />}\r\n            {showRawJson ? 'Hide JSON' : 'Show JSON'}\r\n          </button>\r\n          \r\n          <button type=\"button\"\r\n            onClick={refreshSession}\r\n            disabled={isRefreshing}\r\n            className=\"btn btn--secondary\"\r\n            aria-label=\"Refresh session data\"\r\n          >\r\n            <RefreshCw className={`w-4 h-4 mr-2 ${isRefreshing ? 'animate-spin' : ''}`} aria-hidden=\"true\" />\r\n            Refresh\r\n          </button>\r\n          \r\n          <button type=\"button\"\r\n            onClick={downloadSessionData}\r\n            className=\"btn btn--primary\"\r\n            aria-label=\"Download session data as JSON\"\r\n          >\r\n            <Download className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n            Download\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Raw JSON View */}\r\n      {showRawJson && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n            <Info className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n            Raw Session Data\r\n          </h2>\r\n          <div className=\"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 overflow-auto\">\r\n            <pre className=\"text-sm text-gray-900 dark:text-gray-100 whitespace-pre-wrap break-all\">\r\n              {JSON.stringify(session, null, 2)}\r\n            </pre>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Session Overview */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Basic Information */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n            <Info className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n            Basic Information\r\n          </h2>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                Status\r\n              </label>\r\n              <StatusBadge status={session.status} />\r\n            </div>\r\n            \r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  <Calendar className=\"w-4 h-4 inline mr-1\" aria-hidden=\"true\" />\r\n                  Created\r\n                </label>\r\n                <div className=\"text-sm\">\r\n                  <div className=\"text-gray-900 dark:text-white\">\r\n                    {formatRelativeTime(session.createdAt)}\r\n                  </div>\r\n                  <div className=\"text-gray-500 dark:text-gray-400\">\r\n                    {formatDateTime(session.createdAt)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  <Clock className=\"w-4 h-4 inline mr-1\" aria-hidden=\"true\" />\r\n                  Last Updated\r\n                </label>\r\n                <div className=\"text-sm\">\r\n                  <div className=\"text-gray-900 dark:text-white\">\r\n                    {formatRelativeTime(session.updatedAt)}\r\n                  </div>\r\n                  <div className=\"text-gray-500 dark:text-gray-400\">\r\n                    {formatDateTime(session.updatedAt)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                <User className=\"w-4 h-4 inline mr-1\" aria-hidden=\"true\" />\r\n                User ID\r\n              </label>\r\n              <div className=\"font-mono text-sm bg-gray-100 dark:bg-gray-700 px-3 py-2 rounded border break-all\">\r\n                {session.userId}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Audio Information */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n            <FileAudio className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n            Audio Information\r\n          </h2>\r\n          \r\n          <div className=\"space-y-4\">\r\n            {session.audioFileName && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  File Name\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white font-medium\">\r\n                  {session.audioFileName}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.audioUrl && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Audio File\r\n                </label>\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <button type=\"button\"\r\n                    onClick={toggleAudioPlayback}\r\n                    className=\"btn btn--secondary\"\r\n                    aria-label={`${audioPlaying ? 'Pause' : 'Play'} audio`}\r\n                  >\r\n                    {audioPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\r\n                  </button>\r\n                  <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                    {audioPlaying ? 'Playing audio...' : 'Audio playback available'}\r\n                  </span>\r\n                </div>\r\n                <audio\r\n                  ref={audioRef}\r\n                  src={session.audioUrl}\r\n                  onPlay={() => setAudioPlaying(true)}\r\n                  onPause={() => setAudioPlaying(false)}\r\n                  onEnded={() => setAudioPlaying(false)}\r\n                  onError={() => {\r\n                    setAudioPlaying(false);\r\n                    announceToScreenReader('Audio playback failed - file may not be accessible');\r\n                  }}\r\n                  className=\"hidden\"\r\n                  preload=\"metadata\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* User Metadata */}\r\n      {session.userMetadata && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n            <User className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n            Patient Information\r\n          </h2>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {session.userMetadata.age && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Age\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white\">\r\n                  {session.userMetadata.age} years\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.gender && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Gender\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white capitalize\">\r\n                  {session.userMetadata.gender.replace(/[_-]/g, ' ')}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.weight && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Weight\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white\">\r\n                  {session.userMetadata.weight} lbs\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.race && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Race\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white capitalize\">\r\n                  {session.userMetadata.race}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.ethnicity && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Ethnicity\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white\">\r\n                  {session.userMetadata.ethnicity}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.zipcode && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  ZIP Code\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white font-mono\">\r\n                  {session.userMetadata.zipcode}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.language !== undefined && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Primary Language English\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white\">\r\n                  {session.userMetadata.language ? 'Yes' : 'No'}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.sessionNotes && (\r\n              <div className=\"md:col-span-2 lg:col-span-3\">\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Session Notes\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded border\">\r\n                  {session.userMetadata.sessionNotes}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Analysis Results */}\r\n      {(session.analysisResults || session.prediction) && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n            <Activity className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n            Analysis Results\r\n          </h2>\r\n          \r\n          <div className=\"space-y-6\">\r\n            {/* Mental Health Scores */}\r\n            {(session.analysisResults || session.prediction) && (\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center\">\r\n                  <Brain className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n                  Mental Health Scores\r\n                </h3>\r\n                \r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                  {/* Depression Score */}\r\n                  {(session.analysisResults?.depressionScore || (session.prediction as any)?.predicted_score_depression) && (\r\n                    <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800\">\r\n                      <div className=\"flex items-center justify-between mb-2\">\r\n                        <span className=\"text-sm font-medium text-blue-700 dark:text-blue-300\">\r\n                          Depression Score\r\n                        </span>\r\n                        <TrendingUp className=\"w-4 h-4 text-blue-600 dark:text-blue-400\" aria-hidden=\"true\" />\r\n                      </div>\r\n                      <div className=\"text-2xl font-bold text-blue-900 dark:text-blue-100\">\r\n                        {session.analysisResults?.depressionScore?.toFixed(2) || \r\n                         ((session.prediction as any)?.predicted_score_depression ? \r\n                           (session.prediction as any).predicted_score_depression.replace(/_/g, ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase()) : \r\n                           'N/A')}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {/* Anxiety Score */}\r\n                  {(session.analysisResults?.anxietyScore || (session.prediction as any)?.predicted_score_anxiety) && (\r\n                    <div className=\"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800\">\r\n                      <div className=\"flex items-center justify-between mb-2\">\r\n                        <span className=\"text-sm font-medium text-purple-700 dark:text-purple-300\">\r\n                          Anxiety Score\r\n                        </span>\r\n                        <Heart className=\"w-4 h-4 text-purple-600 dark:text-purple-400\" aria-hidden=\"true\" />\r\n                      </div>\r\n                      <div className=\"text-2xl font-bold text-purple-900 dark:text-purple-100\">\r\n                        {session.analysisResults?.anxietyScore?.toFixed(2) || \r\n                         ((session.prediction as any)?.predicted_score_anxiety ? \r\n                           (session.prediction as any).predicted_score_anxiety.replace(/_/g, ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase()) : \r\n                           'N/A')}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {/* Note: Overall Score (predicted_score) is deprecated and no longer displayed */}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Clinical Insights */}\r\n            {session.analysisResults?.insights && session.analysisResults.insights.length > 0 && (\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3\">\r\n                  Clinical Insights\r\n                </h3>\r\n                <div className=\"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800\">\r\n                  <ul className=\"space-y-2\">\r\n                    {session.analysisResults.insights.map((insight, index) => (\r\n                      <li key={index} className=\"text-sm text-yellow-800 dark:text-yellow-200 flex items-start\">\r\n                        <span className=\"inline-block w-2 h-2 bg-yellow-600 dark:bg-yellow-400 rounded-full mt-2 mr-2 flex-shrink-0\" aria-hidden=\"true\"></span>\r\n                        {insight}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Completion Information */}\r\n            {session.analysisResults?.completedAt && (\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3\">\r\n                  Analysis Completion\r\n                </h3>\r\n                <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg\">\r\n                  <div className=\"flex items-center text-sm\">\r\n                    <CheckCircle className=\"w-4 h-4 text-green-600 dark:text-green-400 mr-2\" aria-hidden=\"true\" />\r\n                    <span className=\"text-gray-700 dark:text-gray-300 mr-2\">\r\n                      Completed:\r\n                    </span>\r\n                    <span className=\"text-gray-900 dark:text-white font-medium\">\r\n                      {formatDateTime(session.analysisResults.completedAt)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* AI Risk Assessment */}\r\n      <RiskAssessmentComponent \r\n        sessionId={session.sessionId}\r\n        existingAssessment={session.riskAssessment || null}\r\n        onAssessmentUpdated={(assessment) => {\r\n          setSession(prev => prev ? { ...prev, riskAssessment: assessment } : null);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SessionDetail;\r\n","import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { \r\n  TrendingUp, \r\n  TrendingDown, \r\n  Activity, \r\n  Brain, \r\n  Heart, \r\n  BarChart3, \r\n  PieChart, \r\n  Clock,\r\n  AlertCircle,\r\n  RefreshCw,\r\n  Filter,\r\n  ChevronDown,\r\n  ChevronUp,\r\n  Download,\r\n  Eye\r\n} from 'lucide-react';\r\nimport { useAccessibility } from '../hooks/useAccessibility';\r\nimport { apiService } from '../services/api';\r\nimport { getUserId, formatRelativeTime } from '../utils';\r\nimport type { SessionData, AppError } from '../types';\r\n\r\n// Chart data interfaces\r\ninterface ChartDataPoint {\r\n  date: string;\r\n  depression: number | null;\r\n  anxiety: number | null;\r\n  overall: number | null;\r\n  sessionId: string;\r\n}\r\n\r\ninterface ScoreDistribution {\r\n  category: string;\r\n  count: number;\r\n  percentage: number;\r\n  color: string;\r\n}\r\n\r\ninterface TrendAnalysis {\r\n  direction: 'improving' | 'worsening' | 'stable';\r\n  change: number;\r\n  period: string;\r\n}\r\n\r\n// Filter interface\r\ninterface PredictionFilters {\r\n  dateRange: 'all' | 'week' | 'month' | 'quarter' | 'year';\r\n  scoreType: 'all' | 'depression' | 'anxiety' | 'overall';\r\n  showTrends: boolean;\r\n}\r\n\r\nconst Predictions: React.FC = () => {\r\n  const [sessions, setSessions] = useState<SessionData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<AppError | null>(null);\r\n  const [filters, setFilters] = useState<PredictionFilters>({\r\n    dateRange: 'all',\r\n    scoreType: 'all',\r\n    showTrends: true\r\n  });\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  const { announceToScreenReader } = useAccessibility();\r\n  const navigate = useNavigate();\r\n\r\n  // Handle bar click to navigate to session details\r\n  const handleBarClick = useCallback((sessionId: string) => {\r\n    navigate(`/sessions/${sessionId}`);\r\n    announceToScreenReader(`Navigating to session ${sessionId} details`);\r\n  }, [navigate, announceToScreenReader]);\r\n\r\n  // Load user sessions with prediction data\r\n  const loadPredictions = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const userId = getUserId();\r\n      const response = await apiService.getUserSessions(userId);\r\n      \r\n      // Filter sessions that have analysis results or predictions\r\n      const sessionsWithPredictions = response.sessions.filter(session => {\r\n        return session.analysisResults || session.prediction;\r\n      });\r\n      \r\n      setSessions(sessionsWithPredictions);\r\n      announceToScreenReader(`${sessionsWithPredictions.length} prediction sessions loaded`);\r\n    } catch (err) {\r\n      const appError = err as AppError;\r\n      setError(appError);\r\n      announceToScreenReader(`Error loading predictions: ${appError.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [announceToScreenReader]);\r\n\r\n  useEffect(() => {\r\n    loadPredictions();\r\n  }, [loadPredictions]);\r\n\r\n  // Filter sessions based on date range\r\n  const filteredSessions = useMemo(() => {\r\n    if (filters.dateRange === 'all') return sessions;\r\n\r\n    const now = new Date();\r\n    const startDate = new Date();\r\n    \r\n    switch (filters.dateRange) {\r\n      case 'week':\r\n        startDate.setDate(now.getDate() - 7);\r\n        break;\r\n      case 'month':\r\n        startDate.setMonth(now.getMonth() - 1);\r\n        break;\r\n      case 'quarter':\r\n        startDate.setMonth(now.getMonth() - 3);\r\n        break;\r\n      case 'year':\r\n        startDate.setFullYear(now.getFullYear() - 1);\r\n        break;\r\n    }\r\n    \r\n    return sessions.filter(session => \r\n      new Date(session.createdAt) >= startDate\r\n    );\r\n  }, [sessions, filters.dateRange]);\r\n\r\n  // Prepare chart data\r\n  const chartData = useMemo((): ChartDataPoint[] => {\r\n    return filteredSessions\r\n      .map(session => {\r\n        // Since we now have categorical data, we'll map categories to numbers for visualization\r\n        const mapCategoryToNumber = (category?: string): number | null => {\r\n          if (!category) return null;\r\n          switch (category.toLowerCase()) {\r\n            // Depression categories\r\n            case 'no_to_mild':\r\n              return 1;\r\n            case 'mild_to_moderate':\r\n              return 2;\r\n            case 'moderate_to_severe':\r\n              return 3;\r\n            // Anxiety categories\r\n            case 'no_or_minimal':\r\n              return 1;\r\n            case 'moderate':\r\n              return 2;\r\n            case 'moderately_severe':\r\n              return 3;\r\n            case 'severe':\r\n              return 4;\r\n            default:\r\n              return null;\r\n          }\r\n        };\r\n\r\n        const depression = mapCategoryToNumber((session.prediction as any)?.predicted_score_depression);\r\n        const anxiety = mapCategoryToNumber((session.prediction as any)?.predicted_score_anxiety);\r\n        // Note: predicted_score is deprecated, no longer using overall score\r\n\r\n        return {\r\n          date: session.createdAt,\r\n          depression,\r\n          anxiety,\r\n          overall: null, // No longer using deprecated predicted_score\r\n          sessionId: session.sessionId\r\n        };\r\n      })\r\n      .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\r\n  }, [filteredSessions]);\r\n\r\n  // Calculate score distributions based on categorical data\r\n  const scoreDistribution = useMemo((): Record<string, ScoreDistribution[]> => {\r\n    const distributions: Record<string, ScoreDistribution[]> = {\r\n      depression: [],\r\n      anxiety: []\r\n    };\r\n\r\n    // Define possible categories and their colors\r\n    const categories = [\r\n      // Depression categories\r\n      { category: 'no_to_mild', label: 'No to Mild', color: 'bg-green-400' },\r\n      { category: 'mild_to_moderate', label: 'Mild to Moderate', color: 'bg-yellow-500' },\r\n      { category: 'moderate_to_severe', label: 'Moderate to Severe', color: 'bg-red-600' },\r\n      // Anxiety categories  \r\n      { category: 'no_or_minimal', label: 'No or Minimal', color: 'bg-green-400' },\r\n      { category: 'moderate', label: 'Moderate', color: 'bg-orange-500' },\r\n      { category: 'moderately_severe', label: 'Moderately Severe', color: 'bg-red-500' },\r\n      { category: 'severe', label: 'Severe', color: 'bg-red-700' }\r\n    ];\r\n\r\n    // Process depression scores\r\n    const depressionScores = filteredSessions\r\n      .map(session => (session.prediction as any)?.predicted_score_depression)\r\n      .filter(score => score !== undefined);\r\n\r\n    categories.forEach(cat => {\r\n      const count = depressionScores.filter(score => score === cat.category).length;\r\n      const percentage = depressionScores.length > 0 ? (count / depressionScores.length) * 100 : 0;\r\n      \r\n      if (count > 0) { // Only show categories that have data\r\n        distributions.depression.push({\r\n          category: cat.label,\r\n          count,\r\n          percentage,\r\n          color: cat.color\r\n        });\r\n      }\r\n    });\r\n\r\n    // Process anxiety scores\r\n    const anxietyScores = filteredSessions\r\n      .map(session => (session.prediction as any)?.predicted_score_anxiety)\r\n      .filter(score => score !== undefined);\r\n\r\n    categories.forEach(cat => {\r\n      const count = anxietyScores.filter(score => score === cat.category).length;\r\n      const percentage = anxietyScores.length > 0 ? (count / anxietyScores.length) * 100 : 0;\r\n      \r\n      if (count > 0) { // Only show categories that have data\r\n        distributions.anxiety.push({\r\n          category: cat.label,\r\n          count,\r\n          percentage,\r\n          color: cat.color\r\n        });\r\n      }\r\n    });\r\n\r\n    // Note: Overall scores (predicted_score) are deprecated and no longer processed\r\n\r\n    return distributions;\r\n  }, [filteredSessions]);\r\n\r\n  // Calculate trend analysis for categorical data\r\n  const trendAnalysis = useMemo((): Record<string, TrendAnalysis> => {\r\n    const trends: Record<string, TrendAnalysis> = {};\r\n    \r\n    // For categorical data, we'll analyze if the trend is toward more severe or less severe categories\r\n    const getCategorySeverity = (category?: string): number => {\r\n      if (!category) return 0;\r\n      switch (category.toLowerCase()) {\r\n        // Depression categories: no_to_mild, mild_to_moderate, moderate_to_severe\r\n        case 'no_to_mild':\r\n          return 1;\r\n        case 'mild_to_moderate':\r\n          return 2;\r\n        case 'moderate_to_severe':\r\n          return 3;\r\n        // Anxiety categories: no_or_minimal, moderate, moderately_severe, severe\r\n        case 'no_or_minimal':\r\n          return 1;\r\n        case 'moderate':\r\n          return 2;\r\n        case 'moderately_severe':\r\n          return 3;\r\n        case 'severe':\r\n          return 4;\r\n        default:\r\n          return 0;\r\n      }\r\n    };\r\n\r\n    // Analyze depression trend\r\n    const depressionCategories = filteredSessions\r\n      .map(session => (session.prediction as any)?.predicted_score_depression)\r\n      .filter(cat => cat !== undefined);\r\n\r\n    if (depressionCategories.length < 2) {\r\n      trends.depression = { direction: 'stable', change: 0, period: 'insufficient data' };\r\n    } else {\r\n      const severityScores = depressionCategories.map(getCategorySeverity);\r\n      const firstHalf = severityScores.slice(0, Math.floor(severityScores.length / 2));\r\n      const secondHalf = severityScores.slice(Math.floor(severityScores.length / 2));\r\n\r\n      const firstAvg = firstHalf.reduce((a, b) => a + b, 0) / firstHalf.length;\r\n      const secondAvg = secondHalf.reduce((a, b) => a + b, 0) / secondHalf.length;\r\n      const change = secondAvg - firstAvg;\r\n      \r\n      trends.depression = {\r\n        direction: Math.abs(change) < 0.5 ? 'stable' : change < 0 ? 'improving' : 'worsening',\r\n        change: Math.abs(change),\r\n        period: `${filteredSessions.length} sessions`\r\n      };\r\n    }\r\n\r\n    // Analyze anxiety trend\r\n    const anxietyCategories = filteredSessions\r\n      .map(session => (session.prediction as any)?.predicted_score_anxiety)\r\n      .filter(cat => cat !== undefined);\r\n\r\n    if (anxietyCategories.length < 2) {\r\n      trends.anxiety = { direction: 'stable', change: 0, period: 'insufficient data' };\r\n    } else {\r\n      const severityScores = anxietyCategories.map(getCategorySeverity);\r\n      const firstHalf = severityScores.slice(0, Math.floor(severityScores.length / 2));\r\n      const secondHalf = severityScores.slice(Math.floor(severityScores.length / 2));\r\n\r\n      const firstAvg = firstHalf.reduce((a, b) => a + b, 0) / firstHalf.length;\r\n      const secondAvg = secondHalf.reduce((a, b) => a + b, 0) / secondHalf.length;\r\n      const change = secondAvg - firstAvg;\r\n      \r\n      trends.anxiety = {\r\n        direction: Math.abs(change) < 0.5 ? 'stable' : change < 0 ? 'improving' : 'worsening',\r\n        change: Math.abs(change),\r\n        period: `${filteredSessions.length} sessions`\r\n      };\r\n    }\r\n\r\n    // Overall trend (placeholder)\r\n    trends.overall = { direction: 'stable', change: 0, period: 'coming soon' };\r\n\r\n    return trends;\r\n  }, [filteredSessions]);\r\n\r\n  // Calculate statistics\r\n  const statistics = useMemo(() => {\r\n    const stats = {\r\n      totalSessions: filteredSessions.length,\r\n      avgDepression: 0,\r\n      avgAnxiety: 0,\r\n      avgOverall: 0,\r\n      latestSession: null as SessionData | null,\r\n      improvementSessions: 0\r\n    };\r\n\r\n    if (filteredSessions.length === 0) return stats;\r\n\r\n    // For categorical data, we'll show the most common category instead of averages\r\n    const depressionCategories = filteredSessions\r\n      .map(s => s.prediction?.predictedScoreDepression)\r\n      .filter(s => s !== undefined);\r\n    \r\n    const anxietyCategories = filteredSessions\r\n      .map(s => s.prediction?.predictedScoreAnxiety)\r\n      .filter(s => s !== undefined);\r\n\r\n    // Calculate mode (most frequent category) for depression\r\n    if (depressionCategories.length > 0) {\r\n      const depressionCounts: Record<string, number> = {};\r\n      depressionCategories.forEach(cat => {\r\n        depressionCounts[cat!] = (depressionCounts[cat!] || 0) + 1;\r\n      });\r\n      const mostCommonDepression = Object.entries(depressionCounts)\r\n        .sort(([,a], [,b]) => b - a)[0][0];\r\n      stats.avgDepression = depressionCounts[mostCommonDepression];\r\n    }\r\n\r\n    // Calculate mode (most frequent category) for anxiety\r\n    if (anxietyCategories.length > 0) {\r\n      const anxietyCounts: Record<string, number> = {};\r\n      anxietyCategories.forEach(cat => {\r\n        anxietyCounts[cat!] = (anxietyCounts[cat!] || 0) + 1;\r\n      });\r\n      const mostCommonAnxiety = Object.entries(anxietyCounts)\r\n        .sort(([,a], [,b]) => b - a)[0][0];\r\n      stats.avgAnxiety = anxietyCounts[mostCommonAnxiety];\r\n    }\r\n    \r\n    stats.latestSession = filteredSessions.sort((a, b) => \r\n      new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\r\n    )[0];\r\n\r\n    // Improvement rate will be calculated later - for now set to 0\r\n    stats.improvementSessions = 0;\r\n\r\n    return stats;\r\n  }, [filteredSessions]);\r\n\r\n  // Handle filter changes\r\n  const updateFilter = useCallback((key: keyof PredictionFilters, value: any) => {\r\n    setFilters(prev => ({ ...prev, [key]: value }));\r\n    announceToScreenReader(`Filter ${key} changed to ${value}`);\r\n  }, [announceToScreenReader]);\r\n\r\n  // Download predictions data\r\n  const downloadPredictions = useCallback(() => {\r\n    const dataStr = JSON.stringify(filteredSessions, null, 2);\r\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n    const url = URL.createObjectURL(dataBlob);\r\n    \r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `predictions-${new Date().toISOString().split('T')[0]}.json`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n    \r\n    announceToScreenReader('Predictions data download started');\r\n  }, [filteredSessions, announceToScreenReader]);\r\n\r\n  // Trend indicator component\r\n  const TrendIndicator: React.FC<{ trend: TrendAnalysis; label: string }> = ({ trend, label }) => {\r\n    const Icon = trend.direction === 'improving' ? TrendingDown : \r\n                 trend.direction === 'worsening' ? TrendingUp : Activity;\r\n    const colorClass = trend.direction === 'improving' ? 'text-green-600 dark:text-green-400' :\r\n                       trend.direction === 'worsening' ? 'text-red-600 dark:text-red-400' :\r\n                       'text-gray-600 dark:text-gray-400';\r\n\r\n    return (\r\n      <div className=\"flex items-center space-x-2\">\r\n        <Icon className={`w-4 h-4 ${colorClass}`} aria-hidden=\"true\" />\r\n        <span className=\"text-sm text-gray-700 dark:text-gray-300\">{label}</span>\r\n        <span className={`text-sm font-medium ${colorClass} capitalize`}>\r\n          {trend.direction}\r\n          {trend.period === 'insufficient data' \r\n            ? ' (need more sessions)'\r\n            : trend.period === 'coming soon' \r\n              ? ' (analysis coming soon)'\r\n              : ` (${trend.period})`\r\n          }\r\n        </span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Simple line chart component\r\n  const SimpleLineChart: React.FC<{ \r\n    data: ChartDataPoint[]; \r\n    type: 'depression' | 'anxiety' | 'overall';\r\n    onBarClick: (sessionId: string) => void;\r\n  }> = ({ data, type, onBarClick }) => {\r\n    const scores = data.map(d => d[type]).filter(s => s !== null) as number[];\r\n    if (scores.length === 0) return <div className=\"text-center text-gray-500 py-8\">No data available</div>;\r\n\r\n    const maxScore = Math.max(...scores);\r\n    const minScore = Math.min(...scores);\r\n    const range = maxScore - minScore || 1;\r\n\r\n    // Function to convert numeric score back to category name\r\n    const getScoreCategoryName = (score: number): string => {\r\n      switch (score) {\r\n        case 1: return 'No to Mild / No or Minimal';\r\n        case 2: return 'Mild to Moderate / Moderate';\r\n        case 3: return 'Moderate to Severe / Moderately Severe';\r\n        case 4: return 'Severe';\r\n        default: return 'Unknown';\r\n      }\r\n    };\r\n\r\n    // Function to get category color based on score and chart type\r\n    const getCategoryColor = (score: number, type: 'depression' | 'anxiety' | 'overall'): string => {\r\n      if (type === 'depression') {\r\n        switch (score) {\r\n          case 1: return 'bg-blue-400';  // no_to_mild\r\n          case 2: return 'bg-blue-600';  // mild_to_moderate\r\n          case 3: return 'bg-blue-800';  // moderate_to_severe\r\n          default: return 'bg-blue-500';\r\n        }\r\n      } else if (type === 'anxiety') {\r\n        switch (score) {\r\n          case 1: return 'bg-purple-400'; // no_or_minimal\r\n          case 2: return 'bg-purple-600'; // moderate\r\n          case 3: return 'bg-purple-700'; // moderately_severe\r\n          case 4: return 'bg-purple-900'; // severe\r\n          default: return 'bg-purple-500';\r\n        }\r\n      } else {\r\n        switch (score) {\r\n          case 1: return 'bg-green-400';\r\n          case 2: return 'bg-green-600';\r\n          case 3: return 'bg-green-700';\r\n          case 4: return 'bg-green-800';\r\n          default: return 'bg-green-500';\r\n        }\r\n      }\r\n    };\r\n\r\n    // Legend data - updated to match the chart colors\r\n    const getLegendItems = (chartType: 'depression' | 'anxiety' | 'overall') => {\r\n      const baseItems = [\r\n        { score: 1, label: 'No/Minimal' },\r\n        { score: 2, label: 'Mild' },\r\n        { score: 3, label: 'Moderate' },\r\n        { score: 4, label: 'Mod-Severe' },\r\n        { score: 5, label: 'Severe' }\r\n      ];\r\n      \r\n      return baseItems.map(item => ({\r\n        ...item,\r\n        color: getCategoryColor(item.score, chartType)\r\n      }));\r\n    };\r\n\r\n    // Filter legend to only show categories that exist in the data\r\n    const usedScores = new Set(scores);\r\n    const legendItems = getLegendItems(type);\r\n    const activeLegendItems = legendItems.filter(item => usedScores.has(item.score));\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"h-32 flex items-end space-x-1 px-4 py-2 mb-4\">\r\n          {data.map((dataPoint, index) => {\r\n            const score = dataPoint[type];\r\n            if (score === null) return null;\r\n            \r\n            const height = ((score - minScore) / range) * 100;\r\n            const categoryColor = getCategoryColor(score, type);\r\n            const categoryName = getScoreCategoryName(score);\r\n            const dateStr = new Date(dataPoint.date).toLocaleDateString();\r\n            \r\n            return (\r\n              <div\r\n                key={index}\r\n                className={`flex-1 ${categoryColor} opacity-70 hover:opacity-100 hover:scale-105 transition-all duration-200 rounded-t cursor-pointer relative group chart-bar-dynamic`}\r\n                style={{ '--chart-height': `${Math.max(height, 8)}%` } as React.CSSProperties}\r\n                onClick={() => onBarClick(dataPoint.sessionId)}\r\n                role=\"button\"\r\n                tabIndex={0}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter' || e.key === ' ') {\r\n                    e.preventDefault();\r\n                    onBarClick(dataPoint.sessionId);\r\n                  }\r\n                }}\r\n                aria-label={`View session details for ${categoryName} score on ${dateStr}`}\r\n              >\r\n                {/* Tooltip */}\r\n                <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10\">\r\n                  <div className=\"font-medium\">{categoryName}</div>\r\n                  <div className=\"text-gray-300\">{dateStr}</div>\r\n                  <div className=\"text-gray-300\">Session: {dataPoint.sessionId.slice(-8)}</div>\r\n                  <div className=\"text-gray-400 text-xs mt-1\">Click to view details</div>\r\n                  {/* Tooltip arrow */}\r\n                  <div className=\"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900\"></div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Legend */}\r\n        {activeLegendItems.length > 0 && (\r\n          <div className=\"px-4\">\r\n            <div className=\"flex flex-wrap items-center gap-3 text-xs\">\r\n              <span className=\"text-gray-600 dark:text-gray-400 font-medium\">Legend:</span>\r\n              {activeLegendItems.map((item) => (\r\n                <div key={item.score} className=\"flex items-center gap-1\">\r\n                  <div className={`w-3 h-3 ${item.color} rounded`}></div>\r\n                  <span className=\"text-gray-700 dark:text-gray-300\">{item.label}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        <div className=\"flex items-center justify-center py-16\">\r\n          <RefreshCw className=\"w-8 h-8 text-blue-600 animate-spin mr-3\" aria-hidden=\"true\" />\r\n          <span className=\"text-lg text-gray-900 dark:text-white\">Loading predictions...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6\">\r\n          <div className=\"flex items-center\">\r\n            <AlertCircle className=\"w-5 h-5 text-red-500 mr-3\" aria-hidden=\"true\" />\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-red-900 dark:text-red-200\">\r\n                Error Loading Predictions\r\n              </h3>\r\n              <p className=\"text-red-700 dark:text-red-300 mt-1\">{error.message}</p>\r\n              <button\r\n                type=\"button\"\r\n                onClick={loadPredictions}\r\n                className=\"mt-4 btn btn--primary\"\r\n                aria-label=\"Retry loading predictions\"\r\n              >\r\n                Try Again\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\r\n            My Predictions\r\n          </h1>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mt-1\">\r\n            Analyze your mental health trends and insights over time\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setShowFilters(!showFilters)}\r\n            className=\"btn btn--secondary\"\r\n            aria-expanded={showFilters ? 'true' : 'false'}\r\n            aria-label={`${showFilters ? 'Hide' : 'Show'} filter options`}\r\n          >\r\n            <Filter className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n            Filters\r\n            {showFilters ? <ChevronUp className=\"w-4 h-4 ml-2\" /> : <ChevronDown className=\"w-4 h-4 ml-2\" />}\r\n          </button>\r\n          \r\n          <button\r\n            type=\"button\"\r\n            onClick={loadPredictions}\r\n            className=\"btn btn--secondary\"\r\n            aria-label=\"Refresh predictions data\"\r\n          >\r\n            <RefreshCw className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n            Refresh\r\n          </button>\r\n          \r\n          <button\r\n            type=\"button\"\r\n            onClick={downloadPredictions}\r\n            className=\"btn btn--primary\"\r\n            disabled={filteredSessions.length === 0}\r\n            aria-label=\"Download predictions data\"\r\n          >\r\n            <Download className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n            Download\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      {showFilters && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div>\r\n              <label htmlFor=\"date-range\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Date Range\r\n              </label>\r\n              <select\r\n                id=\"date-range\"\r\n                value={filters.dateRange}\r\n                onChange={(e) => updateFilter('dateRange', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Time</option>\r\n                <option value=\"week\">Past Week</option>\r\n                <option value=\"month\">Past Month</option>\r\n                <option value=\"quarter\">Past Quarter</option>\r\n                <option value=\"year\">Past Year</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label htmlFor=\"score-type\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Focus Score\r\n              </label>\r\n              <select\r\n                id=\"score-type\"\r\n                value={filters.scoreType}\r\n                onChange={(e) => updateFilter('scoreType', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Scores</option>\r\n                <option value=\"depression\">Depression</option>\r\n                <option value=\"anxiety\">Anxiety</option>\r\n                <option value=\"overall\">Overall</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div className=\"flex items-end\">\r\n              <label className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={filters.showTrends}\r\n                  onChange={(e) => updateFilter('showTrends', e.target.checked)}\r\n                  className=\"form__input form__input--checkbox rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-2\"\r\n                />\r\n                <span className=\"text-sm text-gray-700 dark:text-gray-300\">Show trend analysis</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {filteredSessions.length === 0 ? (\r\n        <div className=\"text-center py-16 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n          <Brain className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" aria-hidden=\"true\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\r\n            No Prediction Data Available\r\n          </h3>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\r\n            {sessions.length === 0 \r\n              ? \"You haven't completed any analysis sessions yet.\"\r\n              : \"No sessions found for the selected date range.\"\r\n            }\r\n          </p>\r\n          <Link to=\"/upload\" className=\"btn btn--primary\">\r\n            Start Your First Analysis\r\n          </Link>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* Statistics Overview */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <Activity className=\"w-8 h-8 text-blue-600\" aria-hidden=\"true\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Total Sessions</p>\r\n                  <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">{statistics.totalSessions}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <Brain className=\"w-8 h-8 text-purple-600\" aria-hidden=\"true\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Depression (Most Common)</p>\r\n                  <p className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n                    {(() => {\r\n                      const depressionCategories = filteredSessions\r\n                        .map(s => (s.prediction as any)?.predicted_score_depression)\r\n                        .filter(s => s !== undefined);\r\n                      \r\n                      if (depressionCategories.length === 0) return '‚Äî';\r\n                      \r\n                      const counts: Record<string, number> = {};\r\n                      depressionCategories.forEach(cat => {\r\n                        counts[cat!] = (counts[cat!] || 0) + 1;\r\n                      });\r\n                      \r\n                      const mostCommon = Object.entries(counts)\r\n                        .sort(([,a], [,b]) => b - a)[0][0];\r\n                      \r\n                      return mostCommon.replace(/_/g, ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase());\r\n                    })()}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <Heart className=\"w-8 h-8 text-red-600\" aria-hidden=\"true\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Anxiety (Most Common)</p>\r\n                  <p className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n                    {(() => {\r\n                      const anxietyCategories = filteredSessions\r\n                        .map(s => (s.prediction as any)?.predicted_score_anxiety)\r\n                        .filter(s => s !== undefined);\r\n                      \r\n                      if (anxietyCategories.length === 0) return '‚Äî';\r\n                      \r\n                      const counts: Record<string, number> = {};\r\n                      anxietyCategories.forEach(cat => {\r\n                        counts[cat!] = (counts[cat!] || 0) + 1;\r\n                      });\r\n                      \r\n                      const mostCommon = Object.entries(counts)\r\n                        .sort(([,a], [,b]) => b - a)[0][0];\r\n                      \r\n                      return mostCommon.replace(/_/g, ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase());\r\n                    })()}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Improvement Rate section hidden - feature not implemented yet\r\n            <div className=\"bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 p-6 opacity-60\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <Activity className=\"w-8 h-8 text-gray-500\" aria-hidden=\"true\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Improvement Rate</p>\r\n                  <p className=\"text-lg font-semibold text-gray-500 dark:text-gray-400\">\r\n                    Coming Soon\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\r\n                    Feature in development\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            */}\r\n          </div>\r\n\r\n          {/* Charts Section */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            {/* Score Trends Chart */}\r\n            {(filters.scoreType === 'all' || filters.scoreType === 'depression') && (\r\n              <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n                  <BarChart3 className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n                  Depression Score Trend\r\n                </h3>\r\n                <SimpleLineChart data={chartData} type=\"depression\" onBarClick={handleBarClick} />\r\n                {filters.showTrends && (\r\n                  <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                    <TrendIndicator trend={trendAnalysis.depression} label=\"Trend:\" />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {(filters.scoreType === 'all' || filters.scoreType === 'anxiety') && (\r\n              <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n                  <PieChart className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n                  Anxiety Score Trend\r\n                </h3>\r\n                <SimpleLineChart data={chartData} type=\"anxiety\" onBarClick={handleBarClick} />\r\n                {filters.showTrends && (\r\n                  <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                    <TrendIndicator trend={trendAnalysis.anxiety} label=\"Trend:\" />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Score Distribution */}\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n              <BarChart3 className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n              Score Distribution\r\n            </h3>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {Object.entries(scoreDistribution).map(([scoreType, distribution]) => (\r\n                <div key={scoreType}>\r\n                  <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 capitalize\">\r\n                    {scoreType} Scores\r\n                  </h4>\r\n                  <div className=\"space-y-2\">\r\n                    {distribution.map((item) => (\r\n                      <div key={item.category} className=\"flex items-center\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex justify-between text-xs mb-1\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">{item.category}</span>\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">{item.count} ({item.percentage.toFixed(1)}%)</span>\r\n                          </div>\r\n                          <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2\">\r\n                            <div\r\n                              className={`h-2 rounded-full ${item.color} progress-dynamic progress-animated`}\r\n                              style={{ '--progress-width': `${item.percentage}%` } as React.CSSProperties}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Recent Sessions */}\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\">\r\n                <Clock className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n                Recent Analysis Sessions\r\n              </h3>\r\n              <Link to=\"/sessions\" className=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 text-sm\">\r\n                View All Sessions ‚Üí\r\n              </Link>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              {filteredSessions.slice(0, 5).map((session) => (\r\n                <div key={session.sessionId} className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <div className={`w-2 h-2 rounded-full ${\r\n                        session.status === 'succeeded' ? 'bg-green-500' :\r\n                        session.status === 'processing' ? 'bg-blue-500' :\r\n                        session.status === 'failed' ? 'bg-red-500' : 'bg-gray-500'\r\n                      }`} />\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                          {session.audioFileName || `Session ${session.sessionId.slice(-8)}`}\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                          {formatRelativeTime(session.createdAt)}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-4\">\r\n                    {(session.prediction as any)?.predicted_score_depression && (\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Depression</p>\r\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                          {(session.prediction as any).predicted_score_depression.replace(/_/g, ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase())}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                    {(session.prediction as any)?.predicted_score_anxiety && (\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Anxiety</p>\r\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                          {(session.prediction as any).predicted_score_anxiety.replace(/_/g, ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase())}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                    <Link\r\n                      to={`/sessions/${session.sessionId}`}\r\n                      className=\"text-blue-600 hover:text-blue-800 dark:text-blue-400\"\r\n                      aria-label={`View session ${session.sessionId}`}\r\n                    >\r\n                      <Eye className=\"w-4 h-4\" aria-hidden=\"true\" />\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Predictions;\r\n","import React, { useState, useCallback, useEffect } from 'react';\r\nimport { RefreshCw, AlertCircle, TrendingUp, TrendingDown, Users, Activity, Heart, Target, Clock } from 'lucide-react';\r\nimport { useAccessibility } from '../hooks/useAccessibility';\r\nimport { apiService } from '../services/api';\r\nimport type { SessionData as ImportedSessionData } from '../types';\r\n\r\n// Types for analytics data\r\ninterface AnalyticsData {\r\n  overview: {\r\n    totalSessions: number;\r\n    uniqueUsers: number;\r\n    successRate: number;\r\n    avgSessionsPerUser: number;\r\n    recentActivity: number;\r\n  };\r\n  sessionStatus: {\r\n    succeeded: number;\r\n    failed: number;\r\n    processing: number;\r\n    total: number;\r\n  };\r\n  riskLevels: {\r\n    low: number;\r\n    medium: number;\r\n    high: number;\r\n    unknown: number;\r\n    total: number;\r\n  };\r\n  predictions: {\r\n    depression: {\r\n      no_to_mild: number;\r\n      mild_to_moderate: number;\r\n      moderate_to_severe: number;\r\n      severe: number;\r\n      total: number;\r\n    };\r\n    anxiety: {\r\n      no_or_minimal: number;\r\n      mild: number;\r\n      moderate: number;\r\n      moderately_severe: number;\r\n      severe: number;\r\n      total: number;\r\n    };\r\n  };\r\n  timeData: Array<{\r\n    date: string;\r\n    count: number;\r\n  }>;\r\n  riskDistribution: {\r\n    low: number;\r\n    medium: number;\r\n    high: number;\r\n    unknown: number;\r\n  };\r\n  userStats: Array<{\r\n    userId: string;\r\n    totalSessions: number;\r\n    successfulSessions: number;\r\n    successRate: number;\r\n    avgConfidence: number;\r\n    riskDistribution: {\r\n      low: number;\r\n      medium: number;\r\n      high: number;\r\n      unknown: number;\r\n    };\r\n    lastActivity: string;\r\n    depressionScores: {\r\n      no_to_mild: number;\r\n      mild_to_moderate: number;\r\n      moderate_to_severe: number;\r\n      severe: number;\r\n    };\r\n    anxietyScores: {\r\n      no_or_minimal: number;\r\n      mild: number;\r\n      moderate: number;\r\n      moderately_severe: number;\r\n      severe: number;\r\n    };\r\n  }>;\r\n}\r\n\r\n// Utility function to calculate percentage\r\nconst getPercentage = (value: number, total: number): number => {\r\n  return total > 0 ? Math.round((value / total) * 100) : 0;\r\n};\r\n\r\n// Function to aggregate session data into analytics\r\nconst aggregateSessionData = (allSessions: ImportedSessionData[]): AnalyticsData => {\r\n  const totalSessions = allSessions.length;\r\n  const uniqueUsers = new Set(allSessions.map(s => s.userId)).size;\r\n  \r\n  const completedSessions = allSessions.filter(s => \r\n    s.status === 'succeeded' && s.prediction\r\n  );\r\n  \r\n  const failedSessions = allSessions.filter(s => \r\n    s.status === 'failed'\r\n  );\r\n  \r\n  const processingSessions = allSessions.filter(s => \r\n    s.status === 'processing'\r\n  );\r\n\r\n  // Calculate success rate and average sessions per user\r\n  const successRate = getPercentage(completedSessions.length, totalSessions);\r\n  const avgSessionsPerUser = uniqueUsers > 0 ? Math.round((totalSessions / uniqueUsers) * 10) / 10 : 0;\r\n  \r\n  // Calculate recent activity (sessions in last 24 hours)\r\n  const twentyFourHoursAgo = new Date(Date.now() - 24 * 60 * 60 * 1000);\r\n  const recentActivity = allSessions.filter(s => \r\n    new Date(s.createdAt) > twentyFourHoursAgo\r\n  ).length;\r\n\r\n  // Risk level distribution\r\n  const riskCounts = {\r\n    low: 0,\r\n    medium: 0,\r\n    high: 0,\r\n    unknown: 0,\r\n  };\r\n\r\n  allSessions.forEach(session => {\r\n    const riskLevel = session.analysisResults?.riskLevel || 'unknown';\r\n    if (riskLevel in riskCounts) {\r\n      riskCounts[riskLevel as keyof typeof riskCounts]++;\r\n    }\r\n  });\r\n\r\n  // Depression score distribution\r\n  const depressionCounts = {\r\n    no_to_mild: 0,\r\n    mild_to_moderate: 0,\r\n    moderate_to_severe: 0,\r\n    severe: 0,\r\n  };\r\n\r\n  // Anxiety score distribution\r\n  const anxietyCounts = {\r\n    no_or_minimal: 0,\r\n    mild: 0,\r\n    moderate: 0,\r\n    moderately_severe: 0,\r\n    severe: 0,\r\n  };\r\n\r\n  completedSessions.forEach(session => {\r\n    if (session.prediction) {\r\n      const depScore = session.prediction.predictedScoreDepression;\r\n      if (depScore && depScore in depressionCounts) {\r\n        depressionCounts[depScore as keyof typeof depressionCounts]++;\r\n      }\r\n\r\n      const anxScore = session.prediction.predictedScoreAnxiety;\r\n      if (anxScore && anxScore in anxietyCounts) {\r\n        anxietyCounts[anxScore as keyof typeof anxietyCounts]++;\r\n      }\r\n    }\r\n  });\r\n\r\n  // Time series data (last 7 days)\r\n  const timeData = [];\r\n  for (let i = 6; i >= 0; i--) {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() - i);\r\n    const dateStr = date.toISOString().split('T')[0];\r\n    \r\n    const sessionsOnDate = allSessions.filter(s => \r\n      s.createdAt.split('T')[0] === dateStr\r\n    ).length;\r\n    \r\n    timeData.push({\r\n      date: dateStr,\r\n      count: sessionsOnDate,\r\n    });\r\n  }\r\n\r\n  // Calculate per-user statistics\r\n  const userStatsMap = new Map<string, {\r\n    totalSessions: number;\r\n    successfulSessions: number;\r\n    sessions: ImportedSessionData[];\r\n  }>();\r\n\r\n  // Group sessions by user\r\n  allSessions.forEach(session => {\r\n    if (!userStatsMap.has(session.userId)) {\r\n      userStatsMap.set(session.userId, {\r\n        totalSessions: 0,\r\n        successfulSessions: 0,\r\n        sessions: [],\r\n      });\r\n    }\r\n    const userStats = userStatsMap.get(session.userId)!;\r\n    userStats.totalSessions++;\r\n    userStats.sessions.push(session);\r\n    if (session.status === 'succeeded' && session.prediction) {\r\n      userStats.successfulSessions++;\r\n    }\r\n  });\r\n\r\n  // Calculate detailed user statistics\r\n  const userStats = Array.from(userStatsMap.entries()).map(([userId, stats]) => {\r\n    const successRate = getPercentage(stats.successfulSessions, stats.totalSessions);\r\n    \r\n    // Calculate average confidence for this user\r\n    const successfulSessions = stats.sessions.filter(s => \r\n      s.status === 'succeeded' && s.prediction && s.analysisResults?.confidence\r\n    );\r\n    const avgConfidence = successfulSessions.length > 0 \r\n      ? successfulSessions.reduce((sum, s) => sum + (s.analysisResults?.confidence || 0), 0) / successfulSessions.length\r\n      : 0;\r\n\r\n    // Risk distribution for this user\r\n    const userRiskDistribution = {\r\n      low: 0,\r\n      medium: 0,\r\n      high: 0,\r\n      unknown: 0,\r\n    };\r\n\r\n    stats.sessions.forEach(session => {\r\n      const riskLevel = session.analysisResults?.riskLevel || 'unknown';\r\n      if (riskLevel in userRiskDistribution) {\r\n        userRiskDistribution[riskLevel as keyof typeof userRiskDistribution]++;\r\n      }\r\n    });\r\n\r\n    // Depression and anxiety score distributions for this user\r\n    const userDepressionScores = {\r\n      no_to_mild: 0,\r\n      mild_to_moderate: 0,\r\n      moderate_to_severe: 0,\r\n      severe: 0,\r\n    };\r\n\r\n    const userAnxietyScores = {\r\n      no_or_minimal: 0,\r\n      mild: 0,\r\n      moderate: 0,\r\n      moderately_severe: 0,\r\n      severe: 0,\r\n    };\r\n\r\n    successfulSessions.forEach(session => {\r\n      if (session.prediction) {\r\n        const depScore = session.prediction.predictedScoreDepression;\r\n        if (depScore && depScore in userDepressionScores) {\r\n          userDepressionScores[depScore as keyof typeof userDepressionScores]++;\r\n        }\r\n\r\n        const anxScore = session.prediction.predictedScoreAnxiety;\r\n        if (anxScore && anxScore in userAnxietyScores) {\r\n          userAnxietyScores[anxScore as keyof typeof userAnxietyScores]++;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Find last activity\r\n    const lastActivity = stats.sessions.reduce((latest, session) => {\r\n      return new Date(session.updatedAt) > new Date(latest) ? session.updatedAt : latest;\r\n    }, stats.sessions[0]?.updatedAt || new Date().toISOString());\r\n\r\n    return {\r\n      userId,\r\n      totalSessions: stats.totalSessions,\r\n      successfulSessions: stats.successfulSessions,\r\n      successRate,\r\n      avgConfidence: Math.round(avgConfidence * 100) / 100,\r\n      riskDistribution: userRiskDistribution,\r\n      lastActivity,\r\n      depressionScores: userDepressionScores,\r\n      anxietyScores: userAnxietyScores,\r\n    };\r\n  }).sort((a, b) => b.totalSessions - a.totalSessions); // Sort by total sessions desc\r\n\r\n  return {\r\n    overview: {\r\n      totalSessions,\r\n      uniqueUsers,\r\n      successRate,\r\n      avgSessionsPerUser,\r\n      recentActivity,\r\n    },\r\n    sessionStatus: {\r\n      succeeded: completedSessions.length,\r\n      failed: failedSessions.length,\r\n      processing: processingSessions.length,\r\n      total: totalSessions,\r\n    },\r\n    riskLevels: {\r\n      ...riskCounts,\r\n      total: totalSessions,\r\n    },\r\n    predictions: {\r\n      depression: {\r\n        ...depressionCounts,\r\n        total: completedSessions.length,\r\n      },\r\n      anxiety: {\r\n        ...anxietyCounts,\r\n        total: completedSessions.length,\r\n      },\r\n    },\r\n    timeData,\r\n    riskDistribution: riskCounts,\r\n    userStats,\r\n  };\r\n};\r\n\r\n// Types for chart components\r\ninterface AppError {\r\n  message: string;\r\n  code?: string;\r\n}\r\n\r\n// Metric card component\r\nconst MetricCard: React.FC<{\r\n  title: string;\r\n  value: string | number;\r\n  subtitle?: string;\r\n  icon: React.ReactNode;\r\n  trend?: 'up' | 'down' | 'neutral';\r\n  color?: string;\r\n}> = ({ title, value, subtitle, icon, trend, color = 'text-blue-600' }) => (\r\n  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n    <div className=\"flex items-center justify-between\">\r\n      <div className=\"flex-1\">\r\n        <p className=\"text-sm text-gray-600 dark:text-gray-400 font-medium\">{title}</p>\r\n        <p className={`text-2xl font-bold ${color} dark:text-white mt-1`}>{value}</p>\r\n        {subtitle && (\r\n          <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">{subtitle}</p>\r\n        )}\r\n      </div>\r\n      <div className={`p-3 rounded-full bg-gray-100 dark:bg-gray-700 ${color}`}>\r\n        {icon}\r\n      </div>\r\n    </div>\r\n    {trend && (\r\n      <div className=\"flex items-center mt-4\">\r\n        {trend === 'up' && <TrendingUp className=\"h-4 w-4 text-green-500 mr-1\" />}\r\n        {trend === 'down' && <TrendingDown className=\"h-4 w-4 text-red-500 mr-1\" />}\r\n        <span className={`text-sm ${\r\n          trend === 'up' ? 'text-green-600' : trend === 'down' ? 'text-red-600' : 'text-gray-500'\r\n        }`}>\r\n          {trend === 'up' ? 'Trending up' : trend === 'down' ? 'Trending down' : 'Stable'}\r\n        </span>\r\n      </div>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// Distribution chart component\r\nconst DistributionChart: React.FC<{\r\n  title: string;\r\n  data: Array<{ label: string; value: number; color: string }>;\r\n  total: number;\r\n}> = ({ title, data, total }) => (\r\n  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n    <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">{title}</h3>\r\n    <div className=\"space-y-3\">\r\n      {data.map((item, index) => {\r\n        const percentage = getPercentage(item.value, total);\r\n        return (\r\n          <div key={index}>\r\n            <div className=\"flex justify-between text-sm mb-1\">\r\n              <span className=\"text-gray-600 dark:text-gray-400\">{item.label}</span>\r\n              <span className=\"text-gray-900 dark:text-white font-medium\">\r\n                {item.value} ({percentage}%)\r\n              </span>\r\n            </div>\r\n            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2\">\r\n              <div\r\n                className={`h-2 rounded-full transition-all duration-500 ${item.color}`}\r\n                style={{ width: `${percentage}%` }}\r\n                role=\"progressbar\"\r\n                aria-label={`${item.label}: ${item.value} (${percentage}%)`}\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// Time series chart component (elegant line chart)\r\nconst TimeSeriesChart: React.FC<{\r\n  title: string;\r\n  data: Array<{ date: string; count: number }>;\r\n}> = ({ title, data }) => {\r\n  const maxCount = Math.max(...data.map(d => d.count), 1);\r\n  const minCount = 0; // Start bars from zero for better visual comparison\r\n  const range = maxCount - minCount || 1;\r\n  \r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n      <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-6\">{title}</h3>\r\n      \r\n      {/* Chart Container */}\r\n      <div className=\"relative h-48\">\r\n        {/* SVG Chart */}\r\n        <svg\r\n          className=\"absolute inset-0 w-full h-full\"\r\n          viewBox=\"0 0 100 100\"\r\n          preserveAspectRatio=\"none\"\r\n        >\r\n          {/* Grid lines */}\r\n          <defs>\r\n            <pattern id=\"grid\" width=\"20\" height=\"20\" patternUnits=\"userSpaceOnUse\">\r\n              <path\r\n                d=\"M 20 0 L 0 0 0 20\"\r\n                fill=\"none\"\r\n                stroke=\"rgb(229 231 235)\"\r\n                strokeWidth=\"0.5\"\r\n                className=\"dark:stroke-gray-600\"\r\n              />\r\n            </pattern>\r\n            <linearGradient id=\"barGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n              <stop offset=\"0%\" stopColor=\"rgb(59 130 246)\" stopOpacity=\"0.8\"/>\r\n              <stop offset=\"100%\" stopColor=\"rgb(59 130 246)\" stopOpacity=\"0.6\"/>\r\n            </linearGradient>\r\n          </defs>\r\n          \r\n          {/* Grid */}\r\n          <rect width=\"100\" height=\"100\" fill=\"url(#grid)\" />\r\n          \r\n          {/* Thin Vertical Bars */}\r\n          {data.map((point, index) => {\r\n            const barWidth = 80 / data.length; // Thin bars with spacing\r\n            const x = (index / (data.length - 1)) * (100 - barWidth) + barWidth / 2;\r\n            const barHeight = ((point.count - minCount) / range) * 95; // 95% of container height\r\n            const y = 100 - barHeight;\r\n            \r\n            return (\r\n              <rect\r\n                key={index}\r\n                x={x - barWidth / 2}\r\n                y={y}\r\n                width={barWidth * 0.6} // Make bars a little thicker\r\n                height={barHeight}\r\n                fill=\"url(#barGradient)\"\r\n                stroke=\"rgb(59 130 246)\"\r\n                strokeWidth=\"0.2\"\r\n                className=\"transition-all duration-300 hover:opacity-80\"\r\n                rx=\"0.5\" // Slightly rounded corners\r\n              />\r\n            );\r\n          })}\r\n        </svg>\r\n      </div>\r\n      \r\n      {/* X-axis labels */}\r\n      <div className=\"flex items-center justify-between mt-4 px-2\">\r\n        {data.map((item, index) => {\r\n          const date = new Date(item.date);\r\n          const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });\r\n          const monthDay = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n          \r\n          return (\r\n            <div key={index} className=\"text-center flex-1\">\r\n              <div className=\"text-xs font-medium text-gray-900 dark:text-white\">\r\n                {dayName}\r\n              </div>\r\n              <div className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                {monthDay}\r\n              </div>\r\n              <div className=\"text-xs font-bold text-blue-600 dark:text-blue-400 mt-1\">\r\n                {item.count}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Depression vs Anxiety Correlation Chart\r\nconst CorrelationChart: React.FC<{\r\n  title: string;\r\n  depressionData: AnalyticsData['predictions']['depression'];\r\n  anxietyData: AnalyticsData['predictions']['anxiety'];\r\n}> = ({ title, depressionData, anxietyData }) => {\r\n  // Create correlation data points\r\n  const correlationPoints = [\r\n    { depression: depressionData.no_to_mild, anxiety: anxietyData.no_or_minimal, severity: 'Low', label: 'Minimal/None' },\r\n    { depression: depressionData.mild_to_moderate, anxiety: anxietyData.mild, severity: 'Mild', label: 'Mild' },\r\n    { depression: depressionData.moderate_to_severe, anxiety: anxietyData.moderate, severity: 'Moderate', label: 'Moderate' },\r\n    { depression: depressionData.severe, anxiety: anxietyData.moderately_severe + anxietyData.severe, severity: 'High', label: 'Severe' },\r\n  ];\r\n\r\n  const maxValue = Math.max(\r\n    ...correlationPoints.map(p => Math.max(p.depression, p.anxiety)),\r\n    10\r\n  );\r\n\r\n  const getColor = (severity: string) => {\r\n    switch (severity) {\r\n      case 'Low': return 'fill-green-500 stroke-green-600';\r\n      case 'Mild': return 'fill-yellow-500 stroke-yellow-600';\r\n      case 'Moderate': return 'fill-orange-500 stroke-orange-600';\r\n      case 'High': return 'fill-red-500 stroke-red-600';\r\n      default: return 'fill-gray-500 stroke-gray-600';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n      <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-6\">{title}</h3>\r\n      \r\n      <div className=\"relative h-96\">\r\n        <svg className=\"w-full h-full\" viewBox=\"0 0 400 300\">\r\n          {/* Grid lines */}\r\n          <defs>\r\n            <pattern id=\"correlationGrid\" width=\"40\" height=\"30\" patternUnits=\"userSpaceOnUse\">\r\n              <path\r\n                d=\"M 40 0 L 0 0 0 30\"\r\n                fill=\"none\"\r\n                stroke=\"rgb(229 231 235)\"\r\n                strokeWidth=\"0.5\"\r\n                className=\"dark:stroke-gray-600\"\r\n              />\r\n            </pattern>\r\n          </defs>\r\n          \r\n          <rect width=\"400\" height=\"300\" fill=\"url(#correlationGrid)\" />\r\n          \r\n          {/* Axes */}\r\n          <line x1=\"50\" y1=\"270\" x2=\"370\" y2=\"270\" stroke=\"rgb(107 114 128)\" strokeWidth=\"2\" />\r\n          <line x1=\"50\" y1=\"270\" x2=\"50\" y2=\"30\" stroke=\"rgb(107 114 128)\" strokeWidth=\"2\" />\r\n          \r\n          {/* Data points */}\r\n          {correlationPoints.map((point, index) => {\r\n            const x = 50 + (point.depression / maxValue) * 320;\r\n            const y = 270 - (point.anxiety / maxValue) * 240;\r\n            const radius = Math.max(Math.sqrt(point.depression + point.anxiety) * 2.5, 8);\r\n            \r\n            return (\r\n              <g key={index}>\r\n                <circle\r\n                  cx={x}\r\n                  cy={y}\r\n                  r={radius}\r\n                  className={`${getColor(point.severity)} opacity-70 hover:opacity-90 transition-opacity`}\r\n                  strokeWidth=\"2\"\r\n                />\r\n                <text\r\n                  x={x}\r\n                  y={y + 4}\r\n                  textAnchor=\"middle\"\r\n                  className=\"text-xs fill-white font-bold\"\r\n                >\r\n                  {point.depression + point.anxiety}\r\n                </text>\r\n              </g>\r\n            );\r\n          })}\r\n          \r\n          {/* Axis labels */}\r\n          <text x=\"210\" y=\"295\" textAnchor=\"middle\" className=\"text-sm font-medium fill-gray-700 dark:fill-gray-300\">\r\n            Depression Cases ‚Üí\r\n          </text>\r\n          <text x=\"30\" y=\"150\" textAnchor=\"middle\" transform=\"rotate(-90 30 150)\" className=\"text-sm font-medium fill-gray-700 dark:fill-gray-300\">\r\n            ‚Üê Anxiety Cases\r\n          </text>\r\n        </svg>\r\n      </div>\r\n      \r\n      {/* Legend */}\r\n      <div className=\"mt-4 flex justify-center space-x-4\">\r\n        {correlationPoints.map((point, index) => (\r\n          <div key={index} className=\"flex items-center space-x-2\">\r\n            <div className={`w-3 h-3 rounded-full ${getColor(point.severity).replace('fill-', 'bg-').replace('stroke-', 'border-').replace(' stroke-gray-600', '').replace(' stroke-green-600', '').replace(' stroke-yellow-600', '').replace(' stroke-orange-600', '').replace(' stroke-red-600', '')}`} />\r\n            <span className=\"text-xs text-gray-600 dark:text-gray-400\">{point.label}</span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Session Completion Funnel Chart\r\nconst FunnelChart: React.FC<{\r\n  title: string;\r\n  sessionStatus: AnalyticsData['sessionStatus'];\r\n}> = ({ title, sessionStatus }) => {\r\n  const stages = [\r\n    { label: 'Total Sessions', value: sessionStatus.total, color: 'bg-blue-500' },\r\n    { label: 'In Processing', value: sessionStatus.processing, color: 'bg-yellow-500' },\r\n    { label: 'Completed', value: sessionStatus.succeeded, color: 'bg-green-500' },\r\n    { label: 'Failed', value: sessionStatus.failed, color: 'bg-red-500' },\r\n  ];\r\n\r\n  const maxValue = sessionStatus.total || 1;\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n      <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-6\">{title}</h3>\r\n      \r\n      <div className=\"space-y-4\">\r\n        {stages.map((stage, index) => {\r\n          const width = (stage.value / maxValue) * 100;\r\n          const conversionRate = index > 0 ? ((stage.value / stages[0].value) * 100).toFixed(1) : '100.0';\r\n          \r\n          return (\r\n            <div key={index} className=\"relative\">\r\n              <div className=\"flex justify-between items-center mb-2\">\r\n                <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                  {stage.label}\r\n                </span>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <span className=\"text-sm font-bold text-gray-900 dark:text-white\">\r\n                    {stage.value}\r\n                  </span>\r\n                  <span className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                    ({conversionRate}%)\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"relative h-8 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden\">\r\n                <div\r\n                  className={`h-full ${stage.color} transition-all duration-700 ease-out flex items-center justify-center relative`}\r\n                  style={{ width: `${width}%` }}\r\n                >\r\n                  {width > 20 && (\r\n                    <span className=\"text-xs font-medium text-white\">\r\n                      {stage.value}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                \r\n                {/* Conversion arrow */}\r\n                {index < stages.length - 1 && (\r\n                  <div className=\"absolute right-2 top-1/2 transform -translate-y-1/2\">\r\n                    <svg className=\"w-4 h-4 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path fillRule=\"evenodd\" d=\"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      \r\n      {/* Summary */}\r\n      <div className=\"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\r\n        <div className=\"grid grid-cols-2 gap-4 text-center\">\r\n          <div>\r\n            <div className=\"text-lg font-bold text-green-600 dark:text-green-400\">\r\n              {((sessionStatus.succeeded / sessionStatus.total) * 100).toFixed(1)}%\r\n            </div>\r\n            <div className=\"text-xs text-gray-600 dark:text-gray-400\">Success Rate</div>\r\n          </div>\r\n          <div>\r\n            <div className=\"text-lg font-bold text-red-600 dark:text-red-400\">\r\n              {((sessionStatus.failed / sessionStatus.total) * 100).toFixed(1)}%\r\n            </div>\r\n            <div className=\"text-xs text-gray-600 dark:text-gray-400\">Failure Rate</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// User statistics table component\r\nconst UserStatsTable: React.FC<{\r\n  userStats: AnalyticsData['userStats'];\r\n}> = ({ userStats }) => {\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n    });\r\n  };\r\n\r\n  const getRiskColor = (riskLevel: string, count: number) => {\r\n    if (count === 0) return 'text-gray-400';\r\n    switch (riskLevel) {\r\n      case 'low': return 'text-green-600';\r\n      case 'medium': return 'text-yellow-600';\r\n      case 'high': return 'text-red-600';\r\n      default: return 'text-gray-600';\r\n    }\r\n  };\r\n\r\n  // Calculate summary stats\r\n  const totalUsers = userStats.length;\r\n  const avgSessionsPerUser = totalUsers > 0 \r\n    ? Math.round(userStats.reduce((sum, u) => sum + u.totalSessions, 0) / totalUsers * 10) / 10\r\n    : 0;\r\n  const topPerformer = userStats.length > 0 \r\n    ? userStats.reduce((best, current) => \r\n        current.successRate > best.successRate ? current : best, userStats[0])\r\n    : null;\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white flex items-center\">\r\n          <Users className=\"h-5 w-5 mr-2 text-blue-500\" />\r\n          Per-User Analytics\r\n        </h3>\r\n        \r\n        {/* Summary stats */}\r\n        <div className=\"flex space-x-6 text-sm\">\r\n          <div className=\"text-center\">\r\n            <div className=\"font-semibold text-gray-900 dark:text-white\">{totalUsers}</div>\r\n            <div className=\"text-gray-600 dark:text-gray-400\">Total Users</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"font-semibold text-gray-900 dark:text-white\">{avgSessionsPerUser}</div>\r\n            <div className=\"text-gray-600 dark:text-gray-400\">Avg Sessions</div>\r\n          </div>\r\n          {topPerformer && (\r\n            <div className=\"text-center\">\r\n              <div className=\"font-semibold text-green-600\">{topPerformer.successRate}%</div>\r\n              <div className=\"text-gray-600 dark:text-gray-400\">Best Job Success Rate</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {userStats.length === 0 ? (\r\n        <p className=\"text-gray-500 dark:text-gray-400 text-center py-8\">\r\n          No user data available\r\n        </p>\r\n      ) : (\r\n        <div>\r\n          {/* Risk Distribution Legend */}\r\n          <div className=\"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <span className=\"text-sm font-medium text-blue-900 dark:text-blue-100\">\r\n                Risk Distribution Legend:\r\n              </span>\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"flex items-center space-x-1\">\r\n                  <span className=\"px-2 py-1 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 rounded text-xs font-medium\">\r\n                    L\r\n                  </span>\r\n                  <span className=\"text-xs text-gray-600 dark:text-gray-400\">Low Risk</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-1\">\r\n                  <span className=\"px-2 py-1 bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 rounded text-xs font-medium\">\r\n                    M\r\n                  </span>\r\n                  <span className=\"text-xs text-gray-600 dark:text-gray-400\">Medium Risk</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-1\">\r\n                  <span className=\"px-2 py-1 bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 rounded text-xs font-medium\">\r\n                    H\r\n                  </span>\r\n                  <span className=\"text-xs text-gray-600 dark:text-gray-400\">High Risk</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full text-sm\">\r\n            <thead>\r\n              <tr className=\"border-b border-gray-200 dark:border-gray-700\">\r\n                <th className=\"text-left py-3 px-2 font-medium text-gray-900 dark:text-white\">\r\n                  User ID\r\n                </th>\r\n                <th className=\"text-center py-3 px-2 font-medium text-gray-900 dark:text-white\">\r\n                  Sessions\r\n                </th>\r\n                <th className=\"text-center py-3 px-2 font-medium text-gray-900 dark:text-white\">\r\n                  Job Success Rate\r\n                </th>\r\n                <th className=\"text-center py-3 px-2 font-medium text-gray-900 dark:text-white\">\r\n                  Avg Confidence\r\n                </th>\r\n                <th className=\"text-center py-3 px-2 font-medium text-gray-900 dark:text-white\">\r\n                  Risk Distribution\r\n                </th>\r\n                <th className=\"text-right py-3 px-2 font-medium text-gray-900 dark:text-white\">\r\n                  Last Activity\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {userStats.map((user, index) => (\r\n                <tr \r\n                  key={user.userId}\r\n                  className={`border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors ${\r\n                    index % 2 === 0 ? 'bg-gray-50 dark:bg-gray-800' : 'bg-white dark:bg-gray-900'\r\n                  }`}\r\n                >\r\n                  <td className=\"py-3 px-2\">\r\n                    <div className=\"font-mono text-sm text-gray-900 dark:text-white\">\r\n                      <div className=\"truncate max-w-[120px]\" title={user.userId}>\r\n                        {user.userId.substring(0, 8)}...\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"py-3 px-2 text-center\">\r\n                    <div className=\"text-gray-900 dark:text-white font-medium\">\r\n                      {user.totalSessions}\r\n                    </div>\r\n                    <div className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                      {user.successfulSessions} successful\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"py-3 px-2 text-center\">\r\n                    <div className={`font-medium ${\r\n                      user.successRate >= 80 ? 'text-green-600' : \r\n                      user.successRate >= 60 ? 'text-yellow-600' : 'text-red-600'\r\n                    }`}>\r\n                      {user.successRate}%\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"py-3 px-2 text-center\">\r\n                    <div className=\"text-gray-900 dark:text-white font-medium\">\r\n                      {(user.avgConfidence * 100).toFixed(1)}%\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"py-3 px-2 text-center\">\r\n                    <div className=\"flex justify-center space-x-2 text-xs\">\r\n                      <span className={`px-1 py-0.5 rounded ${getRiskColor('low', user.riskDistribution.low)}`}>\r\n                        L:{user.riskDistribution.low}\r\n                      </span>\r\n                      <span className={`px-1 py-0.5 rounded ${getRiskColor('medium', user.riskDistribution.medium)}`}>\r\n                        M:{user.riskDistribution.medium}\r\n                      </span>\r\n                      <span className={`px-1 py-0.5 rounded ${getRiskColor('high', user.riskDistribution.high)}`}>\r\n                        H:{user.riskDistribution.high}\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"py-3 px-2 text-right\">\r\n                    <div className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                      {formatDate(user.lastActivity)}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const ControlPanel: React.FC = () => {\r\n  const [analytics, setAnalytics] = useState<AnalyticsData | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<AppError | null>(null);\r\n  const [lastRefresh, setLastRefresh] = useState<Date>(new Date());\r\n  const { announceToScreenReader } = useAccessibility();\r\n\r\n  // Get refresh interval from environment variable (default to 69 seconds)\r\n  const refreshInterval = parseInt(import.meta.env.VITE_CONTROL_PANEL_REFRESH_INTERVAL || '69') * 1000;\r\n\r\n  // Load all sessions data for analytics\r\n  const loadAnalytics = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      // Try to get all sessions from the API\r\n      let allSessions: ImportedSessionData[] = [];\r\n      \r\n      try {\r\n        const allSessionsResponse = await apiService.getAllSessions();\r\n        allSessions = allSessionsResponse.sessions;\r\n      } catch (apiError) {\r\n        console.warn('getAllSessions endpoint not available, using mock data for demonstration:', apiError);\r\n        \r\n        // Fallback to mock data for demonstration purposes\r\n        allSessions = [\r\n          {\r\n            sessionId: 'demo-session-1',\r\n            userId: 'a8b7c6d5-e4f3-4a2b-9c8d-7e6f5a4b3c2d',\r\n            status: 'succeeded',\r\n            createdAt: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString(), // 2 hours ago\r\n            updatedAt: new Date().toISOString(),\r\n            audioFileName: 'session_1.wav',\r\n            prediction: {\r\n              sessionId: 'demo-session-1',\r\n              status: 'succeeded',\r\n              predictedScoreDepression: 'mild_to_moderate',\r\n              predictedScoreAnxiety: 'no_or_minimal',\r\n              createdAt: new Date().toISOString(),\r\n              updatedAt: new Date().toISOString(),\r\n            },\r\n            analysisResults: {\r\n              riskLevel: 'medium',\r\n              confidence: 0.85,\r\n              insights: ['Analysis completed'],\r\n              completedAt: new Date().toISOString(),\r\n            },\r\n          },\r\n          {\r\n            sessionId: 'demo-session-2',\r\n            userId: 'f1e2d3c4-b5a6-4c7d-8e9f-0a1b2c3d4e5f',\r\n            status: 'succeeded',\r\n            createdAt: new Date(Date.now() - 1000 * 60 * 60 * 6).toISOString(), // 6 hours ago\r\n            updatedAt: new Date().toISOString(),\r\n            audioFileName: 'session_2.wav',\r\n            prediction: {\r\n              sessionId: 'demo-session-2',\r\n              status: 'succeeded',\r\n              predictedScoreDepression: 'no_to_mild',\r\n              predictedScoreAnxiety: 'moderate',\r\n              createdAt: new Date().toISOString(),\r\n              updatedAt: new Date().toISOString(),\r\n            },\r\n            analysisResults: {\r\n              riskLevel: 'low',\r\n              confidence: 0.92,\r\n              insights: ['Analysis completed'],\r\n              completedAt: new Date().toISOString(),\r\n            },\r\n          },\r\n          {\r\n            sessionId: 'demo-session-3',\r\n            userId: '9d8c7b6a-5e4f-4392-8a1b-0c9d8e7f6a5b',\r\n            status: 'failed',\r\n            createdAt: new Date(Date.now() - 1000 * 60 * 60 * 12).toISOString(), // 12 hours ago\r\n            updatedAt: new Date().toISOString(),\r\n            audioFileName: 'session_3.wav',\r\n            analysisResults: {\r\n              riskLevel: 'unknown',\r\n              confidence: 0,\r\n              insights: ['Processing failed'],\r\n              completedAt: new Date().toISOString(),\r\n            },\r\n          },\r\n          {\r\n            sessionId: 'demo-session-4',\r\n            userId: 'a8b7c6d5-e4f3-4a2b-9c8d-7e6f5a4b3c2d', // Same user as session 1\r\n            status: 'succeeded',\r\n            createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24).toISOString(), // 1 day ago\r\n            updatedAt: new Date().toISOString(),\r\n            audioFileName: 'session_4.wav',\r\n            prediction: {\r\n              sessionId: 'demo-session-4',\r\n              status: 'succeeded',\r\n              predictedScoreDepression: 'moderate_to_severe',\r\n              predictedScoreAnxiety: 'moderately_severe',\r\n              createdAt: new Date().toISOString(),\r\n              updatedAt: new Date().toISOString(),\r\n            },\r\n            analysisResults: {\r\n              riskLevel: 'high',\r\n              confidence: 0.78,\r\n              insights: ['Analysis completed'],\r\n              completedAt: new Date().toISOString(),\r\n            },\r\n          },\r\n          {\r\n            sessionId: 'demo-session-5',\r\n            userId: '4c3b2a19-8e7f-4d6c-5b4a-392817f6e5d4',\r\n            status: 'processing',\r\n            createdAt: new Date(Date.now() - 1000 * 60 * 30).toISOString(), // 30 minutes ago\r\n            updatedAt: new Date().toISOString(),\r\n            audioFileName: 'session_5.wav',\r\n            analysisResults: {\r\n              riskLevel: 'unknown',\r\n              confidence: 0,\r\n              insights: ['Processing in progress'],\r\n              completedAt: new Date().toISOString(),\r\n            },\r\n          },\r\n          {\r\n            sessionId: 'demo-session-6',\r\n            userId: 'f1e2d3c4-b5a6-4c7d-8e9f-0a1b2c3d4e5f', // Same user as session 2\r\n            status: 'succeeded',\r\n            createdAt: new Date(Date.now() - 1000 * 60 * 60 * 36).toISOString(), // 36 hours ago\r\n            updatedAt: new Date().toISOString(),\r\n            audioFileName: 'session_6.wav',\r\n            prediction: {\r\n              sessionId: 'demo-session-6',\r\n              status: 'succeeded',\r\n              predictedScoreDepression: 'no_to_mild',\r\n              predictedScoreAnxiety: 'mild',\r\n              createdAt: new Date().toISOString(),\r\n              updatedAt: new Date().toISOString(),\r\n            },\r\n            analysisResults: {\r\n              riskLevel: 'low',\r\n              confidence: 0.89,\r\n              insights: ['Analysis completed'],\r\n              completedAt: new Date().toISOString(),\r\n            },\r\n          },\r\n          {\r\n            sessionId: 'demo-session-7',\r\n            userId: '7f6e5d4c-3b2a-4190-8e7f-6d5c4b3a2918',\r\n            status: 'succeeded',\r\n            createdAt: new Date(Date.now() - 1000 * 60 * 60 * 48).toISOString(), // 48 hours ago\r\n            updatedAt: new Date().toISOString(),\r\n            audioFileName: 'session_7.wav',\r\n            prediction: {\r\n              sessionId: 'demo-session-7',\r\n              status: 'succeeded',\r\n              predictedScoreDepression: 'mild_to_moderate',\r\n              predictedScoreAnxiety: 'moderate',\r\n              createdAt: new Date().toISOString(),\r\n              updatedAt: new Date().toISOString(),\r\n            },\r\n            analysisResults: {\r\n              riskLevel: 'medium',\r\n              confidence: 0.82,\r\n              insights: ['Analysis completed'],\r\n              completedAt: new Date().toISOString(),\r\n            },\r\n          },\r\n        ];\r\n      }\r\n      \r\n      const aggregatedData = aggregateSessionData(allSessions);\r\n      setAnalytics(aggregatedData);\r\n      setLastRefresh(new Date());\r\n      \r\n      announceToScreenReader('Control panel data loaded successfully');\r\n    } catch (err) {\r\n      const appError = err as AppError;\r\n      setError(appError);\r\n      announceToScreenReader(`Error loading control panel data: ${appError.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [announceToScreenReader]);\r\n\r\n  // Load data on component mount\r\n  useEffect(() => {\r\n    loadAnalytics();\r\n  }, [loadAnalytics]);\r\n\r\n  // Auto-refresh data at specified interval\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      if (!loading) { // Only refresh if not currently loading\r\n        loadAnalytics();\r\n      }\r\n    }, refreshInterval);\r\n\r\n    return () => clearInterval(interval); // Cleanup on unmount\r\n  }, [loadAnalytics, loading, refreshInterval]);\r\n\r\n  // Retry error handler\r\n  const handleRetry = useCallback(() => {\r\n    setError(null);\r\n    loadAnalytics();\r\n  }, [loadAnalytics]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 p-4\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div className=\"flex items-center justify-center h-64\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <RefreshCw className=\"h-6 w-6 animate-spin text-blue-500\" />\r\n              <span className=\"text-lg text-gray-600 dark:text-gray-300\">\r\n                Loading control panel data...\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 p-4\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div className=\"flex items-center justify-center h-64\">\r\n            <div className=\"text-center\">\r\n              <AlertCircle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\r\n                Error Loading Control Panel\r\n              </h2>\r\n              <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\r\n                {error.message}\r\n              </p>\r\n              <button\r\n                onClick={handleRetry}\r\n                className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >\r\n                <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n                Retry\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!analytics) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 p-4\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div className=\"flex items-center justify-center h-64\">\r\n            <span className=\"text-lg text-gray-600 dark:text-gray-300\">\r\n              No data available\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 p-4\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\r\n                Control Panel\r\n              </h1>\r\n              <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\r\n                System-wide analytics and insights dashboard\r\n              </p>\r\n            </div>\r\n            \r\n            {/* Auto-refresh status and controls */}\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"text-right\">\r\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                  Last updated: {lastRefresh.toLocaleTimeString()}\r\n                </div>\r\n                <div className=\"text-xs text-gray-400 dark:text-gray-500\">\r\n                  Auto-refresh: {refreshInterval / 1000}s intervals\r\n                </div>\r\n              </div>\r\n              <button\r\n                onClick={loadAnalytics}\r\n                disabled={loading}\r\n                className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors\"\r\n                aria-label=\"Refresh control panel data\"\r\n              >\r\n                <RefreshCw className={`h-4 w-4 mr-2 ${loading ? 'animate-spin' : ''}`} />\r\n                Refresh\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Overview Metrics */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n          <MetricCard\r\n            title=\"Total Sessions\"\r\n            value={analytics.overview.totalSessions}\r\n            subtitle=\"All time\"\r\n            icon={<Activity className=\"h-6 w-6\" />}\r\n            color=\"text-blue-600\"\r\n          />\r\n          <MetricCard\r\n            title=\"Unique Users\"\r\n            value={analytics.overview.uniqueUsers}\r\n            subtitle=\"Active users\"\r\n            icon={<Users className=\"h-6 w-6\" />}\r\n            color=\"text-green-600\"\r\n          />\r\n          <MetricCard\r\n            title=\"Job Success Rate\"\r\n            value={`${analytics.overview.successRate}%`}\r\n            subtitle=\"Completed analyses\"\r\n            icon={<Target className=\"h-6 w-6\" />}\r\n            color=\"text-purple-600\"\r\n            trend={analytics.overview.successRate > 75 ? 'up' : analytics.overview.successRate < 50 ? 'down' : 'neutral'}\r\n          />\r\n          <MetricCard\r\n            title=\"Recent Activity\"\r\n            value={analytics.overview.recentActivity}\r\n            subtitle=\"Last 24 hours\"\r\n            icon={<Clock className=\"h-6 w-6\" />}\r\n            color=\"text-orange-600\"\r\n            trend={analytics.overview.recentActivity > 5 ? 'up' : analytics.overview.recentActivity === 0 ? 'down' : 'neutral'}\r\n          />\r\n        </div>\r\n\r\n        {/* Charts Grid */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n          {/* Session Status Distribution */}\r\n          <DistributionChart\r\n            title=\"Session Status Distribution\"\r\n            data={[\r\n              { label: 'Succeeded', value: analytics.sessionStatus.succeeded, color: 'bg-green-500' },\r\n              { label: 'Processing', value: analytics.sessionStatus.processing, color: 'bg-yellow-500' },\r\n              { label: 'Failed', value: analytics.sessionStatus.failed, color: 'bg-red-500' },\r\n            ]}\r\n            total={analytics.sessionStatus.total}\r\n          />\r\n\r\n          {/* Risk Level Distribution */}\r\n          <DistributionChart\r\n            title=\"Risk Level Distribution\"\r\n            data={[\r\n              { label: 'Low Risk', value: analytics.riskLevels.low, color: 'bg-green-500' },\r\n              { label: 'Medium Risk', value: analytics.riskLevels.medium, color: 'bg-yellow-500' },\r\n              { label: 'High Risk', value: analytics.riskLevels.high, color: 'bg-red-500' },\r\n              { label: 'Unknown', value: analytics.riskLevels.unknown, color: 'bg-gray-500' },\r\n            ]}\r\n            total={analytics.riskLevels.total}\r\n          />\r\n        </div>\r\n\r\n        {/* Prediction Distribution */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n          {/* Depression Score Distribution */}\r\n          <DistributionChart\r\n            title=\"Depression Score Distribution\"\r\n            data={[\r\n              { label: 'No to Mild', value: analytics.predictions.depression.no_to_mild, color: 'bg-green-500' },\r\n              { label: 'Mild to Moderate', value: analytics.predictions.depression.mild_to_moderate, color: 'bg-yellow-500' },\r\n              { label: 'Moderate to Severe', value: analytics.predictions.depression.moderate_to_severe, color: 'bg-orange-500' },\r\n              { label: 'Severe', value: analytics.predictions.depression.severe, color: 'bg-red-500' },\r\n            ]}\r\n            total={analytics.predictions.depression.total}\r\n          />\r\n\r\n          {/* Anxiety Score Distribution */}\r\n          <DistributionChart\r\n            title=\"Anxiety Score Distribution\"\r\n            data={[\r\n              { label: 'No or Minimal', value: analytics.predictions.anxiety.no_or_minimal, color: 'bg-green-500' },\r\n              { label: 'Mild', value: analytics.predictions.anxiety.mild, color: 'bg-yellow-500' },\r\n              { label: 'Moderate', value: analytics.predictions.anxiety.moderate, color: 'bg-orange-500' },\r\n              { label: 'Moderately Severe', value: analytics.predictions.anxiety.moderately_severe, color: 'bg-red-500' },\r\n              { label: 'Severe', value: analytics.predictions.anxiety.severe, color: 'bg-red-700' },\r\n            ]}\r\n            total={analytics.predictions.anxiety.total}\r\n          />\r\n        </div>\r\n\r\n        {/* Per-User Statistics */}\r\n        <div className=\"mb-8\">\r\n          <UserStatsTable userStats={analytics.userStats} />\r\n        </div>\r\n\r\n        {/* Depression vs Anxiety Correlation - Featured Analysis */}\r\n        <div className=\"mb-8\">\r\n          <CorrelationChart\r\n            title=\"Depression vs Anxiety Correlation\"\r\n            depressionData={analytics.predictions.depression}\r\n            anxietyData={analytics.predictions.anxiety}\r\n          />\r\n        </div>\r\n\r\n        {/* Session Analytics */}\r\n        <div className=\"mb-8\">\r\n          <FunnelChart\r\n            title=\"Session Completion Funnel\"\r\n            sessionStatus={analytics.sessionStatus}\r\n          />\r\n        </div>\r\n\r\n        {/* Sessions Over Time - Full Width */}\r\n        <div className=\"mb-8\">\r\n          <TimeSeriesChart\r\n            title=\"Sessions Over Time (7 Days)\"\r\n            data={analytics.timeData}\r\n          />\r\n        </div>\r\n\r\n        {/* System Health */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center\">\r\n            <Heart className=\"h-5 w-5 mr-2 text-red-500\" />\r\n            System Health Overview\r\n          </h3>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-green-600 dark:text-green-400\">\r\n                {analytics.overview.successRate}%\r\n              </div>\r\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Job Success Rate</div>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">\r\n                {analytics.overview.totalSessions}\r\n              </div>\r\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Total Sessions</div>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-purple-600 dark:text-purple-400\">\r\n                {analytics.sessionStatus.processing}\r\n              </div>\r\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Processing</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ControlPanel;","import React from 'react';\r\nimport { RefreshCw, AlertCircle, Activity, Info } from 'lucide-react';\r\nimport { useHealthCheck } from '@/hooks/api';\r\nimport { useAnnouncements } from '@/hooks/accessibility';\r\n\r\n// Re-export the full UploadAnalyze component\r\nexport { default as UploadAnalyze } from './UploadAnalyze';\r\n\r\n// Re-export the full Sessions component\r\nexport { default as Sessions } from './Sessions';\r\n\r\nexport { default as SessionDetail } from './SessionDetail';\r\n\r\nexport { default as Predictions } from './Predictions';\r\n\r\nexport { default as ControlPanel } from './ControlPanel';\r\n\r\nexport const SystemHealth: React.FC = () => {\r\n  const { data: healthStatus, isLoading, error, refetch } = useHealthCheck();\r\n  const { announce } = useAnnouncements();\r\n\r\n  React.useEffect(() => {\r\n    announce('System Health page loaded', 'polite');\r\n  }, [announce]);\r\n\r\n  const formatTimestamp = (timestamp?: string) => {\r\n    if (!timestamp) return 'Just now';\r\n    \r\n    try {\r\n      const date = new Date(timestamp);\r\n      if (isNaN(date.getTime())) {\r\n        return 'Just now';\r\n      }\r\n      \r\n      return date.toLocaleString(undefined, {\r\n        year: 'numeric',\r\n        month: 'short',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit'\r\n      });\r\n    } catch (error) {\r\n      return 'Just now';\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status?.toLowerCase()) {\r\n      case 'healthy':\r\n        return 'text-green-600 dark:text-green-400';\r\n      case 'degraded':\r\n        return 'text-yellow-600 dark:text-yellow-400';\r\n      case 'unhealthy':\r\n        return 'text-red-600 dark:text-red-400';\r\n      default:\r\n        return 'text-gray-600 dark:text-gray-400';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status?.toLowerCase()) {\r\n      case 'healthy':\r\n        return '‚úÖ';\r\n      case 'degraded':\r\n        return '‚ö†Ô∏è';\r\n      case 'unhealthy':\r\n        return '‚ùå';\r\n      default:\r\n        return '‚ùì';\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const baseClasses = 'inline-flex items-center px-3 py-1 rounded-full text-sm font-medium';\r\n    switch (status?.toLowerCase()) {\r\n      case 'healthy':\r\n        return `${baseClasses} bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`;\r\n      case 'degraded':\r\n        return `${baseClasses} bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`;\r\n      case 'unhealthy':\r\n        return `${baseClasses} bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200`;\r\n      default:\r\n        return `${baseClasses} bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200`;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto p-6 space-y-6\">\r\n      {/* Page Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\r\n            System Health\r\n          </h1>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mt-1\">\r\n            Monitor API status and system connectivity\r\n          </p>\r\n        </div>\r\n        <button type=\"button\"\r\n          onClick={() => refetch()}\r\n          disabled={isLoading}\r\n          className=\"btn btn--secondary flex items-center space-x-2\"\r\n          aria-label=\"Refresh system health status\"\r\n        >\r\n          <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n          <span>Refresh</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Loading State */}\r\n      {isLoading && (\r\n        <div className=\"flex items-center justify-center py-16\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <RefreshCw className=\"w-6 h-6 text-blue-600 animate-spin\" />\r\n            <span className=\"text-lg text-gray-900 dark:text-white\">\r\n              Checking system health...\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Error State */}\r\n      {error && (\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6\">\r\n          <div className=\"flex items-center\">\r\n            <AlertCircle className=\"w-6 h-6 text-red-500 mr-3\" />\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-red-900 dark:text-red-200\">\r\n                Health Check Failed\r\n              </h3>\r\n              <p className=\"text-red-700 dark:text-red-300 mt-1\">\r\n                {error.message || 'Unable to retrieve system health status'}\r\n              </p>\r\n              <button type=\"button\"\r\n                onClick={() => refetch()}\r\n                className=\"mt-3 text-sm text-red-800 dark:text-red-200 hover:text-red-900 dark:hover:text-red-100 underline\"\r\n              >\r\n                Try again\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Health Status Display */}\r\n      {healthStatus && !isLoading && (\r\n        <>\r\n          {/* Overall Status Card */}\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                Overall System Status\r\n              </h2>\r\n              <div className={getStatusBadge(healthStatus.status)}>\r\n                <span className=\"mr-1\">{getStatusIcon(healthStatus.status)}</span>\r\n                {healthStatus.status}\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <div className=\"text-center\">\r\n                <div className=\"text-3xl mb-2\">{getStatusIcon(healthStatus.status)}</div>\r\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">Status</div>\r\n                <div className={`font-medium ${getStatusColor(healthStatus.status)}`}>\r\n                  {healthStatus.status}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"text-center\">\r\n                <div className=\"text-3xl mb-2\">‚è±Ô∏è</div>\r\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">Response Time</div>\r\n                <div className=\"font-medium text-gray-900 dark:text-white\">\r\n                  {healthStatus.totalDuration ? `${healthStatus.totalDuration}ms` : 'N/A'}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"text-center\">\r\n                <div className=\"text-3xl mb-2\">üìÖ</div>\r\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">Last Checked</div>\r\n                <div className=\"font-medium text-gray-900 dark:text-white\">\r\n                  {formatTimestamp(healthStatus.timestamp)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Individual Service Checks */}\r\n          {healthStatus.checks && Object.keys(healthStatus.checks).length > 0 && (\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n                <Activity className=\"w-5 h-5 mr-2\" />\r\n                Service Details\r\n              </h3>\r\n              \r\n              <div className=\"space-y-4\">\r\n                {Object.entries(healthStatus.checks).map(([serviceName, serviceStatus]) => (\r\n                  <div key={serviceName} className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <span className=\"text-lg\">{getStatusIcon(serviceStatus.status)}</span>\r\n                      <div>\r\n                        <div className=\"font-medium text-gray-900 dark:text-white capitalize\">\r\n                          {serviceName.replace(/-/g, ' ')}\r\n                        </div>\r\n                        {serviceStatus.description && (\r\n                          <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                            {serviceStatus.description}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex items-center space-x-4\">\r\n                      {serviceStatus.duration && (\r\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          {serviceStatus.duration}ms\r\n                        </div>\r\n                      )}\r\n                      <div className={getStatusBadge(serviceStatus.status)}>\r\n                        {serviceStatus.status}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* System Information */}\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n              <Info className=\"w-5 h-5 mr-2\" />\r\n              System Information\r\n            </h3>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <h4 className=\"font-medium text-gray-900 dark:text-white mb-3\">API Endpoints</h4>\r\n                <div className=\"space-y-2 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-500 dark:text-gray-400\">Health Check:</span>\r\n                    <span className=\"font-mono text-gray-900 dark:text-white\">/health</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-500 dark:text-gray-400\">Sessions:</span>\r\n                    <span className=\"font-mono text-gray-900 dark:text-white\">/sessions</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-500 dark:text-gray-400\">Predictions:</span>\r\n                    <span className=\"font-mono text-gray-900 dark:text-white\">/predictions</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <h4 className=\"font-medium text-gray-900 dark:text-white mb-3\">Connection Status</h4>\r\n                <div className=\"space-y-2 text-sm\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n                    <span className=\"text-gray-900 dark:text-white\">API Connected</span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\r\n                    <span className=\"text-gray-900 dark:text-white\">Real-time Updates</span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <div className=\"w-2 h-2 bg-purple-500 rounded-full\"></div>\r\n                    <span className=\"text-gray-900 dark:text-white\">Auto-refresh Enabled</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const NotFound: React.FC = () => {\r\n  return (\r\n    <div className=\"text-center py-16\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Page Not Found</h1>\r\n      <p className=\"text-gray-600 dark:text-gray-400 mb-8\">\r\n        The page you're looking for doesn't exist.\r\n      </p>\r\n      <a\r\n        href=\"/\"\r\n        className=\"btn btn--primary\"\r\n      >\r\n        Go to Dashboard\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n","import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\r\nimport { ThemeProvider } from '@/contexts/ThemeContext';\r\nimport { Layout } from '@/components/layout/Layout';\r\n\r\n// Page components\r\nimport { Dashboard } from '@/pages/Dashboard';\r\nimport { UploadAnalyze, Sessions, SessionDetail, Predictions, ControlPanel, SystemHealth, NotFound } from '@/pages';\r\n\r\n// Create React Query client\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      retry: (failureCount, error) => {\r\n        // Don't retry on 4xx errors except 408 (timeout)\r\n        if (error && typeof error === 'object' && 'code' in error) {\r\n          const errorCode = (error as any).code;\r\n          if (errorCode?.startsWith('HTTP_4') && errorCode !== 'HTTP_408') {\r\n            return false;\r\n          }\r\n        }\r\n        return failureCount < 3;\r\n      },\r\n      staleTime: 5 * 60 * 1000, // 5 minutes\r\n      refetchOnWindowFocus: false,\r\n    },\r\n    mutations: {\r\n      retry: 1,\r\n    },\r\n  },\r\n});\r\n\r\nfunction App() {\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <ThemeProvider>\r\n        <Router>\r\n          <Layout>\r\n            <Routes>\r\n              {/* Main routes */}\r\n              <Route path=\"/\" element={<Dashboard />} />\r\n              <Route path=\"/upload\" element={<UploadAnalyze />} />\r\n              <Route path=\"/sessions\" element={<Sessions />} />\r\n              <Route path=\"/sessions/:sessionId\" element={<SessionDetail />} />\r\n              <Route path=\"/predictions\" element={<Predictions />} />\r\n              <Route path=\"/control-panel\" element={<ControlPanel />} />\r\n              <Route path=\"/health\" element={<SystemHealth />} />\r\n              \r\n              {/* 404 page */}\r\n              <Route path=\"*\" element={<NotFound />} />\r\n            </Routes>\r\n          </Layout>\r\n        </Router>\r\n      </ThemeProvider>\r\n      \r\n      {/* React Query DevTools (only in development) */}\r\n      {import.meta.env.DEV && <ReactQueryDevtools initialIsOpen={false} />}\r\n    </QueryClientProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport App from './App.tsx';\r\nimport './index.css';\r\nimport './styles/dynamic-progress.css';\r\nimport './styles/components.css';\r\nimport './styles/layouts.css';\r\n\r\n// Apply initial theme before React renders\r\nconst storedTheme = localStorage.getItem('bh_theme');\r\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\r\nconst initialTheme = storedTheme === 'dark' || (!storedTheme && prefersDark);\r\n\r\nif (initialTheme) {\r\n  document.documentElement.classList.add('dark');\r\n} else {\r\n  document.documentElement.classList.remove('dark');\r\n}\r\n\r\nReactDOM.createRoot(document.getElementById('root')!).render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n);\r\n"],"names":["m","require$$0","client","getRandomValues","rnds8","rng","byteToHex","i","unsafeStringify","arr","offset","randomUUID","native","v4","options","buf","rnds","config","STORAGE_KEYS","API_ENDPOINTS","A11Y","getUserId","userId","uuidv4","setUserId","generateNewUserId","newUserId","isCustomUserId","setUserIdMode","isCustom","getStoredTheme","stored","setStoredTheme","theme","getStoredProcessingMode","setStoredProcessingMode","isMultiMode","formatRelativeTime","date","now","target","diffMs","diffMinutes","diffHours","diffDays","formatDateTime","createAppError","code","message","details","isNetworkError","error","announceToScreenReader","priority","announcement","focusElement","elementId","delay","element","ThemeContext","createContext","useTheme","context","useContext","ThemeProvider","children","setThemeState","useState","setTheme","newTheme","toggleTheme","useEffect","mediaQuery","handleChange","e","value","jsx","useAnnouncements","announce","useCallback","announceError","announceSuccess","useKeyboardNavigation","handleEscape","callback","handleKeyDown","event","handleEnterSpace","useSkipToContent","Header","className","location","useLocation","isMobileMenuOpen","setIsMobileMenuOpen","navItems","isActivePath","path","toggleMobileMenu","closeMobileMenu","jsxs","Link","label","icon","MicrosoftLogo","size","props","Layout","skipToMain","toKebabCase","string","toCamelCase","match","p1","p2","toPascalCase","camelCase","mergeClasses","classes","index","array","hasA11yProp","prop","defaultAttributes","Icon","forwardRef","color","strokeWidth","absoluteStrokeWidth","iconNode","rest","ref","createElement","tag","attrs","createLucideIcon","iconName","Component","__iconNode","Activity","ArrowLeft","Brain","Calendar","ChartColumn","ChartPie","ChevronDown","ChevronUp","CircleAlert","CircleCheckBig","CircleX","Clock","Download","EyeOff","Eye","FileAudio","FileText","File","Files","Funnel","Heart","Info","Lightbulb","LoaderCircle","Pause","Play","Plus","RefreshCw","Search","ShieldAlert","Target","Trash2","TrendingDown","TrendingUp","TriangleAlert","Upload","User","Users","Volume2","X","ApiClient","baseUrl","__publicField","response","errorData","endpoint","cleanEndpoint","url","defaultHeaders","data","apiClient","apiService","request","sessionId","sessionData","PredictionPoller","onUpdate","onComplete","onError","poll","result","nextInterval","QUERY_KEYS","useHealthCheck","useQuery","useUserSessions","effectiveUserId","Dashboard","healthStatus","isHealthLoading","healthError","sessionsResponse","isSessionsLoading","quickActions","getActionClasses","baseClasses","action","session","_a","_b","AudioProcessor","FFmpeg","baseURL","toBlobURL","file","onProgress","progress","inputName","fetchFile","outputName","command","outputData","outputBlob","convertedFile","filename","lastDot","supportedFormats","extension","audioProcessorInstance","getAudioProcessor","convertAudioToWav","AzureBlobService","sasUrl","blobServiceClient","BlobServiceClient","fileName","containerClient","blobName","blockBlobClient","uploadProgress","progressPercent","blobUrl","originalFileName","timestamp","randomId","blobServiceInstance","getBlobService","uploadToAzureBlob","blobService","fileToUpload","useAccessibility","announcementRef","useRef","liveRegion","focusManagement","container","firstElement","focusableElements","lastElement","handleTabKey","keyboardNavigation","items","currentIndex","onIndexChange","newIndex","onEscape","generateId","prefix","prefersReducedMotion","getValidationAttributes","isValid","errorMessage","describedById","attributes","UploadAnalyze","audioFiles","setAudioFiles","setIsMultiMode","processingProgress","setProcessingProgress","results","setResults","fileStates","setFileStates","isProcessing","setIsProcessing","audioFile","setAudioFile","setProgress","setResult","isPlaying","setIsPlaying","currentTime","setCurrentTime","playingFileId","setPlayingFileId","userMetadata","setUserMetadata","setError","toasts","setToasts","isCustomUserIdMode","setIsCustomUserIdMode","customUserId","setCustomUserId","userIdError","setUserIdError","audioRef","fileInputRef","addToast","type","title","id","newToast","prev","toast","removeToast","resetState","handleToggleUserIdMode","newMode","handleCustomUserIdChange","handleApplyCustomUserId","trimmedUserId","handleGenerateNewUserId","generateFileId","addAudioFile","audio","af","removeAudioFile","fileId","fileToRemove","f","removed","handleFileSelect","files","supportedMimeTypes","hasValidExtension","ext","maxSize","handleDragOver","handleDrop","toggleMode","handlePlayPause","handleTimeUpdate","formatTime","seconds","mins","secs","validateMetadata","errors","age","weight","buildMetadata","metadata","hasMetadata","processAndAnalyze","processMultipleFiles","processSingleFile","processSingleFileById","sessionRequest","sessionResponse","initialSessionData","convertedBlob","audioUrl","updatedSessionData","poller","resolve","reject","analysisResult","insight","err","errorCode","errorDetails","currentProgress","cleanupError","validationErrors","filesToProcess","totalFiles","completedFiles","startSingleFile","getProgressColor","stage","Fragment","fileState","CheckCircle","AlertCircle","Loader2","a","statusConfig","XCircle","formatScoreCategory","category","l","getSeverityLevel","Sessions","sessions","setSessions","loading","setLoading","selectedSessions","setSelectedSessions","showFilters","setShowFilters","filters","setFilters","loadSessions","transformedSessions","prediction","appError","filteredAndSortedSessions","useMemo","filtered","searchLower","startDate","b","comparison","depressionA","depressionB","anxietyA","anxietyB","updateFilter","key","toggleSessionSelection","newSelection","toggleSelectAll","s","handleDeleteSession","handleBulkDelete","sessionIds","successCount","failedSessions","formatFileSize","bytes","k","sizes","StatusBadge","status","normalizedStatus","Filter","riskLevelConfig","AlertTriangle","RiskAssessmentComponent","existingAssessment","onAssessmentUpdated","assessment","setAssessment","isGenerating","setIsGenerating","isLoading","setIsLoading","generateAssessment","loadAssessment","RiskLevelBadge","riskLevel","riskScore","factor","recommendation","followUp","SessionDetail","useParams","navigate","useNavigate","setSession","showRawJson","setShowRawJson","isRefreshing","setIsRefreshing","audioPlaying","setAudioPlaying","loadSession","refreshSession","toggleRawJson","newState","toggleAudioPlayback","downloadSessionData","dataStr","dataBlob","link","_d","_c","_e","_f","_g","_i","_h","_j","_k","_l","Predictions","handleBarClick","loadPredictions","sessionsWithPredictions","filteredSessions","chartData","mapCategoryToNumber","depression","anxiety","scoreDistribution","distributions","categories","depressionScores","score","cat","count","percentage","anxietyScores","trendAnalysis","trends","getCategorySeverity","depressionCategories","severityScores","firstHalf","secondHalf","firstAvg","change","anxietyCategories","statistics","stats","depressionCounts","mostCommonDepression","anxietyCounts","mostCommonAnxiety","downloadPredictions","TrendIndicator","trend","colorClass","SimpleLineChart","onBarClick","scores","d","maxScore","minScore","range","getScoreCategoryName","getCategoryColor","getLegendItems","chartType","item","usedScores","activeLegendItems","dataPoint","height","categoryColor","categoryName","dateStr","counts","BarChart3","PieChart","scoreType","distribution","getPercentage","total","aggregateSessionData","allSessions","totalSessions","uniqueUsers","completedSessions","processingSessions","successRate","avgSessionsPerUser","twentyFourHoursAgo","recentActivity","riskCounts","depScore","anxScore","timeData","sessionsOnDate","userStatsMap","userStats","successfulSessions","avgConfidence","sum","userRiskDistribution","userDepressionScores","userAnxietyScores","lastActivity","latest","MetricCard","subtitle","DistributionChart","TimeSeriesChart","maxCount","minCount","point","barWidth","x","barHeight","y","dayName","monthDay","CorrelationChart","depressionData","anxietyData","correlationPoints","maxValue","p","getColor","severity","radius","FunnelChart","sessionStatus","stages","width","conversionRate","UserStatsTable","formatDate","dateString","getRiskColor","totalUsers","u","topPerformer","best","current","user","ControlPanel","analytics","setAnalytics","lastRefresh","setLastRefresh","refreshInterval","loadAnalytics","apiError","aggregatedData","interval","handleRetry","SystemHealth","refetch","React","formatTimestamp","getStatusColor","getStatusIcon","getStatusBadge","serviceName","serviceStatus","NotFound","queryClient","QueryClient","failureCount","App","QueryClientProvider","Router","Routes","Route","storedTheme","prefersDark","initialTheme","ReactDOM"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55]}