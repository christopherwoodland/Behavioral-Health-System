{"version":3,"file":"index-7799615c.js","sources":["../../node_modules/react-dom/client.js","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../src/config/constants.ts","../../src/utils/index.ts","../../src/contexts/ThemeContext.tsx","../../src/hooks/accessibility.ts","../../src/components/layout/Header.tsx","../../src/components/icons/MicrosoftLogo.tsx","../../src/components/layout/Layout.tsx","../../node_modules/lucide-react/dist/esm/shared/src/utils.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/Icon.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/activity.js","../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/brain.js","../../node_modules/lucide-react/dist/esm/icons/calendar.js","../../node_modules/lucide-react/dist/esm/icons/chart-column.js","../../node_modules/lucide-react/dist/esm/icons/chart-pie.js","../../node_modules/lucide-react/dist/esm/icons/chevron-down.js","../../node_modules/lucide-react/dist/esm/icons/chevron-up.js","../../node_modules/lucide-react/dist/esm/icons/circle-alert.js","../../node_modules/lucide-react/dist/esm/icons/circle-check-big.js","../../node_modules/lucide-react/dist/esm/icons/circle-x.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/download.js","../../node_modules/lucide-react/dist/esm/icons/eye-off.js","../../node_modules/lucide-react/dist/esm/icons/eye.js","../../node_modules/lucide-react/dist/esm/icons/file-audio.js","../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../node_modules/lucide-react/dist/esm/icons/file.js","../../node_modules/lucide-react/dist/esm/icons/files.js","../../node_modules/lucide-react/dist/esm/icons/funnel.js","../../node_modules/lucide-react/dist/esm/icons/heart.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/languages.js","../../node_modules/lucide-react/dist/esm/icons/lightbulb.js","../../node_modules/lucide-react/dist/esm/icons/loader-circle.js","../../node_modules/lucide-react/dist/esm/icons/mic-off.js","../../node_modules/lucide-react/dist/esm/icons/mic.js","../../node_modules/lucide-react/dist/esm/icons/pause.js","../../node_modules/lucide-react/dist/esm/icons/play.js","../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../node_modules/lucide-react/dist/esm/icons/settings.js","../../node_modules/lucide-react/dist/esm/icons/shield-alert.js","../../node_modules/lucide-react/dist/esm/icons/target.js","../../node_modules/lucide-react/dist/esm/icons/trash-2.js","../../node_modules/lucide-react/dist/esm/icons/trending-down.js","../../node_modules/lucide-react/dist/esm/icons/trending-up.js","../../node_modules/lucide-react/dist/esm/icons/triangle-alert.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../node_modules/lucide-react/dist/esm/icons/user.js","../../node_modules/lucide-react/dist/esm/icons/volume-2.js","../../node_modules/lucide-react/dist/esm/icons/volume-x.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../src/services/api.ts","../../src/hooks/api.ts","../../src/pages/Dashboard.tsx","../../src/services/audio.ts","../../src/services/azure.ts","../../src/hooks/useAccessibility.ts","../../src/pages/UploadAnalyze.tsx","../../src/pages/Sessions.tsx","../../src/components/RiskAssessment.tsx","../../src/pages/SessionDetail.tsx","../../src/pages/Predictions.tsx","../../src/services/speechService.ts","../../src/hooks/useSpeech.ts","../../src/components/VoiceActivityVisualizer.tsx","../../src/components/SpeechSettings.tsx","../../src/pages/AgentExperience.tsx","../../src/pages/index.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","// Environment configuration\r\nexport const config = {\r\n  api: {\r\n    baseUrl: import.meta.env.VITE_API_BASE || 'http://localhost:7071/api',\r\n  },\r\n  azure: {\r\n    blobSasUrl: import.meta.env.VITE_AZURE_BLOB_SAS_URL || '',\r\n    containerName: import.meta.env.VITE_STORAGE_CONTAINER_NAME || 'audio-uploads',\r\n  },\r\n  polling: {\r\n    intervalMs: parseInt(import.meta.env.VITE_POLL_INTERVAL_MS || '3000', 10),\r\n    maxAttempts: 60, // 3 minutes at 3s intervals\r\n    backoffFactor: 1.2,\r\n  },\r\n  features: {\r\n    enableFFmpegWorker: import.meta.env.VITE_ENABLE_FFMPEG_WORKER === 'true',\r\n    enableDebugLogging: import.meta.env.VITE_ENABLE_DEBUG_LOGGING === 'true',\r\n  },\r\n  audio: {\r\n    acceptedFormats: ['.wav', '.mp3', '.m4a', '.aac', '.flac'],\r\n    maxFileSizeMB: 100,\r\n    targetSampleRate: 44100,\r\n    targetChannels: 1,\r\n  },\r\n} as const;\r\n\r\n// Storage keys\r\nexport const STORAGE_KEYS = {\r\n  USER_ID: 'bh_user_id',\r\n  THEME: 'bh_theme',\r\n  UPLOAD_SESSIONS: 'bh_upload_sessions',\r\n  PROCESSING_MODE: 'bh_processing_mode',\r\n  USER_ID_CUSTOM: 'bh_user_id_custom',\r\n} as const;\r\n\r\n// API endpoints\r\nexport const API_ENDPOINTS = {\r\n  HEALTH: '/health',\r\n  SESSIONS_INITIATE: '/sessions/initiate',\r\n  PREDICTIONS_SUBMIT: '/predictions/submit',\r\n  PREDICTIONS_BY_USER: '/predictions',\r\n  PREDICTIONS_BY_SESSION: '/predictions/sessions',\r\n} as const;\r\n\r\n// Validation constants\r\nexport const VALIDATION = {\r\n  USER_ID_PATTERN: /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,\r\n  SESSION_ID_PATTERN: /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,\r\n  MAX_FILE_SIZE_BYTES: 100 * 1024 * 1024, // 100MB\r\n} as const;\r\n\r\n// Accessibility constants\r\nexport const A11Y = {\r\n  SKIP_TO_CONTENT_ID: 'main-content',\r\n  ANNOUNCEMENTS_ID: 'a11y-announcements',\r\n  FOCUS_TIMEOUT: 100,\r\n  DEBOUNCE_MS: 300,\r\n} as const;\r\n","import { v4 as uuidv4 } from 'uuid';\r\nimport { STORAGE_KEYS, VALIDATION } from '@/config/constants';\r\nimport type { Theme, AppError } from '@/types';\r\n\r\n// User ID management\r\nexport const getUserId = (): string => {\r\n  let userId = localStorage.getItem(STORAGE_KEYS.USER_ID);\r\n  \r\n  // If no User ID exists, generate a new UUID\r\n  if (!userId || userId.trim().length === 0) {\r\n    userId = uuidv4();\r\n    localStorage.setItem(STORAGE_KEYS.USER_ID, userId);\r\n  }\r\n  \r\n  return userId;\r\n};\r\n\r\n// Set a custom user ID\r\nexport const setUserId = (userId: string): void => {\r\n  if (!userId || userId.trim().length === 0) {\r\n    throw new Error('User ID cannot be empty');\r\n  }\r\n  localStorage.setItem(STORAGE_KEYS.USER_ID, userId.trim());\r\n};\r\n\r\n// Generate a new user ID\r\nexport const generateNewUserId = (): string => {\r\n  const newUserId = uuidv4();\r\n  localStorage.setItem(STORAGE_KEYS.USER_ID, newUserId);\r\n  return newUserId;\r\n};\r\n\r\n// Check if user ID is custom (not auto-generated)\r\nexport const isCustomUserId = (): boolean => {\r\n  return localStorage.getItem('bh_user_id_custom') === 'true';\r\n};\r\n\r\n// Set user ID as custom or auto-generated\r\nexport const setUserIdMode = (isCustom: boolean): void => {\r\n  localStorage.setItem('bh_user_id_custom', isCustom.toString());\r\n};\r\n\r\n// Theme management\r\nexport const getStoredTheme = (): Theme => {\r\n  const stored = localStorage.getItem(STORAGE_KEYS.THEME) as Theme;\r\n  if (stored === 'light' || stored === 'dark') {\r\n    return stored;\r\n  }\r\n  \r\n  // Default to system preference\r\n  return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n};\r\n\r\nexport const setStoredTheme = (theme: Theme): void => {\r\n  localStorage.setItem(STORAGE_KEYS.THEME, theme);\r\n  \r\n  // Apply theme to document\r\n  if (theme === 'dark') {\r\n    document.documentElement.classList.add('dark');\r\n  } else {\r\n    document.documentElement.classList.remove('dark');\r\n  }\r\n};\r\n\r\n// Processing mode management\r\nexport const getStoredProcessingMode = (): boolean => {\r\n  const stored = localStorage.getItem(STORAGE_KEYS.PROCESSING_MODE);\r\n  if (stored === 'true' || stored === 'false') {\r\n    return stored === 'true';\r\n  }\r\n  \r\n  // Default to single file mode\r\n  return false;\r\n};\r\n\r\nexport const setStoredProcessingMode = (isMultiMode: boolean): void => {\r\n  localStorage.setItem(STORAGE_KEYS.PROCESSING_MODE, isMultiMode.toString());\r\n};\r\n\r\n// File utilities\r\nexport const formatFileSize = (bytes: number): string => {\r\n  if (bytes === 0) return '0 B';\r\n  \r\n  const k = 1024;\r\n  const sizes = ['B', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  \r\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(1))} ${sizes[i]}`;\r\n};\r\n\r\nexport const formatDuration = (seconds: number): string => {\r\n  const minutes = Math.floor(seconds / 60);\r\n  const remainingSeconds = Math.floor(seconds % 60);\r\n  return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\r\n};\r\n\r\nexport const getAudioDuration = (file: File): Promise<number> => {\r\n  return new Promise((resolve, reject) => {\r\n    const audio = new Audio();\r\n    const url = URL.createObjectURL(file);\r\n    \r\n    audio.addEventListener('loadedmetadata', () => {\r\n      URL.revokeObjectURL(url);\r\n      resolve(audio.duration);\r\n    });\r\n    \r\n    audio.addEventListener('error', () => {\r\n      URL.revokeObjectURL(url);\r\n      reject(new Error('Unable to load audio metadata'));\r\n    });\r\n    \r\n    audio.src = url;\r\n  });\r\n};\r\n\r\n// Date utilities\r\nexport const formatRelativeTime = (date: string): string => {\r\n  const now = new Date();\r\n  const target = new Date(date);\r\n  const diffMs = now.getTime() - target.getTime();\r\n  const diffMinutes = Math.floor(diffMs / (1000 * 60));\r\n  const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\r\n  \r\n  if (diffMinutes < 1) return 'Just now';\r\n  if (diffMinutes < 60) return `${diffMinutes}m ago`;\r\n  if (diffHours < 24) return `${diffHours}h ago`;\r\n  if (diffDays < 7) return `${diffDays}d ago`;\r\n  \r\n  return target.toLocaleDateString();\r\n};\r\n\r\nexport const formatDateTime = (date: string): string => {\r\n  return new Date(date).toLocaleString();\r\n};\r\n\r\n// Error handling\r\nexport const createAppError = (code: string, message: string, details?: Record<string, unknown>): AppError => ({\r\n  code,\r\n  message,\r\n  details,\r\n  timestamp: new Date().toISOString(),\r\n});\r\n\r\nexport const isNetworkError = (error: unknown): boolean => {\r\n  if (error instanceof TypeError && error.message.includes('fetch')) {\r\n    return true;\r\n  }\r\n  \r\n  if (error instanceof Error) {\r\n    return error.message.includes('Network') || \r\n           error.message.includes('connection') ||\r\n           error.message.includes('timeout');\r\n  }\r\n  \r\n  return false;\r\n};\r\n\r\n// Validation utilities\r\nexport const isValidUUID = (uuid: string): boolean => {\r\n  const uuidPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\r\n  return uuidPattern.test(uuid);\r\n};\r\n\r\nexport const isValidAudioFile = (file: File): { valid: boolean; error?: string } => {\r\n  // Check file size\r\n  if (file.size > VALIDATION.MAX_FILE_SIZE_BYTES) {\r\n    return {\r\n      valid: false,\r\n      error: `File size exceeds maximum limit of ${formatFileSize(VALIDATION.MAX_FILE_SIZE_BYTES)}`\r\n    };\r\n  }\r\n  \r\n  // Check file type\r\n  const validTypes = ['audio/wav', 'audio/mpeg', 'audio/mp4', 'audio/aac', 'audio/flac', 'audio/x-m4a'];\r\n  if (!validTypes.includes(file.type) && !file.name.match(/\\.(wav|mp3|m4a|aac|flac)$/i)) {\r\n    return {\r\n      valid: false,\r\n      error: 'Please select a valid audio file (WAV, MP3, M4A, AAC, or FLAC)'\r\n    };\r\n  }\r\n  \r\n  return { valid: true };\r\n};\r\n\r\n// Accessibility utilities\r\nexport const announceToScreenReader = (message: string, priority: 'polite' | 'assertive' = 'polite'): void => {\r\n  const announcement = document.createElement('div');\r\n  announcement.setAttribute('aria-live', priority);\r\n  announcement.setAttribute('aria-atomic', 'true');\r\n  announcement.className = 'sr-only';\r\n  announcement.textContent = message;\r\n  \r\n  document.body.appendChild(announcement);\r\n  \r\n  // Remove after announcement\r\n  setTimeout(() => {\r\n    document.body.removeChild(announcement);\r\n  }, 1000);\r\n};\r\n\r\nexport const focusElement = (elementId: string, delay = 100): void => {\r\n  setTimeout(() => {\r\n    const element = document.getElementById(elementId);\r\n    if (element) {\r\n      element.focus();\r\n    }\r\n  }, delay);\r\n};\r\n\r\nexport const trapFocus = (container: HTMLElement): { release: () => void } => {\r\n  const focusableElements = container.querySelectorAll(\r\n    'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n  );\r\n  \r\n  const firstFocusable = focusableElements[0] as HTMLElement;\r\n  const lastFocusable = focusableElements[focusableElements.length - 1] as HTMLElement;\r\n  \r\n  const handleTabKey = (e: KeyboardEvent) => {\r\n    if (e.key !== 'Tab') return;\r\n    \r\n    if (e.shiftKey) {\r\n      if (document.activeElement === firstFocusable) {\r\n        lastFocusable?.focus();\r\n        e.preventDefault();\r\n      }\r\n    } else {\r\n      if (document.activeElement === lastFocusable) {\r\n        firstFocusable?.focus();\r\n        e.preventDefault();\r\n      }\r\n    }\r\n  };\r\n  \r\n  container.addEventListener('keydown', handleTabKey);\r\n  firstFocusable?.focus();\r\n  \r\n  return {\r\n    release: () => {\r\n      container.removeEventListener('keydown', handleTabKey);\r\n    }\r\n  };\r\n};\r\n\r\n// Debounce utility\r\nexport const debounce = <T extends (...args: unknown[]) => void>(\r\n  fn: T,\r\n  delay: number\r\n): ((...args: Parameters<T>) => void) => {\r\n  let timeoutId: NodeJS.Timeout;\r\n  \r\n  return (...args: Parameters<T>) => {\r\n    clearTimeout(timeoutId);\r\n    timeoutId = setTimeout(() => fn(...args), delay);\r\n  };\r\n};\r\n","import { createContext, useContext, useEffect, useState } from 'react';\r\nimport { getStoredTheme, setStoredTheme } from '@/utils';\r\nimport type { Theme } from '@/types';\r\n\r\ninterface ThemeContextType {\r\n  theme: Theme;\r\n  toggleTheme: () => void;\r\n  setTheme: (theme: Theme) => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\nexport const useTheme = () => {\r\n  const context = useContext(ThemeContext);\r\n  if (context === undefined) {\r\n    throw new Error('useTheme must be used within a ThemeProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface ThemeProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const ThemeProvider: React.FC<ThemeProviderProps> = ({ children }) => {\r\n  const [theme, setThemeState] = useState<Theme>(getStoredTheme);\r\n\r\n  const setTheme = (newTheme: Theme) => {\r\n    setThemeState(newTheme);\r\n    setStoredTheme(newTheme);\r\n  };\r\n\r\n  const toggleTheme = () => {\r\n    const newTheme = theme === 'light' ? 'dark' : 'light';\r\n    setTheme(newTheme);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Apply theme on mount\r\n    setStoredTheme(theme);\r\n  }, [theme]);\r\n\r\n  useEffect(() => {\r\n    // Listen for system theme changes\r\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n    \r\n    const handleChange = (e: MediaQueryListEvent) => {\r\n      const storedTheme = localStorage.getItem('bh_theme');\r\n      if (!storedTheme) {\r\n        // Only auto-switch if user hasn't set a preference\r\n        setThemeState(e.matches ? 'dark' : 'light');\r\n      }\r\n    };\r\n\r\n    mediaQuery.addEventListener('change', handleChange);\r\n    return () => mediaQuery.removeEventListener('change', handleChange);\r\n  }, []);\r\n\r\n  const value = {\r\n    theme,\r\n    toggleTheme,\r\n    setTheme,\r\n  };\r\n\r\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>;\r\n};\r\n","import { useEffect, useRef, useCallback } from 'react';\r\nimport { announceToScreenReader, focusElement, trapFocus, debounce } from '@/utils';\r\nimport { A11Y } from '@/config/constants';\r\n// import type { A11yAnnouncement } from '@/types'; // Commented out until used\r\n\r\n// Screen reader announcements\r\nexport const useAnnouncements = () => {\r\n  const announce = useCallback((\r\n    message: string, \r\n    priority: 'polite' | 'assertive' = 'polite'\r\n  ) => {\r\n    announceToScreenReader(message, priority);\r\n  }, []);\r\n\r\n  const announceError = useCallback((message: string) => {\r\n    announce(message, 'assertive');\r\n  }, [announce]);\r\n\r\n  const announceSuccess = useCallback((message: string) => {\r\n    announce(message, 'polite');\r\n  }, [announce]);\r\n\r\n  return {\r\n    announce,\r\n    announceError,\r\n    announceSuccess,\r\n  };\r\n};\r\n\r\n// Focus management\r\nexport const useFocusManagement = () => {\r\n  const focusById = useCallback((elementId: string, delay?: number) => {\r\n    focusElement(elementId, delay);\r\n  }, []);\r\n\r\n  const focusFirst = useCallback((container?: HTMLElement) => {\r\n    const target = container || document;\r\n    const firstFocusable = target.querySelector(\r\n      'button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n    ) as HTMLElement;\r\n    \r\n    if (firstFocusable) {\r\n      firstFocusable.focus();\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    focusById,\r\n    focusFirst,\r\n  };\r\n};\r\n\r\n// Focus trap for modals and dialogs\r\nexport const useFocusTrap = (isActive: boolean) => {\r\n  const containerRef = useRef<HTMLElement>(null);\r\n  const trapRef = useRef<{ release: () => void } | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isActive && containerRef.current) {\r\n      trapRef.current = trapFocus(containerRef.current);\r\n    }\r\n\r\n    return () => {\r\n      if (trapRef.current) {\r\n        trapRef.current.release();\r\n        trapRef.current = null;\r\n      }\r\n    };\r\n  }, [isActive]);\r\n\r\n  return containerRef;\r\n};\r\n\r\n// Keyboard navigation\r\nexport const useKeyboardNavigation = () => {\r\n  const handleEscape = useCallback((callback: () => void) => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape') {\r\n        event.preventDefault();\r\n        callback();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, []);\r\n\r\n  const handleEnterSpace = useCallback((callback: () => void) => {\r\n    return (event: React.KeyboardEvent) => {\r\n      if (event.key === 'Enter' || event.key === ' ') {\r\n        event.preventDefault();\r\n        callback();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    handleEscape,\r\n    handleEnterSpace,\r\n  };\r\n};\r\n\r\n// ARIA live regions for dynamic content\r\nexport const useAriaLive = () => {\r\n  const liveRegionRef = useRef<HTMLDivElement>(null);\r\n\r\n  const updateLiveRegion = useCallback((\r\n    message: string,\r\n    priority: 'polite' | 'assertive' = 'polite'\r\n  ) => {\r\n    if (liveRegionRef.current) {\r\n      liveRegionRef.current.setAttribute('aria-live', priority);\r\n      liveRegionRef.current.textContent = message;\r\n    }\r\n  }, []);\r\n\r\n  const clearLiveRegion = useCallback(() => {\r\n    if (liveRegionRef.current) {\r\n      liveRegionRef.current.textContent = '';\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    liveRegionRef,\r\n    updateLiveRegion,\r\n    clearLiveRegion,\r\n  };\r\n};\r\n\r\n// Progress announcements with debouncing\r\nexport const useProgressAnnouncement = () => {\r\n  const lastAnnouncedProgress = useRef(-1);\r\n\r\n  const debouncedProgressAnnounce = debounce((...args: unknown[]) => {\r\n    const progress = args[0] as number;\r\n    const message = args[1] as string;\r\n    // Only announce significant progress changes\r\n    if (Math.abs(progress - lastAnnouncedProgress.current) >= 10 || progress === 100) {\r\n      announceToScreenReader(`${message} ${progress}% complete`, 'polite');\r\n      lastAnnouncedProgress.current = progress;\r\n    }\r\n  }, A11Y.DEBOUNCE_MS);\r\n\r\n  const announceProgress = useCallback(debouncedProgressAnnounce, []);\r\n\r\n  return { announceProgress };\r\n};\r\n\r\n// Skip to content functionality\r\nexport const useSkipToContent = () => {\r\n  const skipToMain = useCallback(() => {\r\n    focusElement(A11Y.SKIP_TO_CONTENT_ID, A11Y.FOCUS_TIMEOUT);\r\n  }, []);\r\n\r\n  return { skipToMain };\r\n};\r\n\r\n// Form accessibility helpers\r\nexport const useFormAccessibility = () => {\r\n  const getFieldId = useCallback((name: string) => `field-${name}`, []);\r\n  const getErrorId = useCallback((name: string) => `error-${name}`, []);\r\n  const getDescriptionId = useCallback((name: string) => `description-${name}`, []);\r\n\r\n  const getFieldProps = useCallback((\r\n    name: string,\r\n    hasError: boolean,\r\n    hasDescription: boolean\r\n  ) => {\r\n    const props: React.InputHTMLAttributes<HTMLInputElement> = {\r\n      id: getFieldId(name),\r\n      'aria-invalid': hasError,\r\n    };\r\n\r\n    const describedBy: string[] = [];\r\n    \r\n    if (hasError) {\r\n      describedBy.push(getErrorId(name));\r\n    }\r\n    \r\n    if (hasDescription) {\r\n      describedBy.push(getDescriptionId(name));\r\n    }\r\n\r\n    if (describedBy.length > 0) {\r\n      props['aria-describedby'] = describedBy.join(' ');\r\n    }\r\n\r\n    return props;\r\n  }, [getFieldId, getErrorId, getDescriptionId]);\r\n\r\n  return {\r\n    getFieldId,\r\n    getErrorId,\r\n    getDescriptionId,\r\n    getFieldProps,\r\n  };\r\n};\r\n\r\n// Status announcements for file uploads and processing\r\nexport const useStatusAnnouncements = () => {\r\n  const announceUploadStart = useCallback((fileName: string) => {\r\n    announceToScreenReader(`Starting upload of ${fileName}`, 'polite');\r\n  }, []);\r\n\r\n  const announceUploadComplete = useCallback((fileName: string) => {\r\n    announceToScreenReader(`Upload of ${fileName} completed successfully`, 'polite');\r\n  }, []);\r\n\r\n  const announceConversionStart = useCallback((fileName: string) => {\r\n    announceToScreenReader(`Starting audio conversion for ${fileName}`, 'polite');\r\n  }, []);\r\n\r\n  const announceConversionComplete = useCallback((fileName: string) => {\r\n    announceToScreenReader(`Audio conversion for ${fileName} completed`, 'polite');\r\n  }, []);\r\n\r\n  const announcePredictionStart = useCallback((sessionId: string) => {\r\n    announceToScreenReader(`Starting behavioral health prediction for session ${sessionId}`, 'polite');\r\n  }, []);\r\n\r\n  const announcePredictionComplete = useCallback((sessionId: string) => {\r\n    announceToScreenReader(`Behavioral health prediction completed for session ${sessionId}`, 'polite');\r\n  }, []);\r\n\r\n  const announceError = useCallback((operation: string, error: string) => {\r\n    announceToScreenReader(`Error during ${operation}: ${error}`, 'assertive');\r\n  }, []);\r\n\r\n  return {\r\n    announceUploadStart,\r\n    announceUploadComplete,\r\n    announceConversionStart,\r\n    announceConversionComplete,\r\n    announcePredictionStart,\r\n    announcePredictionComplete,\r\n    announceError,\r\n  };\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { useTheme } from '@/contexts/ThemeContext';\r\nimport { useKeyboardNavigation } from '@/hooks/accessibility';\r\n\r\ninterface HeaderProps {\r\n  className?: string;\r\n}\r\n\r\nexport const Header: React.FC<HeaderProps> = ({ className = '' }) => {\r\n  const { theme, toggleTheme } = useTheme();\r\n  const location = useLocation();\r\n  const { handleEnterSpace } = useKeyboardNavigation();\r\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n\r\n  const navItems = [\r\n    { path: '/', label: 'Dashboard', icon: 'üè†' },\r\n    { path: '/upload', label: 'Upload & Analyze', icon: 'üì§' },\r\n    { path: '/sessions', label: 'Sessions', icon: 'üìä' },\r\n    { path: '/predictions', label: 'My Predictions', icon: 'üìà' },\r\n    { path: '/agent-experience', label: 'Agent Experience', icon: 'ü§ñ' },\r\n    { path: '/health', label: 'System Health', icon: 'üè•' },\r\n  ];\r\n\r\n  const isActivePath = (path: string) => {\r\n    if (path === '/') {\r\n      return location.pathname === '/';\r\n    }\r\n    return location.pathname.startsWith(path);\r\n  };\r\n\r\n  const toggleMobileMenu = () => {\r\n    setIsMobileMenuOpen(!isMobileMenuOpen);\r\n  };\r\n\r\n  const closeMobileMenu = () => {\r\n    setIsMobileMenuOpen(false);\r\n  };\r\n\r\n  // Close mobile menu when route changes\r\n  useEffect(() => {\r\n    setIsMobileMenuOpen(false);\r\n  }, [location.pathname]);\r\n\r\n  return (\r\n    <header className={`bg-surface-light dark:bg-surface-dark border-b border-gray-200 dark:border-gray-700 ${className}`}>\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex justify-between items-center h-16\">\r\n          {/* Logo and title */}\r\n          <div className=\"flex items-center\">\r\n            <Link\r\n              to=\"/\"\r\n              className=\"flex items-center space-x-3 text-xl font-bold text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 rounded-md px-2 py-1\"\r\n              aria-label=\"Behavioral Health System - Go to Dashboard\"\r\n            >\r\n              <span className=\"text-2xl\" role=\"img\" aria-label=\"Brain icon\">üß†</span>\r\n              <span className=\"hidden sm:block\">Behavioral Health System</span>\r\n              <span className=\"sm:hidden\">BHS</span>\r\n            </Link>\r\n          </div>\r\n\r\n          {/* Navigation */}\r\n          <nav className=\"hidden md:flex space-x-1\" role=\"navigation\" aria-label=\"Main navigation\">\r\n            {navItems.map(({ path, label, icon }) => (\r\n              <Link\r\n                key={path}\r\n                to={path}\r\n                className={`\r\n                  flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors\r\n                  focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\r\n                  ${\r\n                    isActivePath(path)\r\n                      ? 'bg-primary-100 text-primary-900 dark:bg-primary-900 dark:text-primary-100'\r\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-gray-100 dark:hover:bg-gray-700'\r\n                  }\r\n                `}\r\n                aria-current={isActivePath(path) ? 'page' : undefined}\r\n              >\r\n                <span role=\"img\" aria-hidden=\"true\">{icon}</span>\r\n                <span>{label}</span>\r\n              </Link>\r\n            ))}\r\n          </nav>\r\n\r\n          {/* Theme toggle */}\r\n          <div className=\"flex items-center space-x-4\">\r\n            <button\r\n              onClick={toggleTheme}\r\n              onKeyDown={handleEnterSpace(toggleTheme)}\r\n              className=\"\r\n                p-2 rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-100\r\n                dark:text-gray-400 dark:hover:text-gray-100 dark:hover:bg-gray-700\r\n                focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\r\n                transition-colors touch-target\r\n              \"\r\n              aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} mode`}\r\n              type=\"button\"\r\n            >\r\n              <span className=\"text-xl\" role=\"img\" aria-hidden=\"true\">\r\n                {theme === 'light' ? 'üåô' : '‚òÄÔ∏è'}\r\n              </span>\r\n            </button>\r\n\r\n            {/* Mobile menu button */}\r\n            <button\r\n              onClick={toggleMobileMenu}\r\n              onKeyDown={handleEnterSpace(toggleMobileMenu)}\r\n              className=\"\r\n                md:hidden p-2 rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-100\r\n                dark:text-gray-400 dark:hover:text-gray-100 dark:hover:bg-gray-700\r\n                focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\r\n                transition-colors touch-target\r\n              \"\r\n              aria-label={isMobileMenuOpen ? \"Close mobile menu\" : \"Open mobile menu\"}\r\n              type=\"button\"\r\n              {...(isMobileMenuOpen ? { 'aria-expanded': true } : { 'aria-expanded': false })}\r\n            >\r\n              <span className=\"text-xl\" role=\"img\" aria-hidden=\"true\">\r\n                {isMobileMenuOpen ? '‚úï' : '‚ò∞'}\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mobile navigation */}\r\n        {isMobileMenuOpen && (\r\n          <div className=\"md:hidden border-t border-gray-200 dark:border-gray-700 pt-4 pb-3\">\r\n            <nav className=\"space-y-1\" role=\"navigation\" aria-label=\"Mobile navigation\">\r\n              {navItems.map(({ path, label, icon }) => (\r\n                <Link\r\n                  key={path}\r\n                  to={path}\r\n                  onClick={closeMobileMenu}\r\n                  className={`\r\n                    flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium transition-colors\r\n                    focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\r\n                    ${\r\n                      isActivePath(path)\r\n                        ? 'bg-primary-100 text-primary-900 dark:bg-primary-900 dark:text-primary-100'\r\n                        : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-gray-100 dark:hover:bg-gray-700'\r\n                    }\r\n                  `}\r\n                  aria-current={isActivePath(path) ? 'page' : undefined}\r\n                >\r\n                  <span role=\"img\" aria-hidden=\"true\">{icon}</span>\r\n                  <span>{label}</span>\r\n                </Link>\r\n              ))}\r\n            </nav>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n","import { SVGProps } from 'react';\r\n\r\ninterface MicrosoftLogoProps extends SVGProps<SVGSVGElement> {\r\n  size?: number;\r\n  className?: string;\r\n}\r\n\r\nexport const MicrosoftLogo: React.FC<MicrosoftLogoProps> = ({\r\n  size = 20,\r\n  className = '',\r\n  ...props\r\n}) => {\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox=\"0 0 23 23\"\r\n      className={className}\r\n      aria-label=\"Microsoft\"\r\n      {...props}\r\n    >\r\n      {/* Microsoft logo squares */}\r\n      <rect x=\"1\" y=\"1\" width=\"10\" height=\"10\" fill=\"#f25022\" />\r\n      <rect x=\"12\" y=\"1\" width=\"10\" height=\"10\" fill=\"#7fba00\" />\r\n      <rect x=\"1\" y=\"12\" width=\"10\" height=\"10\" fill=\"#00a4ef\" />\r\n      <rect x=\"12\" y=\"12\" width=\"10\" height=\"10\" fill=\"#ffb900\" />\r\n    </svg>\r\n  );\r\n};\r\n","import { ReactNode } from 'react';\r\nimport { Header } from './Header';\r\nimport { useSkipToContent } from '@/hooks/accessibility';\r\nimport { A11Y } from '@/config/constants';\r\nimport { MicrosoftLogo } from '@/components/icons';\r\n\r\ninterface LayoutProps {\r\n  children: ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport const Layout: React.FC<LayoutProps> = ({ children, className = '' }) => {\r\n  const { skipToMain } = useSkipToContent();\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background-light dark:bg-background-dark\">\r\n      {/* Skip to content link for keyboard navigation */}\r\n      <a\r\n        href={`#${A11Y.SKIP_TO_CONTENT_ID}`}\r\n        className=\"skip-link\"\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          skipToMain();\r\n        }}\r\n      >\r\n        Skip to main content\r\n      </a>\r\n\r\n      {/* Header */}\r\n      <Header />\r\n\r\n      {/* Main content */}\r\n      <main\r\n        id={A11Y.SKIP_TO_CONTENT_ID}\r\n        className={`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 ${className}`}\r\n        tabIndex={-1}\r\n      >\r\n        {children}\r\n      </main>\r\n\r\n      {/* ARIA live region for announcements */}\r\n      <div\r\n        id={A11Y.ANNOUNCEMENTS_ID}\r\n        className=\"sr-only\"\r\n        aria-live=\"polite\"\r\n        aria-atomic=\"true\"\r\n      />\r\n\r\n      {/* Footer */}\r\n      <footer className=\"bg-surface-light dark:bg-surface-dark border-t border-gray-200 dark:border-gray-700 mt-auto\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n          <div className=\"flex flex-col items-center space-y-4\">\r\n            {/* Microsoft Logo */}\r\n            <div className=\"flex items-center space-x-2\">\r\n              <MicrosoftLogo size={24} className=\"opacity-80\" />\r\n              <span className=\"text-sm text-text-muted-light dark:text-text-muted-dark font-medium\">\r\n                Powered by Microsoft\r\n              </span>\r\n            </div>\r\n            \r\n            {/* Copyright and Compliance */}\r\n            <div className=\"text-center text-sm text-text-muted-light dark:text-text-muted-dark\">\r\n              <p>\r\n                Behavioral Health System &copy; {new Date().getFullYear()}\r\n              </p>\r\n              <p className=\"mt-1\">\r\n                WCAG 2.2 AA Compliant ‚Ä¢ Section 508 Compliant\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n};\n\nexport { hasA11yProp, mergeClasses, toCamelCase, toKebabCase, toPascalCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses, hasA11yProp } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => createElement(\n    \"svg\",\n    {\n      ref,\n      ...defaultAttributes,\n      width: size,\n      height: size,\n      stroke: color,\n      strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n      className: mergeClasses(\"lucide\", className),\n      ...!children && !hasA11yProp(rest) && { \"aria-hidden\": \"true\" },\n      ...rest\n    },\n    [\n      ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n      ...Array.isArray(children) ? children : [children]\n    ]\n  )\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className\n      ),\n      ...props\n    })\n  );\n  Component.displayName = toPascalCase(iconName);\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n];\nconst Activity = createLucideIcon(\"activity\", __iconNode);\n\nexport { __iconNode, Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"arrow-left\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 18V5\", key: \"adv99a\" }],\n  [\"path\", { d: \"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4\", key: \"1e3is1\" }],\n  [\"path\", { d: \"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5\", key: \"1gqd8o\" }],\n  [\"path\", { d: \"M17.997 5.125a4 4 0 0 1 2.526 5.77\", key: \"iwvgf7\" }],\n  [\"path\", { d: \"M18 18a4 4 0 0 0 2-7.464\", key: \"efp6ie\" }],\n  [\"path\", { d: \"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517\", key: \"1gq6am\" }],\n  [\"path\", { d: \"M6 18a4 4 0 0 1-2-7.464\", key: \"k1g0md\" }],\n  [\"path\", { d: \"M6.003 5.125a4 4 0 0 0-2.526 5.77\", key: \"q97ue3\" }]\n];\nconst Brain = createLucideIcon(\"brain\", __iconNode);\n\nexport { __iconNode, Brain as default };\n//# sourceMappingURL=brain.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M8 2v4\", key: \"1cmpym\" }],\n  [\"path\", { d: \"M16 2v4\", key: \"4m81vk\" }],\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", key: \"1hopcy\" }],\n  [\"path\", { d: \"M3 10h18\", key: \"8toen8\" }]\n];\nconst Calendar = createLucideIcon(\"calendar\", __iconNode);\n\nexport { __iconNode, Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 3v16a2 2 0 0 0 2 2h16\", key: \"c24i48\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n];\nconst ChartColumn = createLucideIcon(\"chart-column\", __iconNode);\n\nexport { __iconNode, ChartColumn as default };\n//# sourceMappingURL=chart-column.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z\",\n      key: \"pzmjnu\"\n    }\n  ],\n  [\"path\", { d: \"M21.21 15.89A10 10 0 1 1 8 2.83\", key: \"k2fpak\" }]\n];\nconst ChartPie = createLucideIcon(\"chart-pie\", __iconNode);\n\nexport { __iconNode, ChartPie as default };\n//# sourceMappingURL=chart-pie.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]];\nconst ChevronDown = createLucideIcon(\"chevron-down\", __iconNode);\n\nexport { __iconNode, ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m18 15-6-6-6 6\", key: \"153udz\" }]];\nconst ChevronUp = createLucideIcon(\"chevron-up\", __iconNode);\n\nexport { __iconNode, ChevronUp as default };\n//# sourceMappingURL=chevron-up.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n];\nconst CircleAlert = createLucideIcon(\"circle-alert\", __iconNode);\n\nexport { __iconNode, CircleAlert as default };\n//# sourceMappingURL=circle-alert.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21.801 10A10 10 0 1 1 17 3.335\", key: \"yps3ct\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n];\nconst CircleCheckBig = createLucideIcon(\"circle-check-big\", __iconNode);\n\nexport { __iconNode, CircleCheckBig as default };\n//# sourceMappingURL=circle-check-big.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n];\nconst CircleX = createLucideIcon(\"circle-x\", __iconNode);\n\nexport { __iconNode, CircleX as default };\n//# sourceMappingURL=circle-x.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 6v6l4 2\", key: \"mmk7yg\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n];\nconst Clock = createLucideIcon(\"clock\", __iconNode);\n\nexport { __iconNode, Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 15V3\", key: \"m9g1x1\" }],\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"path\", { d: \"m7 10 5 5 5-5\", key: \"brsn70\" }]\n];\nconst Download = createLucideIcon(\"download\", __iconNode);\n\nexport { __iconNode, Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49\",\n      key: \"ct8e1f\"\n    }\n  ],\n  [\"path\", { d: \"M14.084 14.158a3 3 0 0 1-4.242-4.242\", key: \"151rxh\" }],\n  [\n    \"path\",\n    {\n      d: \"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143\",\n      key: \"13bj9a\"\n    }\n  ],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n];\nconst EyeOff = createLucideIcon(\"eye-off\", __iconNode);\n\nexport { __iconNode, EyeOff as default };\n//# sourceMappingURL=eye-off.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0\",\n      key: \"1nclc0\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n];\nconst Eye = createLucideIcon(\"eye\", __iconNode);\n\nexport { __iconNode, Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3\", key: \"rslqgf\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\n    \"path\",\n    {\n      d: \"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0\",\n      key: \"9f7x3i\"\n    }\n  ]\n];\nconst FileAudio = createLucideIcon(\"file-audio\", __iconNode);\n\nexport { __iconNode, FileAudio as default };\n//# sourceMappingURL=file-audio.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n];\nconst FileText = createLucideIcon(\"file-text\", __iconNode);\n\nexport { __iconNode, FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }]\n];\nconst File = createLucideIcon(\"file\", __iconNode);\n\nexport { __iconNode, File as default };\n//# sourceMappingURL=file.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z\",\n      key: \"1vo8kb\"\n    }\n  ],\n  [\"path\", { d: \"M15 2v4a2 2 0 0 0 2 2h4\", key: \"sud9ri\" }],\n  [\"path\", { d: \"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1\", key: \"l4dndm\" }]\n];\nconst Files = createLucideIcon(\"files\", __iconNode);\n\nexport { __iconNode, Files as default };\n//# sourceMappingURL=files.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z\",\n      key: \"sc7q7i\"\n    }\n  ]\n];\nconst Funnel = createLucideIcon(\"funnel\", __iconNode);\n\nexport { __iconNode, Funnel as default };\n//# sourceMappingURL=funnel.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5\",\n      key: \"mvr1a0\"\n    }\n  ]\n];\nconst Heart = createLucideIcon(\"heart\", __iconNode);\n\nexport { __iconNode, Heart as default };\n//# sourceMappingURL=heart.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n];\nconst Info = createLucideIcon(\"info\", __iconNode);\n\nexport { __iconNode, Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m5 8 6 6\", key: \"1wu5hv\" }],\n  [\"path\", { d: \"m4 14 6-6 2-3\", key: \"1k1g8d\" }],\n  [\"path\", { d: \"M2 5h12\", key: \"or177f\" }],\n  [\"path\", { d: \"M7 2h1\", key: \"1t2jsx\" }],\n  [\"path\", { d: \"m22 22-5-10-5 10\", key: \"don7ne\" }],\n  [\"path\", { d: \"M14 18h6\", key: \"1m8k6r\" }]\n];\nconst Languages = createLucideIcon(\"languages\", __iconNode);\n\nexport { __iconNode, Languages as default };\n//# sourceMappingURL=languages.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5\",\n      key: \"1gvzjb\"\n    }\n  ],\n  [\"path\", { d: \"M9 18h6\", key: \"x1upvd\" }],\n  [\"path\", { d: \"M10 22h4\", key: \"ceow96\" }]\n];\nconst Lightbulb = createLucideIcon(\"lightbulb\", __iconNode);\n\nexport { __iconNode, Lightbulb as default };\n//# sourceMappingURL=lightbulb.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]];\nconst LoaderCircle = createLucideIcon(\"loader-circle\", __iconNode);\n\nexport { __iconNode, LoaderCircle as default };\n//# sourceMappingURL=loader-circle.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 19v3\", key: \"npa21l\" }],\n  [\"path\", { d: \"M15 9.34V5a3 3 0 0 0-5.68-1.33\", key: \"1gzdoj\" }],\n  [\"path\", { d: \"M16.95 16.95A7 7 0 0 1 5 12v-2\", key: \"cqa7eg\" }],\n  [\"path\", { d: \"M18.89 13.23A7 7 0 0 0 19 12v-2\", key: \"16hl24\" }],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }],\n  [\"path\", { d: \"M9 9v3a3 3 0 0 0 5.12 2.12\", key: \"r2i35w\" }]\n];\nconst MicOff = createLucideIcon(\"mic-off\", __iconNode);\n\nexport { __iconNode, MicOff as default };\n//# sourceMappingURL=mic-off.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 19v3\", key: \"npa21l\" }],\n  [\"path\", { d: \"M19 10v2a7 7 0 0 1-14 0v-2\", key: \"1vc78b\" }],\n  [\"rect\", { x: \"9\", y: \"2\", width: \"6\", height: \"13\", rx: \"3\", key: \"s6n7sd\" }]\n];\nconst Mic = createLucideIcon(\"mic\", __iconNode);\n\nexport { __iconNode, Mic as default };\n//# sourceMappingURL=mic.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { x: \"14\", y: \"3\", width: \"5\", height: \"18\", rx: \"1\", key: \"kaeet6\" }],\n  [\"rect\", { x: \"5\", y: \"3\", width: \"5\", height: \"18\", rx: \"1\", key: \"1wsw3u\" }]\n];\nconst Pause = createLucideIcon(\"pause\", __iconNode);\n\nexport { __iconNode, Pause as default };\n//# sourceMappingURL=pause.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z\",\n      key: \"10ikf1\"\n    }\n  ]\n];\nconst Play = createLucideIcon(\"play\", __iconNode);\n\nexport { __iconNode, Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n];\nconst Plus = createLucideIcon(\"plus\", __iconNode);\n\nexport { __iconNode, Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n];\nconst RefreshCw = createLucideIcon(\"refresh-cw\", __iconNode);\n\nexport { __iconNode, RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m21 21-4.34-4.34\", key: \"14j7rj\" }],\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }]\n];\nconst Search = createLucideIcon(\"search\", __iconNode);\n\nexport { __iconNode, Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",\n      key: \"1ffxy3\"\n    }\n  ],\n  [\"path\", { d: \"m21.854 2.147-10.94 10.939\", key: \"12cjpa\" }]\n];\nconst Send = createLucideIcon(\"send\", __iconNode);\n\nexport { __iconNode, Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n];\nconst Settings = createLucideIcon(\"settings\", __iconNode);\n\nexport { __iconNode, Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ],\n  [\"path\", { d: \"M12 8v4\", key: \"1got3b\" }],\n  [\"path\", { d: \"M12 16h.01\", key: \"1drbdi\" }]\n];\nconst ShieldAlert = createLucideIcon(\"shield-alert\", __iconNode);\n\nexport { __iconNode, ShieldAlert as default };\n//# sourceMappingURL=shield-alert.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"6\", key: \"1vlfrh\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"2\", key: \"1c9p78\" }]\n];\nconst Target = createLucideIcon(\"target\", __iconNode);\n\nexport { __iconNode, Target as default };\n//# sourceMappingURL=target.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 11v6\", key: \"nco0om\" }],\n  [\"path\", { d: \"M14 11v6\", key: \"outv1u\" }],\n  [\"path\", { d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6\", key: \"miytrc\" }],\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\", key: \"e791ji\" }]\n];\nconst Trash2 = createLucideIcon(\"trash-2\", __iconNode);\n\nexport { __iconNode, Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 17h6v-6\", key: \"t6n2it\" }],\n  [\"path\", { d: \"m22 17-8.5-8.5-5 5L2 7\", key: \"x473p\" }]\n];\nconst TrendingDown = createLucideIcon(\"trending-down\", __iconNode);\n\nexport { __iconNode, TrendingDown as default };\n//# sourceMappingURL=trending-down.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 7h6v6\", key: \"box55l\" }],\n  [\"path\", { d: \"m22 7-8.5 8.5-5-5L2 17\", key: \"1t1m79\" }]\n];\nconst TrendingUp = createLucideIcon(\"trending-up\", __iconNode);\n\nexport { __iconNode, TrendingUp as default };\n//# sourceMappingURL=trending-up.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n];\nconst TriangleAlert = createLucideIcon(\"triangle-alert\", __iconNode);\n\nexport { __iconNode, TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 3v12\", key: \"1x0j5s\" }],\n  [\"path\", { d: \"m17 8-5-5-5 5\", key: \"7q97r8\" }],\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }]\n];\nconst Upload = createLucideIcon(\"upload\", __iconNode);\n\nexport { __iconNode, Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n];\nconst User = createLucideIcon(\"user\", __iconNode);\n\nexport { __iconNode, User as default };\n//# sourceMappingURL=user.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z\",\n      key: \"uqj9uw\"\n    }\n  ],\n  [\"path\", { d: \"M16 9a5 5 0 0 1 0 6\", key: \"1q6k2b\" }],\n  [\"path\", { d: \"M19.364 18.364a9 9 0 0 0 0-12.728\", key: \"ijwkga\" }]\n];\nconst Volume2 = createLucideIcon(\"volume-2\", __iconNode);\n\nexport { __iconNode, Volume2 as default };\n//# sourceMappingURL=volume-2.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z\",\n      key: \"uqj9uw\"\n    }\n  ],\n  [\"line\", { x1: \"22\", x2: \"16\", y1: \"9\", y2: \"15\", key: \"1ewh16\" }],\n  [\"line\", { x1: \"16\", x2: \"22\", y1: \"9\", y2: \"15\", key: \"5ykzw1\" }]\n];\nconst VolumeX = createLucideIcon(\"volume-x\", __iconNode);\n\nexport { __iconNode, VolumeX as default };\n//# sourceMappingURL=volume-x.js.map\n","/**\n * @license lucide-react v0.542.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n];\nconst X = createLucideIcon(\"x\", __iconNode);\n\nexport { __iconNode, X as default };\n//# sourceMappingURL=x.js.map\n","import { config, API_ENDPOINTS } from '@/config/constants';\r\nimport { createAppError, isNetworkError } from '@/utils';\r\nimport type {\r\n  SessionInitiateRequest,\r\n  SessionInitiateResponse,\r\n  PredictionSubmitRequest,\r\n  PredictionSubmitResponse,\r\n  PredictionResult,\r\n  HealthCheckResponse,\r\n  SessionData,\r\n  RiskAssessment,\r\n  AppError,\r\n} from '@/types';\r\n\r\n// Base API client with error handling\r\nclass ApiClient {\r\n  private baseUrl: string;\r\n\r\n  constructor(baseUrl: string) {\r\n    this.baseUrl = baseUrl;\r\n  }\r\n\r\n  private async handleResponse<T>(response: Response): Promise<T> {\r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => ({}));\r\n      \r\n      throw createAppError(\r\n        `HTTP_${response.status}`,\r\n        errorData.message || `HTTP ${response.status}: ${response.statusText}`,\r\n        {\r\n          status: response.status,\r\n          statusText: response.statusText,\r\n          data: errorData,\r\n        }\r\n      );\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  private async request<T>(\r\n    endpoint: string,\r\n    options: RequestInit = {}\r\n  ): Promise<T> {\r\n    try {\r\n      // Handle trailing/leading slashes to avoid double slashes\r\n      const baseUrl = this.baseUrl.endsWith('/') ? this.baseUrl.slice(0, -1) : this.baseUrl;\r\n      const cleanEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\r\n      const url = `${baseUrl}${cleanEndpoint}`;\r\n      \r\n      const defaultHeaders = {\r\n        'Content-Type': 'application/json',\r\n        ...options.headers,\r\n      };\r\n\r\n      const response = await fetch(url, {\r\n        ...options,\r\n        headers: defaultHeaders,\r\n      });\r\n\r\n      return this.handleResponse<T>(response);\r\n    } catch (error) {\r\n      if (isNetworkError(error)) {\r\n        throw createAppError(\r\n          'NETWORK_ERROR',\r\n          'Unable to connect to the server. Please check your internet connection.',\r\n          { originalError: error }\r\n        );\r\n      }\r\n      \r\n      if (error instanceof Error && 'code' in error) {\r\n        throw error; // Re-throw AppError\r\n      }\r\n      \r\n      throw createAppError(\r\n        'UNKNOWN_ERROR',\r\n        'An unexpected error occurred',\r\n        { originalError: error }\r\n      );\r\n    }\r\n  }\r\n\r\n  async get<T>(endpoint: string): Promise<T> {\r\n    return this.request<T>(endpoint, { method: 'GET' });\r\n  }\r\n\r\n  async post<T>(endpoint: string, data?: unknown): Promise<T> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'POST',\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  }\r\n\r\n  async put<T>(endpoint: string, data?: unknown): Promise<T> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'PUT',\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  }\r\n\r\n  async delete<T>(endpoint: string): Promise<T> {\r\n    return this.request<T>(endpoint, { method: 'DELETE' });\r\n  }\r\n}\r\n\r\n// Create API client instance\r\nconst apiClient = new ApiClient(config.api.baseUrl);\r\n\r\n// API Service functions\r\nexport const apiService = {\r\n  // Health check\r\n  async checkHealth(): Promise<HealthCheckResponse> {\r\n    return apiClient.get<HealthCheckResponse>(API_ENDPOINTS.HEALTH);\r\n  },\r\n\r\n  // Session management\r\n  async initiateSession(request: SessionInitiateRequest): Promise<SessionInitiateResponse> {\r\n    return apiClient.post<SessionInitiateResponse>(\r\n      API_ENDPOINTS.SESSIONS_INITIATE,\r\n      request\r\n    );\r\n  },\r\n\r\n  // Prediction submission\r\n  async submitPrediction(request: PredictionSubmitRequest): Promise<PredictionSubmitResponse> {\r\n    return apiClient.post<PredictionSubmitResponse>(\r\n      API_ENDPOINTS.PREDICTIONS_SUBMIT,\r\n      request\r\n    );\r\n  },\r\n\r\n  // Get prediction results\r\n  async getPredictionBySessionId(sessionId: string): Promise<PredictionResult> {\r\n    return apiClient.get<PredictionResult>(\r\n      `${API_ENDPOINTS.PREDICTIONS_BY_SESSION}/${sessionId}`\r\n    );\r\n  },\r\n\r\n  // Get user predictions\r\n  async getUserPredictions(userId: string): Promise<PredictionResult[]> {\r\n    return apiClient.get<PredictionResult[]>(\r\n      `${API_ENDPOINTS.PREDICTIONS_BY_USER}/${userId}`\r\n    );\r\n  },\r\n\r\n  // Session Storage API methods\r\n  async saveSessionData(sessionData: SessionData): Promise<{ success: boolean; sessionId: string; message: string }> {\r\n    return apiClient.post<{ success: boolean; sessionId: string; message: string }>(\r\n      'sessions',\r\n      sessionData\r\n    );\r\n  },\r\n\r\n  async getSessionData(sessionId: string): Promise<SessionData> {\r\n    return apiClient.get<SessionData>(`sessions/${sessionId}`);\r\n  },\r\n\r\n  async getUserSessions(userId: string): Promise<{ success: boolean; count: number; sessions: SessionData[] }> {\r\n    return apiClient.get<{ success: boolean; count: number; sessions: SessionData[] }>(\r\n      `sessions/users/${userId}`\r\n    );\r\n  },\r\n\r\n  async updateSessionData(sessionId: string, sessionData: SessionData): Promise<{ success: boolean; message: string }> {\r\n    return apiClient.put<{ success: boolean; message: string }>(\r\n      `sessions/${sessionId}`,\r\n      sessionData\r\n    );\r\n  },\r\n\r\n  async deleteSessionData(sessionId: string): Promise<{ success: boolean; message: string }> {\r\n    return apiClient.delete<{ success: boolean; message: string }>(\r\n      `sessions/${sessionId}`\r\n    );\r\n  },\r\n\r\n  // Test API connection\r\n  async testConnection(): Promise<{ success: boolean; message: string }> {\r\n    try {\r\n      await this.checkHealth();\r\n      return { success: true, message: 'API connection successful' };\r\n    } catch (error) {\r\n      const appError = error as AppError;\r\n      return { \r\n        success: false, \r\n        message: appError.message || 'Connection test failed' \r\n      };\r\n    }\r\n  },\r\n\r\n  // Kintsugi Workflow - complete workflow for audio analysis\r\n  async submitKintsugiWorkflow(request: {\r\n    userMetadata: {\r\n      userId: string;\r\n      age?: number;\r\n      gender?: string;\r\n      sessionNotes?: string;\r\n    };\r\n    audioUrl: string;\r\n  }): Promise<{ prediction: PredictionResult }> {\r\n    return apiClient.post<{ prediction: PredictionResult }>(\r\n      '/kintsugiworkflow',\r\n      request\r\n    );\r\n  },\r\n\r\n  // Risk Assessment API methods\r\n  async generateRiskAssessment(sessionId: string): Promise<{ success: boolean; riskAssessment?: RiskAssessment; message: string }> {\r\n    return apiClient.post<{ success: boolean; riskAssessment?: RiskAssessment; message: string }>(\r\n      `sessions/${sessionId}/risk-assessment`\r\n    );\r\n  },\r\n\r\n  async getRiskAssessment(sessionId: string): Promise<{ success: boolean; riskAssessment?: RiskAssessment; message: string }> {\r\n    return apiClient.get<{ success: boolean; riskAssessment?: RiskAssessment; message: string }>(\r\n      `sessions/${sessionId}/risk-assessment`\r\n    );\r\n  },\r\n};\r\n\r\n// Polling utilities\r\nexport class PredictionPoller {\r\n  private sessionId: string;\r\n  private intervalMs: number;\r\n  private maxAttempts: number;\r\n  private backoffFactor: number;\r\n  private currentAttempt = 0;\r\n  private timeoutId: number | null = null;\r\n  private isPolling = false;\r\n\r\n  constructor(\r\n    sessionId: string,\r\n    options: {\r\n      intervalMs?: number;\r\n      maxAttempts?: number;\r\n      backoffFactor?: number;\r\n    } = {}\r\n  ) {\r\n    this.sessionId = sessionId;\r\n    this.intervalMs = options.intervalMs || config.polling.intervalMs;\r\n    this.maxAttempts = options.maxAttempts || config.polling.maxAttempts;\r\n    this.backoffFactor = options.backoffFactor || config.polling.backoffFactor;\r\n  }\r\n\r\n  async start(\r\n    onUpdate: (result: PredictionResult) => void,\r\n    onComplete: (result: PredictionResult) => void,\r\n    onError: (error: AppError) => void\r\n  ): Promise<void> {\r\n    if (this.isPolling) {\r\n      return;\r\n    }\r\n\r\n    this.isPolling = true;\r\n    this.currentAttempt = 0;\r\n\r\n    const poll = async (): Promise<void> => {\r\n      try {\r\n        const result = await apiService.getPredictionBySessionId(this.sessionId);\r\n        \r\n        onUpdate(result);\r\n\r\n        if (result.status === 'succeeded' || result.status === 'success' || result.status === 'failed') {\r\n          this.stop();\r\n          onComplete(result);\r\n          return;\r\n        }\r\n\r\n        this.currentAttempt++;\r\n\r\n        if (this.currentAttempt >= this.maxAttempts) {\r\n          this.stop();\r\n          onError(createAppError(\r\n            'POLLING_TIMEOUT',\r\n            'Prediction polling timed out. Please check the session manually.',\r\n            { sessionId: this.sessionId, attempts: this.currentAttempt }\r\n          ));\r\n          return;\r\n        }\r\n\r\n        // Schedule next poll with exponential backoff\r\n        const nextInterval = this.intervalMs * Math.pow(this.backoffFactor, this.currentAttempt);\r\n        this.timeoutId = window.setTimeout(poll, nextInterval);\r\n\r\n      } catch (error) {\r\n        this.stop();\r\n        onError(error as AppError);\r\n      }\r\n    };\r\n\r\n    // Start polling immediately\r\n    await poll();\r\n  }\r\n\r\n  stop(): void {\r\n    this.isPolling = false;\r\n    if (this.timeoutId) {\r\n      clearTimeout(this.timeoutId);\r\n      this.timeoutId = null;\r\n    }\r\n  }\r\n\r\n  getStatus(): { isPolling: boolean; attempt: number; maxAttempts: number } {\r\n    return {\r\n      isPolling: this.isPolling,\r\n      attempt: this.currentAttempt,\r\n      maxAttempts: this.maxAttempts,\r\n    };\r\n  }\r\n}\r\n\r\n// Convenience function for the Upload & Analyze page\r\nexport const submitKintsugiWorkflow = apiService.submitKintsugiWorkflow.bind(apiService);\r\n\r\n// Export PredictionResult type for external use\r\nexport type { PredictionResult } from '@/types';\r\n","import { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { apiService, PredictionPoller } from '@/services/api';\r\nimport { getUserId } from '@/utils';\r\nimport type {\r\n  SessionInitiateRequest,\r\n  PredictionSubmitRequest,\r\n  PredictionResult,\r\n  HealthCheckResponse,\r\n  SessionData,\r\n  AppError,\r\n} from '@/types';\r\n\r\n// Query keys\r\nexport const QUERY_KEYS = {\r\n  health: ['health'] as const,\r\n  userPredictions: (userId: string) => ['predictions', 'user', userId] as const,\r\n  sessionPrediction: (sessionId: string) => ['predictions', 'session', sessionId] as const,\r\n  userSessions: (userId: string) => ['sessions', 'user', userId] as const,\r\n} as const;\r\n\r\n// Health check query\r\nexport const useHealthCheck = () => {\r\n  return useQuery<HealthCheckResponse, AppError>({\r\n    queryKey: QUERY_KEYS.health,\r\n    queryFn: () => apiService.checkHealth(),\r\n    retry: 2,\r\n    staleTime: 30000, // 30 seconds\r\n    refetchOnWindowFocus: false,\r\n  });\r\n};\r\n\r\n// Session initiation mutation\r\nexport const useInitiateSession = () => {\r\n  return useMutation({\r\n    mutationFn: (request: SessionInitiateRequest) => \r\n      apiService.initiateSession(request),\r\n    onError: () => {\r\n      // Error is handled by the UI components\r\n    },\r\n  });\r\n};\r\n\r\n// Prediction submission mutation\r\nexport const useSubmitPrediction = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: (request: PredictionSubmitRequest) => \r\n      apiService.submitPrediction(request),\r\n    onSuccess: (_, variables) => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({\r\n        queryKey: QUERY_KEYS.sessionPrediction(variables.sessionid),\r\n      });\r\n      \r\n      const userId = getUserId();\r\n      queryClient.invalidateQueries({\r\n        queryKey: QUERY_KEYS.userPredictions(userId),\r\n      });\r\n    },\r\n    onError: () => {\r\n      // Error is handled by the UI components\r\n    },\r\n  });\r\n};\r\n\r\n// Get prediction by session ID\r\nexport const useSessionPrediction = (sessionId: string, enabled = true) => {\r\n  return useQuery<PredictionResult, AppError>({\r\n    queryKey: QUERY_KEYS.sessionPrediction(sessionId),\r\n    queryFn: () => apiService.getPredictionBySessionId(sessionId),\r\n    enabled: enabled && Boolean(sessionId),\r\n    retry: (failureCount, error) => {\r\n      // Don't retry on 404s (session not found)\r\n      if (error.code === 'HTTP_404') {\r\n        return false;\r\n      }\r\n      return failureCount < 3;\r\n    },\r\n    refetchOnWindowFocus: false,\r\n  });\r\n};\r\n\r\n// Get user predictions\r\nexport const useUserPredictions = (userId?: string) => {\r\n  const effectiveUserId = userId || getUserId();\r\n\r\n  return useQuery<PredictionResult[], AppError>({\r\n    queryKey: QUERY_KEYS.userPredictions(effectiveUserId),\r\n    queryFn: () => apiService.getUserPredictions(effectiveUserId),\r\n    enabled: Boolean(effectiveUserId),\r\n    staleTime: 60000, // 1 minute\r\n    refetchOnWindowFocus: false,\r\n  });\r\n};\r\n\r\n// Get user sessions with complete session data\r\nexport const useUserSessions = (userId?: string) => {\r\n  const effectiveUserId = userId || getUserId();\r\n\r\n  return useQuery<{ success: boolean; count: number; sessions: SessionData[] }, AppError>({\r\n    queryKey: QUERY_KEYS.userSessions(effectiveUserId),\r\n    queryFn: () => apiService.getUserSessions(effectiveUserId),\r\n    enabled: Boolean(effectiveUserId),\r\n    staleTime: 30000, // 30 seconds\r\n    refetchOnWindowFocus: false,\r\n  });\r\n};\r\n\r\n// Prediction polling hook\r\nexport const usePredictionPolling = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const startPolling = (\r\n    sessionId: string,\r\n    options?: {\r\n      onUpdate?: (result: PredictionResult) => void;\r\n      onComplete?: (result: PredictionResult) => void;\r\n      onError?: (error: AppError) => void;\r\n    }\r\n  ) => {\r\n    const poller = new PredictionPoller(sessionId);\r\n\r\n    return poller.start(\r\n      (result) => {\r\n        // Update cache\r\n        queryClient.setQueryData(\r\n          QUERY_KEYS.sessionPrediction(sessionId),\r\n          result\r\n        );\r\n        options?.onUpdate?.(result);\r\n      },\r\n      (result) => {\r\n        // Final update and invalidate user predictions\r\n        queryClient.setQueryData(\r\n          QUERY_KEYS.sessionPrediction(sessionId),\r\n          result\r\n        );\r\n        \r\n        const userId = getUserId();\r\n        queryClient.invalidateQueries({\r\n          queryKey: QUERY_KEYS.userPredictions(userId),\r\n        });\r\n        \r\n        options?.onComplete?.(result);\r\n      },\r\n      (error) => {\r\n        options?.onError?.(error);\r\n      }\r\n    );\r\n  };\r\n\r\n  return { startPolling };\r\n};\r\n\r\n// API connection test\r\nexport const useTestConnection = () => {\r\n  return useMutation({\r\n    mutationFn: () => apiService.testConnection(),\r\n    onError: () => {\r\n      // Error is handled by the UI components\r\n    },\r\n  });\r\n};\r\n\r\n// Optimistic updates helper\r\nexport const useOptimisticUpdates = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const updateSessionStatus = (sessionId: string, status: PredictionResult['status']) => {\r\n    queryClient.setQueryData(\r\n      QUERY_KEYS.sessionPrediction(sessionId),\r\n      (old: PredictionResult | undefined) => {\r\n        if (!old) return old;\r\n        return {\r\n          ...old,\r\n          status,\r\n          updatedAt: new Date().toISOString(),\r\n        };\r\n      }\r\n    );\r\n  };\r\n\r\n  const addNewSession = (sessionId: string, userId: string) => {\r\n    const newSession: PredictionResult = {\r\n      sessionId,\r\n      status: 'queued',\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString(),\r\n    };\r\n\r\n    // Add to session cache\r\n    queryClient.setQueryData(\r\n      QUERY_KEYS.sessionPrediction(sessionId),\r\n      newSession\r\n    );\r\n\r\n    // Add to user predictions cache\r\n    queryClient.setQueryData(\r\n      QUERY_KEYS.userPredictions(userId),\r\n      (old: PredictionResult[] | undefined) => {\r\n        if (!old) return [newSession];\r\n        return [newSession, ...old];\r\n      }\r\n    );\r\n  };\r\n\r\n  return {\r\n    updateSessionStatus,\r\n    addNewSession,\r\n  };\r\n};\r\n","import { useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Eye } from 'lucide-react';\r\nimport { getUserId } from '@/utils';\r\nimport { useHealthCheck, useUserSessions } from '@/hooks/api';\r\nimport { useAnnouncements } from '@/hooks/accessibility';\r\n\r\nexport const Dashboard: React.FC = () => {\r\n  const userId = getUserId();\r\n  const { announce } = useAnnouncements();\r\n  \r\n  // Fetch health status and recent sessions\r\n  const { data: healthStatus, isLoading: isHealthLoading, error: healthError } = useHealthCheck();\r\n  const { data: sessionsResponse, isLoading: isSessionsLoading } = useUserSessions(userId);\r\n\r\n  useEffect(() => {\r\n    announce('Dashboard page loaded', 'polite');\r\n  }, [announce]);\r\n\r\n  const quickActions = [\r\n    {\r\n      title: 'Upload & Analyze',\r\n      description: 'Upload audio files for behavioral health analysis',\r\n      href: '/upload',\r\n      icon: 'üì§',\r\n      color: 'primary'\r\n    },\r\n    {\r\n      title: 'View Sessions',\r\n      description: 'Browse all analysis sessions and their results',\r\n      href: '/sessions',\r\n      icon: 'üìä',\r\n      color: 'secondary'\r\n    },\r\n    {\r\n      title: 'My Predictions',\r\n      description: 'View your complete prediction history',\r\n      href: '/predictions',\r\n      icon: 'üìà',\r\n      color: 'accent'\r\n    },\r\n    {\r\n      title: 'System Health',\r\n      description: 'Check API status and system connectivity',\r\n      href: '/health',\r\n      icon: 'üè•',\r\n      color: 'warning'\r\n    }\r\n  ];\r\n\r\n  const getActionClasses = (color: string) => {\r\n    const baseClasses = 'block p-6 rounded-lg border-2 transition-all hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2';\r\n    \r\n    switch (color) {\r\n      case 'primary':\r\n        return `${baseClasses} border-primary-200 bg-primary-50 hover:border-primary-300 hover:bg-primary-100 dark:border-primary-800 dark:bg-primary-900 dark:hover:border-primary-700 dark:hover:bg-primary-800 focus:ring-primary-500`;\r\n      case 'secondary':\r\n        return `${baseClasses} border-secondary-200 bg-secondary-50 hover:border-secondary-300 hover:bg-secondary-100 dark:border-secondary-800 dark:bg-secondary-900 dark:hover:border-secondary-700 dark:hover:bg-secondary-800 focus:ring-secondary-500`;\r\n      case 'accent':\r\n        return `${baseClasses} border-accent-200 bg-accent-50 hover:border-accent-300 hover:bg-accent-100 dark:border-accent-800 dark:bg-accent-900 dark:hover:border-accent-700 dark:hover:bg-accent-800 focus:ring-accent-500`;\r\n      case 'warning':\r\n        return `${baseClasses} border-warning-200 bg-warning-50 hover:border-warning-300 hover:bg-warning-100 dark:border-teal-600 dark:bg-teal-800 dark:hover:border-teal-500 dark:hover:bg-teal-700 focus:ring-warning-500`;\r\n      default:\r\n        return `${baseClasses} border-gray-200 bg-gray-50 hover:border-gray-300 hover:bg-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:hover:border-gray-600 dark:hover:bg-gray-700 focus:ring-gray-500`;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Page header */}\r\n      <div className=\"text-center\">\r\n        <h1 className=\"text-3xl font-bold text-text-primary-light dark:text-text-primary-dark\">\r\n          Behavioral Health System\r\n        </h1>\r\n        <p className=\"mt-2 text-lg text-text-secondary-light dark:text-text-secondary-dark\">\r\n          Audio-based mental health prediction and analysis\r\n        </p>\r\n      </div>\r\n\r\n      {/* User ID display */}\r\n      <div className=\"card\">\r\n        <h2 className=\"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark mb-2\">\r\n          Your User ID\r\n        </h2>\r\n        <div className=\"bg-gray-100 dark:bg-gray-700 p-3 rounded-md\">\r\n          <code className=\"text-sm font-mono text-text-primary-light dark:text-text-primary-dark break-all\">\r\n            {userId}\r\n          </code>\r\n        </div>\r\n        <p className=\"mt-2 text-sm text-text-muted-light dark:text-text-muted-dark\">\r\n          This ID is automatically generated and stored locally to track your sessions.\r\n        </p>\r\n      </div>\r\n\r\n      {/* Quick actions */}\r\n      <div>\r\n        <h2 className=\"text-xl font-semibold text-text-primary-light dark:text-text-primary-dark mb-6\">\r\n          Quick Actions\r\n        </h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          {quickActions.map((action) => (\r\n            <Link\r\n              key={action.href}\r\n              to={action.href}\r\n              className={getActionClasses(action.color)}\r\n              aria-label={`${action.title}: ${action.description}`}\r\n            >\r\n              <div className=\"text-center\">\r\n                <div className=\"text-3xl mb-3\" role=\"img\" aria-hidden=\"true\">\r\n                  {action.icon}\r\n                </div>\r\n                <h3 className=\"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark mb-2\">\r\n                  {action.title}\r\n                </h3>\r\n                <p className=\"text-sm text-text-secondary-light dark:text-text-secondary-dark\">\r\n                  {action.description}\r\n                </p>\r\n              </div>\r\n            </Link>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Recent activity */}\r\n      <div className=\"card\">\r\n        <h2 className=\"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark mb-4\">\r\n          Recent Activity\r\n        </h2>\r\n        {isSessionsLoading ? (\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"spinner w-4 h-4\"></div>\r\n            <span className=\"text-text-secondary-light dark:text-text-secondary-dark\">\r\n              Loading recent sessions...\r\n            </span>\r\n          </div>\r\n        ) : (!sessionsResponse?.sessions || sessionsResponse.sessions.length === 0) ? (\r\n          <div className=\"text-center py-8\">\r\n            <div className=\"text-4xl mb-4\" role=\"img\" aria-label=\"No data\">üì≠</div>\r\n            <p className=\"text-text-secondary-light dark:text-text-secondary-dark\">\r\n              No sessions yet. \r\n              <Link \r\n                to=\"/upload\" \r\n                className=\"text-primary-600 dark:text-primary-400 hover:underline ml-1\"\r\n              >\r\n                Upload your first audio file\r\n              </Link> to get started.\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            {sessionsResponse.sessions.slice(0, 3).map((session) => (\r\n              <div\r\n                key={session.sessionId}\r\n                className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-md\"\r\n              >\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className={`status-${session.status || 'completed'}`}>\r\n                    {session.status || 'completed'}\r\n                  </div>\r\n                  <span className=\"text-text-primary-light dark:text-text-primary-dark\">\r\n                    {session.audioFileName || session.sessionId?.slice(0, 8) || 'Unknown'}\r\n                  </span>\r\n                  <span className=\"text-xs text-gray-500 dark:text-gray-400 ml-2\" title={session.createdAt}>\r\n                    {session.createdAt ? new Date(session.createdAt).toLocaleString() : ''}\r\n                  </span>\r\n                </div>\r\n                <Link\r\n                  to={`/sessions/${session.sessionId || ''}`}\r\n                  className=\"text-primary-600 dark:text-primary-400 hover:underline text-sm flex items-center gap-1\"\r\n                  title=\"View session details\"\r\n                  aria-label={`View details for session ${session.audioFileName || session.sessionId?.slice(0, 8) || 'Unknown'}`}\r\n                >\r\n                  <Eye className=\"w-4 h-4\" aria-hidden=\"true\" />\r\n                </Link>\r\n              </div>\r\n            ))}\r\n            {sessionsResponse.sessions.length > 3 && (\r\n              <div className=\"text-center pt-3\">\r\n                <Link\r\n                  to=\"/sessions\"\r\n                  className=\"text-primary-600 dark:text-primary-400 hover:underline\"\r\n                >\r\n                  View all {sessionsResponse.sessions.length} sessions ‚Üí\r\n                </Link>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* System status */}\r\n      <div className=\"card\">\r\n        <h2 className=\"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark mb-4\">\r\n          System Status\r\n        </h2>\r\n        {isHealthLoading ? (\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"spinner w-4 h-4\"></div>\r\n            <span className=\"text-text-secondary-light dark:text-text-secondary-dark\">\r\n              Checking system health...\r\n            </span>\r\n          </div>\r\n        ) : healthError ? (\r\n          <div className=\"flex items-center space-x-2 text-error-600 dark:text-error-400\">\r\n            <span role=\"img\" aria-label=\"Error\">‚ö†Ô∏è</span>\r\n            <span>System health check failed</span>\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex items-center space-x-2 text-success-600 dark:text-success-400\">\r\n            <span role=\"img\" aria-label=\"Healthy\">‚úÖ</span>\r\n            <span>All systems operational</span>\r\n            {healthStatus?.checks && (\r\n              <span className=\"text-text-muted-light dark:text-text-muted-dark\">\r\n                ({Object.keys(healthStatus.checks).length} services checked)\r\n              </span>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { FFmpeg } from '@ffmpeg/ffmpeg';\r\nimport { fetchFile, toBlobURL } from '@ffmpeg/util';\r\nimport { config } from '@/config/constants';\r\nimport { createAppError } from '@/utils';\r\nimport type { AudioConversionOptions } from '@/types';\r\n// import type { AppError } from '@/types'; // Commented out until used\r\n\r\nexport interface ConversionProgress {\r\n  stage: 'loading' | 'converting' | 'completed';\r\n  progress: number;\r\n  message: string;\r\n}\r\n\r\nexport class AudioProcessor {\r\n  private ffmpeg: FFmpeg | null = null;\r\n  private isLoaded = false;\r\n  private loadingPromise: Promise<void> | null = null;\r\n\r\n  constructor() {\r\n    this.ffmpeg = new FFmpeg();\r\n  }\r\n\r\n  private async loadFFmpeg(): Promise<void> {\r\n    if (this.isLoaded) return;\r\n    \r\n    if (this.loadingPromise) {\r\n      return this.loadingPromise;\r\n    }\r\n\r\n    this.loadingPromise = this.doLoadFFmpeg();\r\n    return this.loadingPromise;\r\n  }\r\n\r\n  private async doLoadFFmpeg(): Promise<void> {\r\n    if (!this.ffmpeg) {\r\n      throw createAppError(\r\n        'FFMPEG_INIT_ERROR',\r\n        'Failed to initialize FFmpeg'\r\n      );\r\n    }\r\n\r\n    try {\r\n      // Load FFmpeg with CDN URLs for better reliability\r\n      const baseURL = 'https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm';\r\n      \r\n      await this.ffmpeg.load({\r\n        coreURL: await toBlobURL(`${baseURL}/ffmpeg-core.js`, 'text/javascript'),\r\n        wasmURL: await toBlobURL(`${baseURL}/ffmpeg-core.wasm`, 'application/wasm'),\r\n      });\r\n\r\n      this.isLoaded = true;\r\n    } catch (error) {\r\n      this.loadingPromise = null;\r\n      throw createAppError(\r\n        'FFMPEG_LOAD_ERROR',\r\n        'Failed to load FFmpeg. Please check your internet connection and try again.',\r\n        { originalError: error }\r\n      );\r\n    }\r\n  }\r\n\r\n  async convertAudio(\r\n    file: File,\r\n    options: AudioConversionOptions = {\r\n      outputFormat: 'wav',\r\n      sampleRate: 44100,\r\n      channels: 1,\r\n    },\r\n    onProgress?: (progress: ConversionProgress) => void\r\n  ): Promise<File> {\r\n    try {\r\n      // Notify loading stage\r\n      onProgress?.({\r\n        stage: 'loading',\r\n        progress: 0,\r\n        message: 'Loading audio processor...',\r\n      });\r\n\r\n      await this.loadFFmpeg();\r\n\r\n      if (!this.ffmpeg) {\r\n        throw createAppError('FFMPEG_NOT_LOADED', 'FFmpeg not properly loaded');\r\n      }\r\n\r\n      // Setup progress callback\r\n      this.ffmpeg.on('progress', ({ progress }) => {\r\n        onProgress?.({\r\n          stage: 'converting',\r\n          progress: Math.round(progress * 100),\r\n          message: `Converting audio... ${Math.round(progress * 100)}%`,\r\n        });\r\n      });\r\n\r\n      onProgress?.({\r\n        stage: 'converting',\r\n        progress: 0,\r\n        message: 'Preparing audio file...',\r\n      });\r\n\r\n      // Write input file\r\n      const inputName = 'input.' + this.getFileExtension(file.name);\r\n      await this.ffmpeg.writeFile(inputName, await fetchFile(file));\r\n\r\n      // Build FFmpeg command\r\n      const outputName = `output.${options.outputFormat}`;\r\n      const command = [\r\n        '-i', inputName,\r\n        '-ac', options.channels.toString(),\r\n        '-ar', options.sampleRate.toString(),\r\n        '-f', options.outputFormat,\r\n        outputName\r\n      ];\r\n\r\n      // Execute conversion\r\n      await this.ffmpeg.exec(command);\r\n\r\n      // Read output file\r\n      const outputData = await this.ffmpeg.readFile(outputName);\r\n      const outputBlob = new Blob([outputData as unknown as ArrayBuffer], { type: `audio/${options.outputFormat}` });\r\n      \r\n      // Create new File object with converted audio\r\n      const convertedFile = new File(\r\n        [outputBlob],\r\n        `${this.getFileNameWithoutExtension(file.name)}.${options.outputFormat}`,\r\n        { type: `audio/${options.outputFormat}` }\r\n      );\r\n\r\n      // Clean up temporary files\r\n      await this.ffmpeg.deleteFile(inputName);\r\n      await this.ffmpeg.deleteFile(outputName);\r\n\r\n      onProgress?.({\r\n        stage: 'completed',\r\n        progress: 100,\r\n        message: 'Audio conversion completed',\r\n      });\r\n\r\n      return convertedFile;\r\n\r\n    } catch (error) {\r\n      throw createAppError(\r\n        'AUDIO_CONVERSION_ERROR',\r\n        'Failed to convert audio file. Please try with a different file.',\r\n        { \r\n          originalError: error,\r\n          fileName: file.name,\r\n          fileSize: file.size,\r\n          fileType: file.type\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  private getFileExtension(filename: string): string {\r\n    const lastDot = filename.lastIndexOf('.');\r\n    return lastDot !== -1 ? filename.slice(lastDot + 1).toLowerCase() : '';\r\n  }\r\n\r\n  private getFileNameWithoutExtension(filename: string): string {\r\n    const lastDot = filename.lastIndexOf('.');\r\n    return lastDot !== -1 ? filename.slice(0, lastDot) : filename;\r\n  }\r\n\r\n  async isFormatSupported(file: File): Promise<boolean> {\r\n    try {\r\n      await this.loadFFmpeg();\r\n      \r\n      // Check if file extension is in supported formats\r\n      const supportedFormats = ['wav', 'mp3', 'mp4', 'm4a', 'aac', 'flac', 'ogg'];\r\n      const extension = this.getFileExtension(file.name);\r\n      \r\n      return supportedFormats.includes(extension);\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  dispose(): void {\r\n    if (this.ffmpeg) {\r\n      this.ffmpeg.terminate();\r\n      this.ffmpeg = null;\r\n    }\r\n    this.isLoaded = false;\r\n    this.loadingPromise = null;\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nlet audioProcessorInstance: AudioProcessor | null = null;\r\n\r\nexport const getAudioProcessor = (): AudioProcessor => {\r\n  if (!audioProcessorInstance) {\r\n    audioProcessorInstance = new AudioProcessor();\r\n  }\r\n  return audioProcessorInstance;\r\n};\r\n\r\n// Fallback for browsers that don't support SharedArrayBuffer or other requirements\r\nexport const isFFmpegSupported = (): boolean => {\r\n  try {\r\n    // Check for SharedArrayBuffer support (required for FFmpeg.wasm)\r\n    if (typeof SharedArrayBuffer === 'undefined') {\r\n      return false;\r\n    }\r\n\r\n    // Check if in a secure context (required for some FFmpeg features)\r\n    if (!window.isSecureContext) {\r\n      return false;\r\n    }\r\n\r\n    return config.features.enableFFmpegWorker;\r\n  } catch {\r\n    return false;\r\n  }\r\n};\r\n\r\n// Server fallback (for when FFmpeg.wasm is not supported)\r\nexport const convertAudioOnServer = async (\r\n  file: File,\r\n  _options: AudioConversionOptions\r\n): Promise<File> => {\r\n  // This would be implemented as a backend endpoint\r\n  // For now, return the original file as fallback\r\n  return file;\r\n};\r\n\r\n// Convenience function for the Upload & Analyze page\r\nexport const convertAudioToWav = async (\r\n  file: File,\r\n  onProgress?: (progress: number) => void\r\n): Promise<Blob> => {\r\n  const processor = getAudioProcessor();\r\n  \r\n  const convertedFile = await processor.convertAudio(\r\n    file,\r\n    {\r\n      outputFormat: 'wav',\r\n      sampleRate: 44100,\r\n      channels: 1,\r\n    },\r\n    onProgress ? (progress) => onProgress(progress.progress) : undefined\r\n  );\r\n\r\n  // Convert File to Blob\r\n  return new Blob([convertedFile], { type: 'audio/wav' });\r\n};\r\n","import { BlobServiceClient, ContainerClient } from '@azure/storage-blob';\r\nimport { config } from '@/config/constants';\r\nimport { createAppError } from '@/utils';\r\n\r\nexport interface UploadProgress {\r\n  progress: number;\r\n  stage: 'preparing' | 'uploading' | 'completed';\r\n  message: string;\r\n}\r\n\r\nexport interface UploadResult {\r\n  url: string;\r\n  fileName: string;\r\n  size: number;\r\n}\r\n\r\nexport class AzureBlobService {\r\n  private containerClient: ContainerClient | null = null;\r\n  private sasUrl: string;\r\n\r\n  constructor(sasUrl?: string) {\r\n    this.sasUrl = sasUrl || config.azure.blobSasUrl;\r\n    \r\n    if (!this.sasUrl) {\r\n      throw createAppError(\r\n        'AZURE_CONFIG_ERROR',\r\n        'Azure Blob Storage SAS URL not configured'\r\n      );\r\n    }\r\n  }\r\n\r\n  private getContainerClient(): ContainerClient {\r\n    if (!this.containerClient) {\r\n      try {\r\n        const blobServiceClient = new BlobServiceClient(this.sasUrl);\r\n        this.containerClient = blobServiceClient.getContainerClient(config.azure.containerName);\r\n      } catch (error) {\r\n        throw createAppError(\r\n          'AZURE_CLIENT_ERROR',\r\n          'Failed to initialize Azure Blob Storage client',\r\n          { originalError: error }\r\n        );\r\n      }\r\n    }\r\n    \r\n    return this.containerClient;\r\n  }\r\n\r\n  async uploadFile(\r\n    file: File,\r\n    fileName?: string,\r\n    onProgress?: (progress: UploadProgress) => void\r\n  ): Promise<UploadResult> {\r\n    try {\r\n      onProgress?.({\r\n        progress: 0,\r\n        stage: 'preparing',\r\n        message: 'Preparing upload...',\r\n      });\r\n\r\n      const containerClient = this.getContainerClient();\r\n      const blobName = fileName || this.generateBlobName(file.name);\r\n      const blockBlobClient = containerClient.getBlockBlobClient(blobName);\r\n\r\n      // Upload with progress tracking\r\n      onProgress?.({\r\n        progress: 10,\r\n        stage: 'uploading',\r\n        message: 'Starting upload...',\r\n      });\r\n\r\n      await blockBlobClient.uploadData(file, {\r\n        blobHTTPHeaders: {\r\n          blobContentType: file.type,\r\n        },\r\n        onProgress: (uploadProgress) => {\r\n          const progressPercent = uploadProgress.loadedBytes && file.size \r\n            ? Math.round((uploadProgress.loadedBytes / file.size) * 90) + 10\r\n            : 50;\r\n            \r\n          onProgress?.({\r\n            progress: progressPercent,\r\n            stage: 'uploading',\r\n            message: `Uploading... ${progressPercent}%`,\r\n          });\r\n        },\r\n      });\r\n\r\n      // Get the URL for the uploaded blob\r\n      const blobUrl = blockBlobClient.url;\r\n\r\n      onProgress?.({\r\n        progress: 100,\r\n        stage: 'completed',\r\n        message: 'Upload completed',\r\n      });\r\n\r\n      return {\r\n        url: blobUrl,\r\n        fileName: blobName,\r\n        size: file.size,\r\n      };\r\n\r\n    } catch (error) {\r\n      throw createAppError(\r\n        'UPLOAD_ERROR',\r\n        'Failed to upload file to Azure Blob Storage',\r\n        { \r\n          originalError: error,\r\n          fileName: file.name,\r\n          fileSize: file.size\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  private generateBlobName(originalFileName: string): string {\r\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\r\n    const randomId = Math.random().toString(36).substring(2, 8);\r\n    const extension = originalFileName.split('.').pop() || 'wav';\r\n    \r\n    return `audio/${timestamp}-${randomId}.${extension}`;\r\n  }\r\n\r\n  async testConnection(): Promise<{ success: boolean; message: string }> {\r\n    try {\r\n      const containerClient = this.getContainerClient();\r\n      \r\n      // Try to get container properties to test connection\r\n      await containerClient.getProperties();\r\n      \r\n      return {\r\n        success: true,\r\n        message: 'Azure Blob Storage connection successful',\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'Failed to connect to Azure Blob Storage. Please check your SAS URL configuration.',\r\n      };\r\n    }\r\n  }\r\n\r\n  async deleteFile(fileName: string): Promise<void> {\r\n    try {\r\n      const containerClient = this.getContainerClient();\r\n      const blockBlobClient = containerClient.getBlockBlobClient(fileName);\r\n      \r\n      await blockBlobClient.deleteIfExists();\r\n    } catch (error) {\r\n      throw createAppError(\r\n        'DELETE_ERROR',\r\n        'Failed to delete file from Azure Blob Storage',\r\n        { originalError: error, fileName }\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nlet blobServiceInstance: AzureBlobService | null = null;\r\n\r\nexport const getBlobService = (sasUrl?: string): AzureBlobService => {\r\n  if (!blobServiceInstance || (sasUrl && sasUrl !== blobServiceInstance['sasUrl'])) {\r\n    blobServiceInstance = new AzureBlobService(sasUrl);\r\n  }\r\n  return blobServiceInstance;\r\n};\r\n\r\n// Check if Azure Blob Storage is properly configured\r\nexport const isAzureBlobConfigured = (): boolean => {\r\n  return Boolean(config.azure.blobSasUrl && config.azure.containerName);\r\n};\r\n\r\n// Convenience function for the Upload & Analyze page\r\nexport const uploadToAzureBlob = async (\r\n  file: File | Blob,\r\n  fileName: string,\r\n  onProgress?: (progress: number) => void\r\n): Promise<string> => {\r\n  const blobService = getBlobService();\r\n  \r\n  // Convert Blob to File if needed\r\n  const fileToUpload = file instanceof File ? file : new File([file], fileName, { type: file.type });\r\n  \r\n  const result = await blobService.uploadFile(\r\n    fileToUpload,\r\n    fileName,\r\n    onProgress ? (progress) => onProgress(progress.progress) : undefined\r\n  );\r\n\r\n  return result.url;\r\n};\r\n","import { useCallback, useRef } from 'react';\r\n\r\n/**\r\n * Hook for accessibility features like screen reader announcements\r\n */\r\nexport const useAccessibility = () => {\r\n  const announcementRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  /**\r\n   * Announce text to screen readers\r\n   */\r\n  const announceToScreenReader = useCallback((message: string) => {\r\n    // Create a live region if it doesn't exist\r\n    if (!announcementRef.current) {\r\n      const liveRegion = document.createElement('div');\r\n      liveRegion.setAttribute('aria-live', 'polite');\r\n      liveRegion.setAttribute('aria-atomic', 'true');\r\n      liveRegion.style.position = 'absolute';\r\n      liveRegion.style.left = '-10000px';\r\n      liveRegion.style.width = '1px';\r\n      liveRegion.style.height = '1px';\r\n      liveRegion.style.overflow = 'hidden';\r\n      document.body.appendChild(liveRegion);\r\n      announcementRef.current = liveRegion;\r\n    }\r\n\r\n    // Clear previous message and set new one\r\n    announcementRef.current.textContent = '';\r\n    setTimeout(() => {\r\n      if (announcementRef.current) {\r\n        announcementRef.current.textContent = message;\r\n      }\r\n    }, 100);\r\n  }, []);\r\n\r\n  /**\r\n   * Focus management utilities\r\n   */\r\n  const focusManagement = {\r\n    /**\r\n     * Set focus to element by ID\r\n     */\r\n    focusById: (elementId: string) => {\r\n      const element = document.getElementById(elementId);\r\n      if (element) {\r\n        element.focus();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Focus the first focusable element within a container\r\n     */\r\n    focusFirstInContainer: (container: HTMLElement) => {\r\n      const focusableElements = container.querySelectorAll(\r\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n      );\r\n      \r\n      const firstElement = focusableElements[0] as HTMLElement;\r\n      if (firstElement) {\r\n        firstElement.focus();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Trap focus within a container (for modals)\r\n     */\r\n    trapFocus: (container: HTMLElement) => {\r\n      const focusableElements = container.querySelectorAll(\r\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n      ) as NodeListOf<HTMLElement>;\r\n\r\n      const firstElement = focusableElements[0];\r\n      const lastElement = focusableElements[focusableElements.length - 1];\r\n\r\n      const handleTabKey = (e: KeyboardEvent) => {\r\n        if (e.key !== 'Tab') return;\r\n\r\n        if (e.shiftKey) {\r\n          if (document.activeElement === firstElement) {\r\n            lastElement.focus();\r\n            e.preventDefault();\r\n          }\r\n        } else {\r\n          if (document.activeElement === lastElement) {\r\n            firstElement.focus();\r\n            e.preventDefault();\r\n          }\r\n        }\r\n      };\r\n\r\n      container.addEventListener('keydown', handleTabKey);\r\n\r\n      // Return cleanup function\r\n      return () => {\r\n        container.removeEventListener('keydown', handleTabKey);\r\n      };\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Keyboard navigation helpers\r\n   */\r\n  const keyboardNavigation = {\r\n    /**\r\n     * Handle arrow key navigation for lists\r\n     */\r\n    handleArrowNavigation: (\r\n      event: React.KeyboardEvent,\r\n      items: HTMLElement[],\r\n      currentIndex: number,\r\n      onIndexChange: (newIndex: number) => void\r\n    ) => {\r\n      let newIndex = currentIndex;\r\n\r\n      switch (event.key) {\r\n        case 'ArrowDown':\r\n          event.preventDefault();\r\n          newIndex = currentIndex < items.length - 1 ? currentIndex + 1 : 0;\r\n          break;\r\n        case 'ArrowUp':\r\n          event.preventDefault();\r\n          newIndex = currentIndex > 0 ? currentIndex - 1 : items.length - 1;\r\n          break;\r\n        case 'Home':\r\n          event.preventDefault();\r\n          newIndex = 0;\r\n          break;\r\n        case 'End':\r\n          event.preventDefault();\r\n          newIndex = items.length - 1;\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n\r\n      onIndexChange(newIndex);\r\n      items[newIndex]?.focus();\r\n    },\r\n\r\n    /**\r\n     * Handle escape key to close modals/dropdowns\r\n     */\r\n    handleEscape: (event: React.KeyboardEvent, onEscape: () => void) => {\r\n      if (event.key === 'Escape') {\r\n        event.preventDefault();\r\n        onEscape();\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Generate unique IDs for form elements\r\n   */\r\n  const generateId = useCallback((prefix: string = 'element') => {\r\n    return `${prefix}-${Math.random().toString(36).substr(2, 9)}`;\r\n  }, []);\r\n\r\n  /**\r\n   * Check if user prefers reduced motion\r\n   */\r\n  const prefersReducedMotion = useCallback(() => {\r\n    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\r\n  }, []);\r\n\r\n  /**\r\n   * Get appropriate ARIA attributes for form validation\r\n   */\r\n  const getValidationAttributes = useCallback((\r\n    isValid: boolean,\r\n    errorMessage?: string,\r\n    describedById?: string\r\n  ) => {\r\n    const attributes: Record<string, string> = {};\r\n\r\n    if (!isValid) {\r\n      attributes['aria-invalid'] = 'true';\r\n      if (errorMessage && describedById) {\r\n        attributes['aria-describedby'] = describedById;\r\n      }\r\n    }\r\n\r\n    return attributes;\r\n  }, []);\r\n\r\n  return {\r\n    announceToScreenReader,\r\n    focusManagement,\r\n    keyboardNavigation,\r\n    generateId,\r\n    prefersReducedMotion,\r\n    getValidationAttributes,\r\n  };\r\n};\r\n","import React, { useState, useCallback, useRef } from 'react';\r\nimport { Upload, Play, Pause, X, AlertCircle, CheckCircle, Loader2, Volume2, Plus, Trash2, Files, File } from 'lucide-react';\r\nimport { convertAudioToWav } from '../services/audio';\r\nimport { uploadToAzureBlob } from '../services/azure';\r\nimport { apiService, PredictionPoller } from '../services/api';\r\nimport { useAccessibility } from '../hooks/useAccessibility';\r\nimport { getUserId, getStoredProcessingMode, setStoredProcessingMode, setUserId, generateNewUserId, isCustomUserId, setUserIdMode } from '../utils';\r\nimport type { PredictionResult, AppError, SessionMetadata } from '../types';\r\n\r\ninterface UploadProgress {\r\n  stage: 'idle' | 'starting' | 'initiating' | 'converting' | 'uploading' | 'submitting' | 'analyzing' | 'complete' | 'error';\r\n  progress: number;\r\n  message: string;\r\n}\r\n\r\ninterface AudioFile {\r\n  id: string;\r\n  file: File;\r\n  url: string;\r\n  duration?: number;\r\n}\r\n\r\ninterface ProcessingProgress {\r\n  [fileId: string]: UploadProgress;\r\n}\r\n\r\ninterface FileResults {\r\n  [fileId: string]: AnalysisResult;\r\n}\r\n\r\ninterface FileProcessingState {\r\n  [fileId: string]: 'ready' | 'processing' | 'complete' | 'error';\r\n}\r\n\r\ninterface SessionInfo {\r\n  sessionId: string;\r\n  userId: string;\r\n}\r\n\r\ninterface AnalysisResult {\r\n  sessionId: string;\r\n  depressionScore?: number;\r\n  riskLevel?: 'low' | 'medium' | 'high';\r\n  confidence?: number;\r\n  insights?: string[];\r\n  timestamp: string;\r\n  audioUrl?: string;\r\n  rawApiResponse?: any; // Store the complete API response\r\n}\r\n\r\nconst UploadAnalyze: React.FC = () => {\r\n  const [audioFiles, setAudioFiles] = useState<AudioFile[]>([]);\r\n  const [isMultiMode, setIsMultiMode] = useState(() => getStoredProcessingMode());\r\n  const [processingProgress, setProcessingProgress] = useState<ProcessingProgress>({});\r\n  const [results, setResults] = useState<FileResults>({});\r\n  const [fileStates, setFileStates] = useState<FileProcessingState>({});\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  \r\n  // Legacy single file state for backward compatibility\r\n  const [audioFile, setAudioFile] = useState<AudioFile | null>(null);\r\n  const [progress, setProgress] = useState<UploadProgress>({\r\n    stage: 'idle',\r\n    progress: 0,\r\n    message: ''\r\n  });\r\n  const [result, setResult] = useState<AnalysisResult | null>(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [playingFileId, setPlayingFileId] = useState<string | null>(null);\r\n  const [userMetadata, setUserMetadata] = useState({\r\n    age: '',\r\n    gender: '',\r\n    race: '',\r\n    ethnicity: '',\r\n    language: '',\r\n    weight: '',\r\n    zipcode: '',\r\n    sessionNotes: ''\r\n  });\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [toasts, setToasts] = useState<Array<{\r\n    id: string;\r\n    type: 'error' | 'warning' | 'info' | 'success';\r\n    title: string;\r\n    message: string;\r\n    timestamp: number;\r\n  }>>([]);\r\n\r\n  // User ID management state\r\n  const [isCustomUserIdMode, setIsCustomUserIdMode] = useState(() => isCustomUserId());\r\n  const [customUserId, setCustomUserId] = useState('');\r\n  const [userIdError, setUserIdError] = useState<string | null>(null);\r\n\r\n  // Get the current user ID from localStorage\r\n  const userId = getUserId();\r\n\r\n  const audioRef = useRef<HTMLAudioElement>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const { announceToScreenReader } = useAccessibility();\r\n\r\n  // Toast utility functions\r\n  const addToast = useCallback((type: 'error' | 'warning' | 'info' | 'success', title: string, message: string) => {\r\n    const id = Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n    const newToast = {\r\n      id,\r\n      type,\r\n      title,\r\n      message,\r\n      timestamp: Date.now()\r\n    };\r\n    setToasts(prev => [...prev, newToast]);\r\n    \r\n    // Auto-remove toast after 8 seconds for errors, 5 seconds for others\r\n    const duration = type === 'error' ? 8000 : 5000;\r\n    setTimeout(() => {\r\n      setToasts(prev => prev.filter(toast => toast.id !== id));\r\n    }, duration);\r\n  }, []);\r\n\r\n  const removeToast = useCallback((id: string) => {\r\n    setToasts(prev => prev.filter(toast => toast.id !== id));\r\n  }, []);\r\n\r\n  const resetState = useCallback(() => {\r\n    setAudioFiles([]);\r\n    setAudioFile(null);\r\n    setProgress({ stage: 'idle', progress: 0, message: '' });\r\n    setResult(null);\r\n    setResults({});\r\n    setProcessingProgress({});\r\n    setError(null);\r\n    setIsPlaying(false);\r\n    setCurrentTime(0);\r\n    setPlayingFileId(null);\r\n    setIsProcessing(false);\r\n  }, []);\r\n\r\n  // User ID management functions\r\n  const handleToggleUserIdMode = useCallback(() => {\r\n    setIsCustomUserIdMode(prev => {\r\n      const newMode = !prev;\r\n      setUserIdMode(newMode);\r\n      setUserIdError(null);\r\n      \r\n      if (!newMode) {\r\n        // Switching back to auto-generated mode\r\n        setCustomUserId('');\r\n        const newUserId = generateNewUserId();\r\n        announceToScreenReader(`Switched to auto-generated mode. New User ID: ${newUserId}`);\r\n      } else {\r\n        // Switching to custom mode\r\n        setCustomUserId(userId);\r\n        announceToScreenReader('Switched to custom User ID mode');\r\n      }\r\n      \r\n      return newMode;\r\n    });\r\n  }, [userId, announceToScreenReader]);\r\n\r\n  const handleCustomUserIdChange = useCallback((value: string) => {\r\n    setCustomUserId(value);\r\n    setUserIdError(null);\r\n  }, []);\r\n\r\n  const handleApplyCustomUserId = useCallback(() => {\r\n    const trimmedUserId = customUserId.trim();\r\n    \r\n    if (!trimmedUserId) {\r\n      setUserIdError('User ID cannot be empty');\r\n      return;\r\n    }\r\n\r\n    // Basic validation - allow any string but check for reasonable length and characters\r\n    if (trimmedUserId.length < 3) {\r\n      setUserIdError('User ID must be at least 3 characters long');\r\n      return;\r\n    }\r\n\r\n    if (trimmedUserId.length > 100) {\r\n      setUserIdError('User ID must be less than 100 characters');\r\n      return;\r\n    }\r\n\r\n    // Check for potentially problematic characters (optional - you can remove this if you want to allow all characters)\r\n    const problematicChars = /[<>\"/\\\\|?*\\x00-\\x1f]/;\r\n    if (problematicChars.test(trimmedUserId)) {\r\n      setUserIdError('User ID contains invalid characters. Please avoid special characters like < > \" / \\\\ | ? *');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setUserId(trimmedUserId);\r\n      setUserIdError(null);\r\n      announceToScreenReader(`Custom User ID applied: ${trimmedUserId}`);\r\n      \r\n      // Refresh the page to use the new user ID\r\n      window.location.reload();\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Failed to set User ID';\r\n      setUserIdError(errorMessage);\r\n    }\r\n  }, [customUserId, announceToScreenReader]);\r\n\r\n  const handleGenerateNewUserId = useCallback(() => {\r\n    const newUserId = generateNewUserId();\r\n    announceToScreenReader(`New User ID generated: ${newUserId}`);\r\n    // Refresh the page to use the new user ID\r\n    window.location.reload();\r\n  }, [announceToScreenReader]);\r\n\r\n  const generateFileId = () => {\r\n    return Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n  };\r\n\r\n  const addAudioFile = useCallback((file: File) => {\r\n    const id = generateFileId();\r\n    const url = URL.createObjectURL(file);\r\n    const audioFile: AudioFile = { id, file, url };\r\n    \r\n    if (isMultiMode) {\r\n      setAudioFiles(prev => [...prev, audioFile]);\r\n      setFileStates(prev => ({ ...prev, [id]: 'ready' }));\r\n      setProcessingProgress(prev => ({ ...prev, [id]: { stage: 'idle', progress: 0, message: 'Ready to process' } }));\r\n    } else {\r\n      setAudioFile(audioFile);\r\n    }\r\n    \r\n    announceToScreenReader(`Audio file selected: ${file.name}`);\r\n\r\n    // Get audio duration\r\n    const audio = new Audio(url);\r\n    audio.addEventListener('loadedmetadata', () => {\r\n      if (isMultiMode) {\r\n        setAudioFiles(prev => prev.map(af => \r\n          af.id === id ? { ...af, duration: audio.duration } : af\r\n        ));\r\n      } else {\r\n        setAudioFile(prev => prev ? { ...prev, duration: audio.duration } : null);\r\n      }\r\n    });\r\n  }, [isMultiMode, announceToScreenReader]);\r\n\r\n  const removeAudioFile = useCallback((fileId: string) => {\r\n    if (isMultiMode) {\r\n      setAudioFiles(prev => {\r\n        const fileToRemove = prev.find(f => f.id === fileId);\r\n        if (fileToRemove) {\r\n          URL.revokeObjectURL(fileToRemove.url);\r\n        }\r\n        return prev.filter(f => f.id !== fileId);\r\n      });\r\n      // Clean up associated progress, results, and states\r\n      setProcessingProgress(prev => {\r\n        const { [fileId]: removed, ...rest } = prev;\r\n        return rest;\r\n      });\r\n      setResults(prev => {\r\n        const { [fileId]: removed, ...rest } = prev;\r\n        return rest;\r\n      });\r\n      setFileStates(prev => {\r\n        const { [fileId]: removed, ...rest } = prev;\r\n        return rest;\r\n      });\r\n    }\r\n  }, [isMultiMode]);\r\n\r\n  const handleFileSelect = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = event.target.files;\r\n    if (!files || files.length === 0) return;\r\n\r\n    // Process multiple files or single file\r\n    Array.from(files).forEach(file => {\r\n      // Validate file type - check both MIME type and file extension\r\n      const supportedMimeTypes = [\r\n        'audio/wav', 'audio/wave', 'audio/x-wav',\r\n        'audio/mp3', 'audio/mpeg', 'audio/mp4',\r\n        'audio/m4a', 'audio/x-m4a', 'audio/mp4a-latm',\r\n        'audio/aac', 'audio/x-aac',\r\n        'audio/flac', 'audio/x-flac'\r\n      ];\r\n      \r\n      const fileName = file.name.toLowerCase();\r\n      const supportedExtensions = ['.wav', '.mp3', '.m4a', '.aac', '.flac'];\r\n      const hasValidExtension = supportedExtensions.some(ext => fileName.endsWith(ext));\r\n      const hasValidMimeType = supportedMimeTypes.includes(file.type);\r\n      \r\n      // Accept file if either MIME type OR extension is valid (some browsers don't set MIME types correctly)\r\n      if (!hasValidMimeType && !hasValidExtension) {\r\n        setError(`Unsupported file type for ${file.name}. Please select supported audio files (WAV, MP3, M4A, AAC, or FLAC)`);\r\n        addToast('error', 'Unsupported File', `${file.name} is not a supported audio file format`);\r\n        announceToScreenReader(`Error: Unsupported file format selected for ${file.name}`);\r\n        return;\r\n      }\r\n\r\n      // Validate file size (50MB limit)\r\n      const maxSize = 50 * 1024 * 1024;\r\n      if (file.size > maxSize) {\r\n        setError(`File ${file.name} is too large. File size must be less than 50MB`);\r\n        addToast('error', 'File Too Large', `${file.name} size must be less than 50MB`);\r\n        announceToScreenReader(`Error: File ${file.name} is too large`);\r\n        return;\r\n      }\r\n\r\n      addAudioFile(file);\r\n      setError(null);\r\n    });\r\n  }, [announceToScreenReader, addAudioFile, addToast]);\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n  }, []);\r\n\r\n  const handleDrop = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    const files = e.dataTransfer.files;\r\n    if (files.length > 0) {\r\n      const mockEvent = { target: { files } } as React.ChangeEvent<HTMLInputElement>;\r\n      handleFileSelect(mockEvent);\r\n    }\r\n  }, [handleFileSelect]);\r\n\r\n  const toggleMode = useCallback(() => {\r\n    setIsMultiMode(prev => {\r\n      const newMode = !prev;\r\n      // Save to localStorage\r\n      setStoredProcessingMode(newMode);\r\n      // Clear files when switching modes\r\n      resetState();\r\n      return newMode;\r\n    });\r\n  }, [resetState]);\r\n\r\n  const handlePlayPause = useCallback(() => {\r\n    if (!audioRef.current) return;\r\n\r\n    if (isPlaying) {\r\n      audioRef.current.pause();\r\n      setIsPlaying(false);\r\n      announceToScreenReader('Audio paused');\r\n    } else {\r\n      audioRef.current.play();\r\n      setIsPlaying(true);\r\n      announceToScreenReader('Audio playing');\r\n    }\r\n  }, [isPlaying, announceToScreenReader]);\r\n\r\n  const handleTimeUpdate = useCallback(() => {\r\n    if (audioRef.current) {\r\n      setCurrentTime(audioRef.current.currentTime);\r\n    }\r\n  }, []);\r\n\r\n  const formatTime = useCallback((seconds: number): string => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  }, []);\r\n\r\n  const validateMetadata = useCallback(() => {\r\n    const errors: string[] = [];\r\n\r\n    // Age validation\r\n    if (userMetadata.age) {\r\n      const age = parseInt(userMetadata.age);\r\n      if (isNaN(age) || age < 18 || age > 130) {\r\n        errors.push('Age must be between 18 and 130');\r\n      }\r\n    }\r\n\r\n    // Gender validation\r\n    if (userMetadata.gender) {\r\n      const validGenders = ['male', 'female', 'non-binary', 'transgender female', 'transgender male', 'other', 'prefer'];\r\n      if (!validGenders.includes(userMetadata.gender)) {\r\n        errors.push('Invalid gender. Must be: male, female, non-binary, transgender female, transgender male, other, or prefer');\r\n      }\r\n    }\r\n\r\n    // Race validation\r\n    if (userMetadata.race) {\r\n      const validRaces = ['white', 'black or african-american', 'asian', 'american indian or alaskan native', 'native Hawaiian or pacific islander', 'two or more races', 'other', 'prefer not to say'];\r\n      if (!validRaces.includes(userMetadata.race)) {\r\n        errors.push('Invalid race. Must be: white, black or african-american, asian, american indian or alaskan native, native Hawaiian or pacific islander, two or more races, other, prefer not to say');\r\n      }\r\n    }\r\n\r\n    // Ethnicity validation\r\n    if (userMetadata.ethnicity) {\r\n      const validEthnicities = ['Hispanic, Latino, or Spanish Origin', 'Not Hispanic, Latino, or Spanish Origin'];\r\n      if (!validEthnicities.includes(userMetadata.ethnicity)) {\r\n        errors.push('Invalid ethnicity. Must be: Hispanic, Latino, or Spanish Origin | Not Hispanic, Latino, or Spanish Origin');\r\n      }\r\n    }\r\n\r\n    // Zipcode validation\r\n    if (userMetadata.zipcode) {\r\n      const zipcodeRegex = /^[a-zA-Z0-9]{1,10}$/;\r\n      if (!zipcodeRegex.test(userMetadata.zipcode)) {\r\n        errors.push('Zipcode must be alphanumeric and contain no more than 10 characters');\r\n      }\r\n    }\r\n\r\n    // Weight validation\r\n    if (userMetadata.weight) {\r\n      const weight = parseInt(userMetadata.weight);\r\n      if (isNaN(weight) || weight < 10 || weight > 1000) {\r\n        errors.push('Weight must be between 10 and 1000 pounds (lbs)');\r\n      }\r\n    }\r\n\r\n    return errors;\r\n  }, [userMetadata]);\r\n\r\n  const buildMetadata = useCallback(() => {\r\n    const metadata: Partial<SessionMetadata> = {};\r\n    let hasMetadata = false;\r\n\r\n    if (userMetadata.age) {\r\n      metadata.age = parseInt(userMetadata.age);\r\n      hasMetadata = true;\r\n    }\r\n    if (userMetadata.gender) {\r\n      metadata.gender = userMetadata.gender as SessionMetadata['gender'];\r\n      hasMetadata = true;\r\n    }\r\n    if (userMetadata.race) {\r\n      metadata.race = userMetadata.race as SessionMetadata['race'];\r\n      hasMetadata = true;\r\n    }\r\n    if (userMetadata.ethnicity) {\r\n      metadata.ethnicity = userMetadata.ethnicity as SessionMetadata['ethnicity'];\r\n      hasMetadata = true;\r\n    }\r\n    if (userMetadata.language === 'true' || userMetadata.language === 'false') {\r\n      metadata.language = userMetadata.language === 'true';\r\n      hasMetadata = true;\r\n    }\r\n    if (userMetadata.weight) {\r\n      metadata.weight = parseInt(userMetadata.weight);\r\n      hasMetadata = true;\r\n    }\r\n    if (userMetadata.zipcode) {\r\n      metadata.zipcode = userMetadata.zipcode;\r\n      hasMetadata = true;\r\n    }\r\n\r\n    return hasMetadata ? metadata : undefined;\r\n  }, [userMetadata]);\r\n\r\n  const processAndAnalyze = useCallback(async () => {\r\n    if (isMultiMode) {\r\n      if (audioFiles.length === 0 || !userId.trim()) {\r\n        setError('Please select audio files. User ID is automatically generated.');\r\n        addToast('error', 'Missing Information', 'Please select audio files. User ID is automatically generated.');\r\n        return;\r\n      }\r\n      await processMultipleFiles();\r\n    } else {\r\n      if (!audioFile || !userId.trim()) {\r\n        setError('Please select an audio file. User ID is automatically generated.');\r\n        addToast('error', 'Missing Information', 'Please select an audio file. User ID is automatically generated.');\r\n        return;\r\n      }\r\n      await processSingleFile();\r\n    }\r\n  }, [audioFile, audioFiles, userId, isMultiMode]);\r\n\r\n  const processSingleFileById = useCallback(async (fileId: string, audioFile: AudioFile) => {\r\n    try {\r\n      // Step 1: Initiate session\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'initiating', progress: 5, message: 'Initiating session...' }\r\n      }));\r\n\r\n      const metadata = buildMetadata();\r\n      const sessionRequest: any = {\r\n        userid: userId.trim(),\r\n        is_initiated: true\r\n      };\r\n\r\n      // Only include metadata if we have any\r\n      if (metadata) {\r\n        sessionRequest.metadata = metadata;\r\n      }\r\n\r\n      const sessionResponse = await apiService.initiateSession(sessionRequest);\r\n\r\n      const sessionData: SessionInfo = {\r\n        sessionId: sessionResponse.sessionId,\r\n        userId: userId.trim()\r\n      };\r\n\r\n      // Save initial session data to blob storage so it appears in Analysis Sessions UI\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'initiating', progress: 10, message: 'Saving session data...' }\r\n      }));\r\n\r\n      const initialSessionData = {\r\n        sessionId: sessionResponse.sessionId,\r\n        userId: userId.trim(),\r\n        userMetadata: metadata,\r\n        audioFileName: audioFile.file.name,\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        status: 'initiated'\r\n      };\r\n\r\n      try {\r\n        await apiService.saveSessionData(initialSessionData);\r\n      } catch (error) {\r\n        // Continue with the process even if saving fails\r\n        // Error is handled silently as this is not critical for the main workflow\r\n      }\r\n\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'converting', progress: 15, message: 'Converting audio to required format...' }\r\n      }));\r\n\r\n      // Step 2: Convert audio using FFmpeg\r\n      const convertedBlob = await convertAudioToWav(audioFile.file, (progressPercent: number) => {\r\n        setProcessingProgress(prev => ({\r\n          ...prev,\r\n          [fileId]: {\r\n            stage: 'converting',\r\n            progress: 15 + (progressPercent * 0.25), // 15-40% for conversion\r\n            message: `Converting audio... ${Math.round(progressPercent)}%`\r\n          }\r\n        }));\r\n      });\r\n\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'uploading', progress: 40, message: 'Uploading to Azure Blob Storage...' }\r\n      }));\r\n\r\n      // Step 3: Upload to Azure Blob Storage\r\n      const fileName = `${userId}_${sessionData.sessionId}_${Date.now()}.wav`;\r\n      const audioUrl = await uploadToAzureBlob(convertedBlob, fileName, (progressPercent: number) => {\r\n        setProcessingProgress(prev => ({\r\n          ...prev,\r\n          [fileId]: {\r\n            stage: 'uploading',\r\n            progress: 40 + (progressPercent * 0.25), // 40-65% for upload\r\n            message: `Uploading... ${Math.round(progressPercent)}%`\r\n          }\r\n        }));\r\n      });\r\n\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'submitting', progress: 65, message: 'Submitting for analysis...' }\r\n      }));\r\n\r\n      // Update session data with audio information\r\n      try {\r\n        const updatedSessionData = {\r\n          ...initialSessionData,\r\n          audioUrl: audioUrl,\r\n          audioFileName: fileName,\r\n          status: 'processing',\r\n          updatedAt: new Date().toISOString()\r\n        };\r\n        await apiService.updateSessionData(sessionData.sessionId, updatedSessionData);\r\n      } catch (error) {\r\n        console.warn('Failed to update session data with audio info:', error);\r\n        // Continue with the process even if updating fails\r\n      }\r\n\r\n      // Step 4: Submit prediction with URL to /predictions/submit endpoint\r\n      await apiService.submitPrediction({\r\n        userId: userId.trim(),\r\n        sessionid: sessionData.sessionId,\r\n        audioFileUrl: audioUrl,\r\n        audioFileName: fileName\r\n      });\r\n\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'analyzing', progress: 70, message: 'Analyzing audio with Kintsugi Health API...' }\r\n      }));\r\n\r\n      // Step 5: Poll for results\r\n      const poller = new PredictionPoller(sessionData.sessionId);\r\n      \r\n      await new Promise<void>((resolve, reject) => {\r\n        poller.start(\r\n          (result: PredictionResult) => {\r\n            // Update progress during polling\r\n            const progressPercent = result.status === 'processing' ? 80 : \r\n                                  result.status === 'success' ? 95 : 70;\r\n            setProcessingProgress(prev => ({\r\n              ...prev,\r\n              [fileId]: { \r\n                stage: 'analyzing', \r\n                progress: progressPercent, \r\n                message: `Analysis ${result.status}...` \r\n              }\r\n            }));\r\n\r\n            // Check for predict_error and show toast\r\n            if (result.predictError) {\r\n              addToast('error', 'Prediction Error', \r\n                `${result.predictError.error}: ${result.predictError.message}`);\r\n            }\r\n          },\r\n          (result: PredictionResult) => {\r\n            // Check for final errors before completing\r\n            if (result.predictError) {\r\n              addToast('error', 'Analysis Failed', \r\n                `The analysis completed with an error: ${result.predictError.error} - ${result.predictError.message}`);\r\n              setProcessingProgress(prev => ({\r\n                ...prev,\r\n                [fileId]: { stage: 'error', progress: 0, message: 'Analysis failed with errors' }\r\n              }));\r\n              reject(new Error(`Prediction error: ${result.predictError.error}`));\r\n              return;\r\n            }\r\n\r\n            // Analysis complete successfully\r\n            const analysisResult: AnalysisResult = {\r\n              sessionId: sessionData.sessionId,\r\n              depressionScore: result.predictedScoreDepression ? parseFloat(result.predictedScoreDepression) : 0,\r\n              riskLevel: result.predictedScoreDepression && parseFloat(result.predictedScoreDepression) > 0.7 ? 'high' :\r\n                        result.predictedScoreDepression && parseFloat(result.predictedScoreDepression) > 0.4 ? 'medium' : 'low',\r\n              confidence: 0.85, // This would come from the API in a real scenario\r\n              insights: [\r\n                'Analysis completed using Kintsugi Health API',\r\n                result.predictedScoreDepression ? `Depression score: ${result.predictedScoreDepression}` : '',\r\n                result.predictedScoreAnxiety ? `Anxiety score: ${result.predictedScoreAnxiety}` : '',\r\n                'Results should be reviewed by a qualified healthcare professional'\r\n              ].filter(insight => insight.trim() !== ''),\r\n              timestamp: result.updatedAt,\r\n              audioUrl: audioUrl,\r\n              rawApiResponse: result // Store the complete API response\r\n            };            \r\n            setProcessingProgress(prev => ({\r\n              ...prev,\r\n              [fileId]: { stage: 'complete', progress: 100, message: 'Analysis complete!' }\r\n            }));\r\n            setResults(prev => ({\r\n              ...prev,\r\n              [fileId]: analysisResult\r\n            }));\r\n            resolve();\r\n          },\r\n          (error: AppError) => {\r\n            reject(error);\r\n          }\r\n        );\r\n      });\r\n\r\n    } catch (err) {\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'error', progress: 0, message: 'Processing failed' }\r\n      }));\r\n      throw err; // Re-throw to be handled by the calling function\r\n    }\r\n  }, [userId, buildMetadata, apiService, uploadToAzureBlob, convertAudioToWav, addToast]);\r\n\r\n  const processMultipleFiles = useCallback(async () => {\r\n    setIsProcessing(true);\r\n    setError(null);\r\n    \r\n    // Validate metadata once for all files\r\n    const validationErrors = validateMetadata();\r\n    if (validationErrors.length > 0) {\r\n      setError(`Validation error: ${validationErrors.join(', ')}`);\r\n      addToast('error', 'Validation Error', validationErrors.join(', '));\r\n      setIsProcessing(false);\r\n      return;\r\n    }\r\n\r\n    // Only process files that are in 'ready' state\r\n    const filesToProcess = audioFiles.filter(file => fileStates[file.id] === 'ready');\r\n    \r\n    if (filesToProcess.length === 0) {\r\n      addToast('info', 'No Files Ready', 'No files are ready to process');\r\n      setIsProcessing(false);\r\n      return;\r\n    }\r\n\r\n    const totalFiles = filesToProcess.length;\r\n    let completedFiles = 0;\r\n\r\n    try {\r\n      for (const audioFile of filesToProcess) {\r\n        completedFiles++;\r\n        addToast('info', 'Processing File', `Processing ${audioFile.file.name} (${completedFiles}/${totalFiles})`);\r\n        \r\n        // Set file state to processing\r\n        setFileStates(prev => ({ ...prev, [audioFile.id]: 'processing' }));\r\n        \r\n        try {\r\n          await processSingleFileById(audioFile.id, audioFile);\r\n          setFileStates(prev => ({ ...prev, [audioFile.id]: 'complete' }));\r\n          addToast('success', 'File Complete', `${audioFile.file.name} processed successfully`);\r\n        } catch (error) {\r\n          const errorMessage = error instanceof Error ? error.message : 'An unexpected error occurred';\r\n          addToast('error', 'File Failed', `Failed to process ${audioFile.file.name}: ${errorMessage}`);\r\n          \r\n          // Set error state for this file\r\n          setFileStates(prev => ({ ...prev, [audioFile.id]: 'error' }));\r\n          setProcessingProgress(prev => ({\r\n            ...prev,\r\n            [audioFile.id]: { stage: 'error', progress: 0, message: `Failed: ${errorMessage}` }\r\n          }));\r\n        }\r\n      }\r\n      \r\n      addToast('success', 'Batch Complete', `Processed ${completedFiles} file${completedFiles !== 1 ? 's' : ''}`);\r\n      announceToScreenReader(`Batch processing complete. ${completedFiles} files processed.`);\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'An unexpected error occurred';\r\n      setError(errorMessage);\r\n      addToast('error', 'Batch Failed', errorMessage);\r\n      announceToScreenReader(`Error: ${errorMessage}`);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  }, [audioFiles, fileStates, validateMetadata, addToast, announceToScreenReader, processSingleFileById]);\r\n\r\n  const startSingleFile = useCallback(async (fileId: string) => {\r\n    const audioFile = audioFiles.find(f => f.id === fileId);\r\n    if (!audioFile) return;\r\n\r\n    // Validate metadata\r\n    const validationErrors = validateMetadata();\r\n    if (validationErrors.length > 0) {\r\n      setError(`Validation error: ${validationErrors.join(', ')}`);\r\n      addToast('error', 'Validation Error', validationErrors.join(', '));\r\n      return;\r\n    }\r\n\r\n    setFileStates(prev => ({ ...prev, [fileId]: 'processing' }));\r\n    \r\n    try {\r\n      await processSingleFileById(fileId, audioFile);\r\n      setFileStates(prev => ({ ...prev, [fileId]: 'complete' }));\r\n      addToast('success', 'File Complete', `${audioFile.file.name} processed successfully`);\r\n    } catch (error) {\r\n      console.error(`Error processing ${audioFile.file.name}:`, error);\r\n      const errorMessage = error instanceof Error ? error.message : 'An unexpected error occurred';\r\n      addToast('error', 'File Failed', `Failed to process ${audioFile.file.name}: ${errorMessage}`);\r\n      setFileStates(prev => ({ ...prev, [fileId]: 'error' }));\r\n      setProcessingProgress(prev => ({\r\n        ...prev,\r\n        [fileId]: { stage: 'error', progress: 0, message: `Failed: ${errorMessage}` }\r\n      }));\r\n    }\r\n  }, [audioFiles, validateMetadata, addToast, processSingleFileById]);\r\n\r\n  const processSingleFile = useCallback(async () => {\r\n    if (!audioFile || !userId.trim()) {\r\n      setError('Please select an audio file. User ID is automatically generated.');\r\n      addToast('error', 'Missing Information', 'Please select an audio file. User ID is automatically generated.');\r\n      return;\r\n    }\r\n\r\n    // Validate metadata\r\n    const validationErrors = validateMetadata();\r\n    if (validationErrors.length > 0) {\r\n      setError(`Validation error: ${validationErrors.join(', ')}`);\r\n      addToast('error', 'Validation Error', validationErrors.join(', '));\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      \r\n      // Step 1: Initiate session\r\n      setProgress({ stage: 'initiating', progress: 5, message: 'Initiating session...' });\r\n      announceToScreenReader('Starting analysis process - initiating session');\r\n\r\n      const metadata = buildMetadata();\r\n      const sessionRequest: any = {\r\n        userid: userId.trim(),\r\n        is_initiated: true\r\n      };\r\n\r\n      // Only include metadata if we have any\r\n      if (metadata) {\r\n        sessionRequest.metadata = metadata;\r\n      }\r\n\r\n      const sessionResponse = await apiService.initiateSession(sessionRequest);\r\n\r\n      const sessionData: SessionInfo = {\r\n        sessionId: sessionResponse.sessionId,\r\n        userId: userId.trim()\r\n      };\r\n\r\n      // Save initial session data to blob storage so it appears in Analysis Sessions UI\r\n      setProgress({ stage: 'initiating', progress: 10, message: 'Saving session data...' });\r\n\r\n      const initialSessionData = {\r\n        sessionId: sessionResponse.sessionId,\r\n        userId: userId.trim(),\r\n        userMetadata: metadata,\r\n        audioFileName: audioFile.file.name,\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        status: 'initiated'\r\n      };\r\n\r\n      try {\r\n        await apiService.saveSessionData(initialSessionData);\r\n      } catch (error) {\r\n        // Continue with the process even if saving fails\r\n        // Error is handled silently as this is not critical for the main workflow\r\n      }\r\n\r\n      setProgress({ stage: 'converting', progress: 15, message: 'Converting audio to required format...' });\r\n      announceToScreenReader('Session created successfully, now converting audio');\r\n\r\n      // Step 2: Convert audio using FFmpeg\r\n      const convertedBlob = await convertAudioToWav(audioFile.file, (progressPercent: number) => {\r\n        setProgress({\r\n          stage: 'converting',\r\n          progress: 15 + (progressPercent * 0.25), // 15-40% for conversion\r\n          message: `Converting audio... ${Math.round(progressPercent)}%`\r\n        });\r\n      });\r\n\r\n      setProgress({ stage: 'uploading', progress: 40, message: 'Uploading to Azure Blob Storage...' });\r\n      announceToScreenReader('Audio converted successfully, now uploading');\r\n\r\n      // Step 3: Upload to Azure Blob Storage\r\n      const fileName = `${userId}_${sessionData.sessionId}_${Date.now()}.wav`;\r\n      const audioUrl = await uploadToAzureBlob(convertedBlob, fileName, (progressPercent: number) => {\r\n        setProgress({\r\n          stage: 'uploading',\r\n          progress: 40 + (progressPercent * 0.25), // 40-65% for upload\r\n          message: `Uploading... ${Math.round(progressPercent)}%`\r\n        });\r\n      });\r\n\r\n      setProgress({ stage: 'submitting', progress: 65, message: 'Submitting for analysis...' });\r\n      announceToScreenReader('Upload complete, submitting for behavioral health analysis');\r\n\r\n      // Update session data with audio information\r\n      try {\r\n        const updatedSessionData = {\r\n          ...initialSessionData,\r\n          audioUrl: audioUrl,\r\n          audioFileName: fileName,\r\n          status: 'processing',\r\n          updatedAt: new Date().toISOString()\r\n        };\r\n        await apiService.updateSessionData(sessionData.sessionId, updatedSessionData);\r\n      } catch (error) {\r\n        console.warn('Failed to update session data with audio info:', error);\r\n        // Continue with the process even if updating fails\r\n      }\r\n\r\n      // Step 4: Submit prediction with URL to /predictions/submit endpoint\r\n      await apiService.submitPrediction({\r\n        userId: userId.trim(),\r\n        sessionid: sessionData.sessionId,\r\n        audioFileUrl: audioUrl,\r\n        audioFileName: fileName\r\n      });\r\n\r\n      setProgress({ stage: 'analyzing', progress: 70, message: 'Analyzing audio with Kintsugi Health API...' });\r\n      announceToScreenReader('Prediction submitted, analysis in progress');\r\n\r\n      // Step 5: Poll for results\r\n      const poller = new PredictionPoller(sessionData.sessionId);\r\n      \r\n      await new Promise<void>((resolve, reject) => {\r\n        poller.start(\r\n          (result: PredictionResult) => {\r\n            // Update progress during polling\r\n            const progressPercent = result.status === 'processing' ? 80 : \r\n                                  result.status === 'success' ? 95 : 70;\r\n            setProgress({ \r\n              stage: 'analyzing', \r\n              progress: progressPercent, \r\n              message: `Analysis ${result.status}...` \r\n            });\r\n\r\n            // Check for predict_error and show toast\r\n            if (result.predictError) {\r\n              addToast('error', 'Prediction Error', \r\n                `${result.predictError.error}: ${result.predictError.message}`);\r\n            }\r\n          },\r\n          (result: PredictionResult) => {\r\n            // Check for final errors before completing\r\n            if (result.predictError) {\r\n              addToast('error', 'Analysis Failed', \r\n                `The analysis completed with an error: ${result.predictError.error} - ${result.predictError.message}`);\r\n              setProgress({ stage: 'error', progress: 0, message: 'Analysis failed with errors' });\r\n              reject(new Error(`Prediction error: ${result.predictError.error}`));\r\n              return;\r\n            }\r\n\r\n            // Analysis complete successfully\r\n            const analysisResult: AnalysisResult = {\r\n              sessionId: sessionData.sessionId,\r\n              depressionScore: result.predictedScoreDepression ? parseFloat(result.predictedScoreDepression) : 0,\r\n              riskLevel: result.predictedScoreDepression && parseFloat(result.predictedScoreDepression) > 0.7 ? 'high' :\r\n                        result.predictedScoreDepression && parseFloat(result.predictedScoreDepression) > 0.4 ? 'medium' : 'low',\r\n              confidence: 0.85, // This would come from the API in a real scenario\r\n            insights: [\r\n              'Analysis completed using Kintsugi Health API',\r\n              result.predictedScoreDepression ? `Depression score: ${result.predictedScoreDepression}` : '',\r\n              result.predictedScoreAnxiety ? `Anxiety score: ${result.predictedScoreAnxiety}` : '',\r\n              'Results should be reviewed by a qualified healthcare professional'\r\n            ].filter(insight => insight.trim() !== ''),\r\n            timestamp: result.updatedAt,\r\n            audioUrl: audioUrl,\r\n            rawApiResponse: result // Store the complete API response\r\n          };            \r\n            setProgress({ stage: 'complete', progress: 100, message: 'Analysis complete!' });\r\n            setResult(analysisResult);\r\n            addToast('success', 'Analysis Complete', 'Your behavioral health analysis has been completed successfully.');\r\n            announceToScreenReader('Behavioral health analysis completed successfully');\r\n            resolve();\r\n          },\r\n          (error: AppError) => {\r\n            addToast('error', 'Analysis Error', error.message || 'An unexpected error occurred during analysis.');\r\n            reject(error);\r\n          }\r\n        );\r\n      });\r\n\r\n    } catch (err) {\r\n      console.error('Processing error:', err);\r\n      const errorMessage = err instanceof Error ? err.message : 'An unexpected error occurred';\r\n      setError(errorMessage);\r\n      setProgress({ stage: 'error', progress: 0, message: 'Processing failed' });\r\n      addToast('error', 'Processing Failed', errorMessage);\r\n      announceToScreenReader(`Error: ${errorMessage}`);\r\n    }\r\n  }, [audioFile, userId, announceToScreenReader, validateMetadata, buildMetadata]);\r\n\r\n  const getProgressColor = useCallback((stage: string) => {\r\n    switch (stage) {\r\n      case 'error': return 'bg-red-500';\r\n      case 'complete': return 'bg-green-500';\r\n      default: return 'bg-blue-500';\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-6 space-y-8\">\r\n      {/* Header with Dark Mode Toggle and Mode Switcher */}\r\n      <div className=\"text-center\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          {/* Mode Switcher */}\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Processing Mode:</span>\r\n              <div className=\"relative inline-flex items-center\">\r\n                <button type=\"button\"\r\n                  onClick={toggleMode}\r\n                  className={`relative inline-flex h-8 w-16 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 ${\r\n                    isMultiMode \r\n                      ? 'bg-blue-600 hover:bg-blue-700' \r\n                      : 'bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500'\r\n                  }`}\r\n                  aria-label={`Switch to ${isMultiMode ? 'single file' : 'multi-file'} mode`}\r\n                >\r\n                  <span\r\n                    className={`inline-flex h-6 w-6 transform rounded-full bg-white items-center justify-center transition-transform ${\r\n                      isMultiMode ? 'translate-x-9' : 'translate-x-1'\r\n                    }`}\r\n                  >\r\n                    {isMultiMode ? (\r\n                      <Files className=\"h-3 w-3 text-blue-600\" />\r\n                    ) : (\r\n                      <File className=\"h-3 w-3 text-gray-600\" />\r\n                    )}\r\n                  </span>\r\n                </button>\r\n                <div className=\"ml-3 flex items-center space-x-4\">\r\n                  <span className={`text-sm font-medium ${!isMultiMode ? 'text-gray-900 dark:text-white' : 'text-gray-500 dark:text-gray-400'}`}>\r\n                    Single\r\n                  </span>\r\n                  <span className={`text-sm font-medium ${isMultiMode ? 'text-gray-900 dark:text-white' : 'text-gray-500 dark:text-gray-400'}`}>\r\n                    Multi\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Status Badge */}\r\n            <div className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${\r\n              isMultiMode \r\n                ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200' \r\n                : 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\r\n            }`}>\r\n              {isMultiMode ? (\r\n                <>\r\n                  <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path fillRule=\"evenodd\" d=\"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                  Batch Processing\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                  Single File\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">\r\n          Upload & Analyze Audio\r\n        </h1>\r\n        <p className=\"text-gray-600 dark:text-gray-300 mb-4\">\r\n          Upload {isMultiMode ? 'multiple audio files' : 'an audio file'} for behavioral health analysis using AI-powered speech pattern recognition\r\n        </p>\r\n        \r\n        {/* Mode Description */}\r\n        <div className={`inline-flex items-center px-4 py-2 rounded-lg text-sm ${\r\n          isMultiMode \r\n            ? 'bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300' \r\n            : 'bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-300'\r\n        }`}>\r\n          {isMultiMode ? (\r\n            <>\r\n              <svg className=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path d=\"M9 12a1 1 0 000 2h2a1 1 0 100-2H9z\" />\r\n                <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 0v12h8V4H6z\" clipRule=\"evenodd\" />\r\n              </svg>\r\n              Process multiple files with individual controls and batch options\r\n            </>\r\n          ) : (\r\n            <>\r\n              <svg className=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fillRule=\"evenodd\" d=\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\r\n              </svg>\r\n              Upload and analyze one file at a time with detailed progress tracking\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* User Metadata Form */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n          Patient Information\r\n        </h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          <div className=\"md:col-span-2 lg:col-span-3 mb-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              User ID Management\r\n            </label>\r\n            <div className=\"bg-gray-100 dark:bg-gray-700 p-4 rounded-md border space-y-3\">\r\n              {/* Current User ID Display */}\r\n              <div>\r\n                <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Current User ID:</p>\r\n                <code className=\"text-sm font-mono text-gray-900 dark:text-gray-100 break-all block bg-white dark:bg-gray-800 p-2 rounded border\">\r\n                  {userId}\r\n                </code>\r\n              </div>\r\n              \r\n              {/* User ID Management Controls */}\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button type=\"button\"\r\n                    onClick={handleToggleUserIdMode}\r\n                    className=\"px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors\"\r\n                    aria-describedby=\"user-id-mode-help\"\r\n                  >\r\n                    {isCustomUserIdMode ? 'Switch to Auto-Generated' : 'Use Custom User ID'}\r\n                  </button>\r\n                  \r\n                  {!isCustomUserIdMode && (\r\n                    <button type=\"button\"\r\n                      onClick={handleGenerateNewUserId}\r\n                      className=\"px-3 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800 transition-colors\"\r\n                      title=\"Generate a new random User ID\"\r\n                    >\r\n                      Generate New ID\r\n                    </button>\r\n                  )}\r\n                </div>\r\n\r\n                {isCustomUserIdMode && (\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex gap-2\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={customUserId}\r\n                        onChange={(e) => handleCustomUserIdChange(e.target.value)}\r\n                        placeholder=\"Enter custom User ID (any unique string)\"\r\n                        className=\"flex-1 px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                        aria-describedby=\"custom-user-id-help\"\r\n                        aria-invalid={userIdError ? 'true' : 'false'}\r\n                      />\r\n                      <button type=\"button\"\r\n                        onClick={handleApplyCustomUserId}\r\n                        disabled={!customUserId.trim()}\r\n                        className=\"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors\"\r\n                      >\r\n                        Apply\r\n                      </button>\r\n                    </div>\r\n                    \r\n                    {userIdError && (\r\n                      <p className=\"text-sm text-red-600 dark:text-red-400\" role=\"alert\">\r\n                        {userIdError}\r\n                      </p>\r\n                    )}\r\n                    \r\n                    <p id=\"custom-user-id-help\" className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                      Any unique string (3-100 characters). Examples: \"patient-001\", \"john.doe@clinic\", \"study-participant-42\"\r\n                    </p>\r\n                  </div>\r\n                )}\r\n                \r\n                <p id=\"user-id-mode-help\" className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                  {isCustomUserIdMode \r\n                    ? 'Custom mode: Use any unique identifier for tracking (e.g., patient ID, username, study code)' \r\n                    : 'Auto mode: System generates unique UUIDs automatically'\r\n                  }\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"age\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Age (Optional)\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"age\"\r\n              value={userMetadata.age}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, age: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n              placeholder=\"Age in years\"\r\n              min=\"1\"\r\n              max=\"150\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"weight\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Weight (Optional)\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"weight\"\r\n              value={userMetadata.weight}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, weight: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n              placeholder=\"Weight in lbs\"\r\n              min=\"1\"\r\n              max=\"1000\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"gender\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Gender (Optional)\r\n            </label>\r\n            <select\r\n              id=\"gender\"\r\n              value={userMetadata.gender}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, gender: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            >\r\n              <option value=\"\">Select gender</option>\r\n              <option value=\"male\">Male</option>\r\n              <option value=\"female\">Female</option>\r\n              <option value=\"non-binary\">Non-binary</option>\r\n              <option value=\"transgender female\">Transgender female</option>\r\n              <option value=\"transgender male\">Transgender male</option>\r\n              <option value=\"other\">Other</option>\r\n              <option value=\"prefer\">Prefer</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"race\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Race (Optional)\r\n            </label>\r\n            <select\r\n              id=\"race\"\r\n              value={userMetadata.race}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, race: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            >\r\n              <option value=\"\">Select race</option>\r\n              <option value=\"white\">White</option>\r\n              <option value=\"black or african-american\">Black or African-American</option>\r\n              <option value=\"asian\">Asian</option>\r\n              <option value=\"american indian or alaskan native\">American Indian or Alaskan Native</option>\r\n              <option value=\"native Hawaiian or pacific islander\">Native Hawaiian or Pacific Islander</option>\r\n              <option value=\"two or more races\">Two or more races</option>\r\n              <option value=\"other\">Other</option>\r\n              <option value=\"prefer not to say\">Prefer not to say</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"ethnicity\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Ethnicity (Optional)\r\n            </label>\r\n            <select\r\n              id=\"ethnicity\"\r\n              value={userMetadata.ethnicity}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, ethnicity: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            >\r\n              <option value=\"\">Select ethnicity</option>\r\n              <option value=\"Hispanic, Latino, or Spanish Origin\">Hispanic, Latino, or Spanish Origin</option>\r\n              <option value=\"Not Hispanic, Latino, or Spanish Origin\">Not Hispanic, Latino, or Spanish Origin</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"language\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Primary Language (Optional)\r\n            </label>\r\n            <select\r\n              id=\"language\"\r\n              value={userMetadata.language}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, language: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            >\r\n              <option value=\"\">Select language</option>\r\n              <option value=\"true\">English</option>\r\n              <option value=\"false\">Other</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"zipcode\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              ZIP Code (Optional)\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"zipcode\"\r\n              value={userMetadata.zipcode}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, zipcode: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n              placeholder=\"Enter ZIP code\"\r\n              pattern=\"[0-9]{5}(-[0-9]{4})?\"\r\n              title=\"Enter a valid ZIP code (e.g., 12345 or 12345-6789)\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"md:col-span-2 lg:col-span-3\">\r\n            <label htmlFor=\"sessionNotes\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Session Notes (Optional)\r\n            </label>\r\n            <textarea\r\n              id=\"sessionNotes\"\r\n              value={userMetadata.sessionNotes}\r\n              onChange={(e) => setUserMetadata(prev => ({ ...prev, sessionNotes: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n              rows={3}\r\n              placeholder=\"Additional notes about this session or patient context\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* File Upload Area */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n          Audio File Upload {isMultiMode && <span className=\"text-sm font-normal text-gray-500 dark:text-gray-400\">(Multi-File Mode)</span>}\r\n        </h2>\r\n        \r\n        {(!isMultiMode && !audioFile) || (isMultiMode && audioFiles.length === 0) ? (\r\n          <div\r\n            className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors\"\r\n            onDragOver={handleDragOver}\r\n            onDrop={handleDrop}\r\n          >\r\n            <Upload className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" aria-hidden=\"true\" />\r\n            <div className=\"mb-4\">\r\n              <button type=\"button\"\r\n                onClick={() => fileInputRef.current?.click()}\r\n                className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800\"\r\n              >\r\n                <Plus className=\"h-4 w-4 mr-2\" />\r\n                Select Audio File{isMultiMode ? 's' : ''}\r\n              </button>\r\n              <p className=\"mt-2 text-sm text-gray-600 dark:text-gray-400\">\r\n                or drag and drop {isMultiMode ? 'files' : 'file'} here\r\n              </p>\r\n            </div>\r\n            <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n              Supported formats: WAV, MP3, M4A, AAC, FLAC (max 50MB each)\r\n              {isMultiMode && <br />}\r\n              {isMultiMode && 'You can select multiple files at once'}\r\n            </p>\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              className=\"hidden\"\r\n              accept=\".wav,.mp3,.m4a,.aac,.flac,audio/*\"\r\n              onChange={handleFileSelect}\r\n              multiple={isMultiMode}\r\n              aria-label={`Select audio file${isMultiMode ? 's' : ''} for analysis`}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {/* Single File Display */}\r\n            {!isMultiMode && audioFile && (\r\n              <div className=\"border border-gray-200 dark:border-gray-600 rounded-lg p-4\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <Volume2 className=\"h-5 w-5 text-blue-500\" aria-hidden=\"true\" />\r\n                    <div>\r\n                      <p className=\"font-medium text-gray-900 dark:text-white\">\r\n                        {audioFile.file.name}\r\n                      </p>\r\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        {(audioFile.file.size / 1024 / 1024).toFixed(2)} MB\r\n                        {audioFile.duration && ` ‚Ä¢ ${formatTime(audioFile.duration)}`}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <button type=\"button\"\r\n                    onClick={resetState}\r\n                    className=\"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\r\n                    aria-label=\"Remove selected file\"\r\n                  >\r\n                    <X className=\"h-5 w-5\" />\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Audio Player */}\r\n                <div className=\"space-y-3\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <button type=\"button\"\r\n                      onClick={handlePlayPause}\r\n                      className=\"flex items-center justify-center w-10 h-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800\"\r\n                      aria-label={isPlaying ? 'Pause audio' : 'Play audio'}\r\n                    >\r\n                      {isPlaying ? (\r\n                        <Pause className=\"h-5 w-5\" aria-hidden=\"true\" />\r\n                      ) : (\r\n                        <Play className=\"h-5 w-5 ml-0.5\" aria-hidden=\"true\" />\r\n                      )}\r\n                    </button>\r\n                    <div className=\"flex-1\">\r\n                      {audioFile.duration && (\r\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          {formatTime(currentTime)} / {formatTime(audioFile.duration)}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {audioFile.duration && (\r\n                    <div className=\"audio-progress\">\r\n                      <div\r\n                        className=\"audio-progress__fill progress-dynamic progress-animated\"\r\n                        style={{ '--progress-width': `${(currentTime / audioFile.duration) * 100}%` } as React.CSSProperties}\r\n                        role=\"progressbar\"\r\n                        aria-label=\"Audio playback progress\"\r\n                        aria-valuenow={currentTime}\r\n                        aria-valuemin={0}\r\n                        aria-valuemax={audioFile.duration}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <audio\r\n                  ref={audioRef}\r\n                  src={audioFile.url}\r\n                  onTimeUpdate={handleTimeUpdate}\r\n                  onEnded={() => setIsPlaying(false)}\r\n                  onPlay={() => setIsPlaying(true)}\r\n                  onPause={() => setIsPlaying(false)}\r\n                  className=\"hidden\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Multi-File Display */}\r\n            {isMultiMode && audioFiles.length > 0 && (\r\n              <>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\r\n                    Selected Files ({audioFiles.length})\r\n                  </h3>\r\n                  <button type=\"button\"\r\n                    onClick={() => fileInputRef.current?.click()}\r\n                    className=\"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800\"\r\n                  >\r\n                    <Plus className=\"h-4 w-4 mr-2\" />\r\n                    Add More Files\r\n                  </button>\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  {audioFiles.map((file) => {\r\n                    const fileState = fileStates[file.id] || 'ready';\r\n                    const progress = processingProgress[file.id];\r\n                    \r\n                    return (\r\n                      <div key={file.id} className=\"border border-gray-200 dark:border-gray-600 rounded-lg p-4\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <div className=\"flex items-center space-x-2 flex-1 min-w-0\">\r\n                            <Volume2 className=\"h-4 w-4 text-blue-500 flex-shrink-0\" aria-hidden=\"true\" />\r\n                            <div className=\"min-w-0 flex-1\">\r\n                              <p className=\"font-medium text-gray-900 dark:text-white truncate\">\r\n                                {file.file.name}\r\n                              </p>\r\n                              <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                {(file.file.size / 1024 / 1024).toFixed(2)} MB\r\n                                {file.duration && ` ‚Ä¢ ${formatTime(file.duration)}`}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            {/* Start button for individual file */}\r\n                            {fileState === 'ready' && (\r\n                              <button type=\"button\"\r\n                                onClick={() => startSingleFile(file.id)}\r\n                                className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-800\"\r\n                                aria-label={`Start processing ${file.file.name}`}\r\n                              >\r\n                                <Play className=\"h-3 w-3 mr-1\" />\r\n                                Start\r\n                              </button>\r\n                            )}\r\n                            {fileState === 'processing' && (\r\n                              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200\">\r\n                                Processing...\r\n                              </span>\r\n                            )}\r\n                            {fileState === 'complete' && (\r\n                              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\">\r\n                                <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n                                Complete\r\n                              </span>\r\n                            )}\r\n                            {fileState === 'error' && (\r\n                              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200\">\r\n                                <X className=\"h-3 w-3 mr-1\" />\r\n                                Error\r\n                              </span>\r\n                            )}\r\n                            <button type=\"button\"\r\n                              onClick={() => removeAudioFile(file.id)}\r\n                              className=\"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400\"\r\n                              aria-label={`Remove ${file.file.name}`}\r\n                            >\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        {/* Processing status for this file */}\r\n                        {progress && (\r\n                          <div className=\"mt-2\">\r\n                            <div className=\"flex items-center justify-between text-xs\">\r\n                              <span className=\"text-gray-600 dark:text-gray-400\">\r\n                                {progress.message}\r\n                              </span>\r\n                              <span className=\"font-medium text-gray-900 dark:text-white\">\r\n                                {Math.round(progress.progress)}%\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"processing-progress mt-1\">\r\n                              <div\r\n                                className={`processing-progress__fill progress-dynamic progress-animated ${getProgressColor(progress.stage)}`}\r\n                                style={{ '--progress-width': `${progress.progress}%` } as React.CSSProperties}\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  className=\"hidden\"\r\n                  accept=\".wav,.mp3,.m4a,.aac,.flac,audio/*\"\r\n                  onChange={handleFileSelect}\r\n                  multiple={isMultiMode}\r\n                  aria-label=\"Select additional audio files for analysis\"\r\n                />\r\n              </>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Error Display */}\r\n      {error && (\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4\" role=\"alert\">\r\n          <div className=\"flex items-center\">\r\n            <AlertCircle className=\"h-5 w-5 text-red-500 mr-2\" aria-hidden=\"true\" />\r\n            <span className=\"text-red-700 dark:text-red-300\">{error}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Progress Display - Only show in single-file mode */}\r\n      {!isMultiMode && progress.stage !== 'idle' && !result && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n            Processing Status\r\n          </h3>\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                {progress.message}\r\n              </span>\r\n              <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                {Math.round(progress.progress)}%\r\n              </span>\r\n            </div>\r\n            <div className=\"processing-progress\">\r\n              <div\r\n                className={`processing-progress__fill progress-dynamic progress-animated ${getProgressColor(progress.stage)}`}\r\n                style={{ '--progress-width': `${progress.progress}%` } as React.CSSProperties}\r\n                role=\"progressbar\"\r\n                aria-label=\"Processing progress\"\r\n                aria-valuenow={progress.progress}\r\n                aria-valuemin={0}\r\n                aria-valuemax={100}\r\n              />\r\n            </div>\r\n            {progress.stage === 'analyzing' && (\r\n              <div className=\"flex items-center text-sm text-gray-600 dark:text-gray-400\">\r\n                <Loader2 className=\"h-4 w-4 animate-spin mr-2\" aria-hidden=\"true\" />\r\n                This may take a few minutes...\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Analysis Results */}\r\n      {result && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\r\n          <div className=\"flex items-center mb-4\">\r\n            <CheckCircle className=\"h-6 w-6 text-green-500 mr-2\" aria-hidden=\"true\" />\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n              Analysis Results\r\n            </h3>\r\n          </div>\r\n          \r\n          {/* Raw API Response */}\r\n          {result.rawApiResponse && (\r\n            <div className=\"mb-6\">\r\n              <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">API Response Details</h4>\r\n              <div className=\"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border\">\r\n                <div className=\"space-y-3\">\r\n                  {/* Predicted Scores */}\r\n                  <div>\r\n                    <h5 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Predicted Scores</h5>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Depression:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white\">{result.rawApiResponse.predicted_score_depression || 'N/A'}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Anxiety:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white\">{result.rawApiResponse.predicted_score_anxiety || 'N/A'}</span>\r\n                      </div>\r\n                      {/* Note: Overall predicted_score is deprecated and no longer displayed */}\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Status:</span>\r\n                        <span className={`font-mono ${result.rawApiResponse.status === 'success' ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\r\n                          {result.rawApiResponse.status || 'N/A'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Model Information */}\r\n                  <div>\r\n                    <h5 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Model Information</h5>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Category:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white\">{result.rawApiResponse.model_category || 'N/A'}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Granularity:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white\">{result.rawApiResponse.model_granularity || 'N/A'}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Calibrated:</span>\r\n                        <span className={`font-mono ${result.rawApiResponse.is_calibrated ? 'text-green-600 dark:text-green-400' : 'text-yellow-600 dark:text-yellow-400'}`}>\r\n                          {result.rawApiResponse.is_calibrated ? 'Yes' : 'No'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Actual Scores (if available) */}\r\n                  {result.rawApiResponse.actual_score && (\r\n                    <div>\r\n                      <h5 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Clinical Assessment Scores</h5>\r\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                        {result.rawApiResponse.actual_score.depression_binary !== undefined && (\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">Depression Binary:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                              {result.rawApiResponse.actual_score.depression_binary || 'N/A'}\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                        {result.rawApiResponse.actual_score.anxiety_binary !== undefined && (\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">Anxiety Binary:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                              {result.rawApiResponse.actual_score.anxiety_binary || 'N/A'}\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                        {result.rawApiResponse.actual_score.phq_9 && result.rawApiResponse.actual_score.phq_9.length > 0 && (\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">PHQ-9:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                              [{result.rawApiResponse.actual_score.phq_9.join(', ')}]\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                        {result.rawApiResponse.actual_score.phq_2 && result.rawApiResponse.actual_score.phq_2.length > 0 && (\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">PHQ-2:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                              [{result.rawApiResponse.actual_score.phq_2.join(', ')}]\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                        {result.rawApiResponse.actual_score.gad_7 && result.rawApiResponse.actual_score.gad_7.length > 0 && (\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">GAD-7:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                              [{result.rawApiResponse.actual_score.gad_7.join(', ')}]\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Timestamps */}\r\n                  <div>\r\n                    <h5 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Timeline</h5>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Created:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white text-xs\">\r\n                          {result.rawApiResponse.created_at ? new Date(result.rawApiResponse.created_at).toLocaleString() : 'N/A'}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Updated:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white text-xs\">\r\n                          {result.rawApiResponse.updated_at ? new Date(result.rawApiResponse.updated_at).toLocaleString() : 'N/A'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Session Information */}\r\n                  <div>\r\n                    <h5 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Session Information</h5>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">Session ID:</span>\r\n                        <span className=\"font-mono text-gray-900 dark:text-white text-xs\">\r\n                          {result.sessionId}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Error Information (if present) */}\r\n                  {result.rawApiResponse.predict_error && (\r\n                    <div className=\"border-l-4 border-red-400 bg-red-50 dark:bg-red-900/20 p-3\">\r\n                      <h5 className=\"text-sm font-medium text-red-700 dark:text-red-300 mb-1\">Prediction Error</h5>\r\n                      <div className=\"text-sm space-y-1\">\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-red-600 dark:text-red-400\">Error Type:</span>\r\n                          <span className=\"font-mono text-red-900 dark:text-red-100\">{result.rawApiResponse.predict_error.error}</span>\r\n                        </div>\r\n                        <div className=\"text-red-700 dark:text-red-300\">\r\n                          <span className=\"font-medium\">Message:</span> {result.rawApiResponse.predict_error.message}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Raw JSON Toggle */}\r\n                  <details className=\"mt-4\">\r\n                    <summary className=\"cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white\">\r\n                      View Raw JSON Response\r\n                    </summary>\r\n                    <div className=\"mt-2 bg-gray-100 dark:bg-gray-800 rounded p-3 overflow-auto\">\r\n                      <pre className=\"text-xs text-gray-800 dark:text-gray-200 whitespace-pre-wrap\">\r\n                        {JSON.stringify(result.rawApiResponse, null, 2)}\r\n                      </pre>\r\n                    </div>\r\n                  </details>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {result.insights && result.insights.length > 0 && (\r\n            <div className=\"mt-6\">\r\n              <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">Clinical Insights</h4>\r\n              <ul className=\"space-y-1\">\r\n                {result.insights.map((insight, index) => (\r\n                  <li key={index} className=\"text-gray-600 dark:text-gray-400 text-sm\">\r\n                    ‚Ä¢ {insight}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mt-6 flex space-x-3\">\r\n            <button type=\"button\"\r\n              onClick={resetState}\r\n              className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800\"\r\n            >\r\n              Analyze Another File\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Analyze Button */}\r\n      {((isMultiMode && audioFiles.length > 0) || (!isMultiMode && audioFile)) && \r\n       !result && Object.keys(results).length === 0 && \r\n       progress.stage === 'idle' && !isProcessing && (\r\n        <div className=\"text-center\">\r\n          {isMultiMode ? (\r\n            // Multi-file mode controls\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\r\n                <button type=\"button\"\r\n                  onClick={processMultipleFiles}\r\n                  disabled={audioFiles.length === 0 || !userId.trim() || \r\n                           !audioFiles.some(file => fileStates[file.id] === 'ready')}\r\n                  className=\"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed dark:focus:ring-offset-gray-800\"\r\n                >\r\n                  <Play className=\"h-5 w-5 mr-2\" aria-hidden=\"true\" />\r\n                  Start All Ready Files\r\n                  {audioFiles.filter(file => fileStates[file.id] === 'ready').length > 0 && \r\n                   ` (${audioFiles.filter(file => fileStates[file.id] === 'ready').length})`}\r\n                </button>\r\n              </div>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                Use individual \"Start\" buttons on each file for selective processing, or \"Start All\" to process all ready files sequentially\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            // Single-file mode controls\r\n            <div>\r\n              <button type=\"button\"\r\n                onClick={processAndAnalyze}\r\n                disabled={!audioFile || !userId.trim()}\r\n                className=\"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed dark:focus:ring-offset-gray-800\"\r\n              >\r\n                <Play className=\"h-5 w-5 mr-2\" aria-hidden=\"true\" />\r\n                Start Analysis\r\n              </button>\r\n              <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\r\n                This will convert, upload, and analyze your audio file\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Multi-File Results */}\r\n      {isMultiMode && Object.keys(results).length > 0 && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\r\n          <div className=\"flex items-center mb-4\">\r\n            <CheckCircle className=\"h-6 w-6 text-green-500 mr-2\" aria-hidden=\"true\" />\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n              Batch Analysis Results ({Object.keys(results).length} files)\r\n            </h3>\r\n          </div>\r\n\r\n          <div className=\"space-y-6\">\r\n            {Object.entries(results).map(([fileId, result]) => {\r\n              const audioFile = audioFiles.find(f => f.id === fileId);\r\n              const progress = processingProgress[fileId];\r\n              \r\n              return (\r\n                <div key={fileId} className=\"border dark:border-gray-700 rounded-lg p-4\">\r\n                  <div className=\"flex items-center justify-between mb-3\">\r\n                    <h4 className=\"font-medium text-gray-900 dark:text-white\">\r\n                      {audioFile?.file.name || `File ${fileId}`}\r\n                    </h4>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      {progress?.stage === 'complete' && (\r\n                        <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\">\r\n                          <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n                          Complete\r\n                        </span>\r\n                      )}\r\n                      {progress?.stage === 'error' && (\r\n                        <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200\">\r\n                          <X className=\"h-3 w-3 mr-1\" />\r\n                          Error\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* API Response Summary for this file */}\r\n                  {result.rawApiResponse && (\r\n                    <div className=\"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 border\">\r\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                        {/* Note: Overall predicted_score is deprecated */}\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-gray-600 dark:text-gray-400\">Depression:</span>\r\n                          <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                            {result.rawApiResponse.predicted_score_depression || 'N/A'}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-gray-600 dark:text-gray-400\">Anxiety:</span>\r\n                          <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                            {result.rawApiResponse.predicted_score_anxiety || 'N/A'}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      {/* Session Info */}\r\n                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">Session ID:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">{result.sessionId}</span>\r\n                          </div>\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">Status:</span>\r\n                            <span className=\"font-mono text-gray-900 dark:text-white\">\r\n                              {result.rawApiResponse.status || 'N/A'}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Raw JSON Toggle for this file */}\r\n                      <details className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\r\n                        <summary className=\"cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white\">\r\n                          View Raw JSON Response\r\n                        </summary>\r\n                        <div className=\"mt-2 bg-gray-100 dark:bg-gray-800 rounded p-3 overflow-auto max-h-64\">\r\n                          <pre className=\"text-xs text-gray-800 dark:text-gray-200 whitespace-pre-wrap\">\r\n                            {JSON.stringify(result.rawApiResponse, null, 2)}\r\n                          </pre>\r\n                        </div>\r\n                      </details>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Audio Player for this file */}\r\n                  {audioFile && (\r\n                    <div className=\"mt-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <button type=\"button\"\r\n                          onClick={() => {\r\n                            const audio = document.getElementById(`audio-${fileId}`) as HTMLAudioElement;\r\n                            if (audio.paused) {\r\n                              // Pause all other audio elements first\r\n                              document.querySelectorAll('audio').forEach(a => a.pause());\r\n                              setPlayingFileId(fileId);\r\n                              audio.play();\r\n                            } else {\r\n                              audio.pause();\r\n                              setPlayingFileId(null);\r\n                            }\r\n                          }}\r\n                          className=\"p-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900\"\r\n                          aria-label={playingFileId === fileId ? 'Pause audio' : 'Play audio'}\r\n                        >\r\n                          {playingFileId === fileId ? (\r\n                            <Pause className=\"h-4 w-4\" />\r\n                          ) : (\r\n                            <Play className=\"h-4 w-4\" />\r\n                          )}\r\n                        </button>\r\n                        <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                          {audioFile.file.name} ‚Ä¢ {audioFile.duration ? `${Math.round(audioFile.duration)}s` : 'Duration unknown'}\r\n                        </span>\r\n                      </div>\r\n                      <audio\r\n                        id={`audio-${fileId}`}\r\n                        src={audioFile.url}\r\n                        onEnded={() => setPlayingFileId(null)}\r\n                        className=\"hidden\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Toast Notifications */}\r\n      {toasts.length > 0 && (\r\n        <div className=\"fixed top-4 right-4 z-50 space-y-2\">\r\n          {toasts.map((toast) => (\r\n            <div\r\n              key={toast.id}\r\n              className={`max-w-sm w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg border-l-4 p-4 transition-all duration-300 transform ${\r\n                toast.type === 'error' ? 'border-red-500' :\r\n                toast.type === 'warning' ? 'border-yellow-500' :\r\n                toast.type === 'success' ? 'border-green-500' : 'border-blue-500'\r\n              }`}\r\n              role=\"alert\"\r\n            >\r\n              <div className=\"flex items-start\">\r\n                <div className=\"flex-shrink-0\">\r\n                  {toast.type === 'error' && (\r\n                    <AlertCircle className=\"h-5 w-5 text-red-500\" aria-hidden=\"true\" />\r\n                  )}\r\n                  {toast.type === 'warning' && (\r\n                    <AlertCircle className=\"h-5 w-5 text-yellow-500\" aria-hidden=\"true\" />\r\n                  )}\r\n                  {toast.type === 'success' && (\r\n                    <CheckCircle className=\"h-5 w-5 text-green-500\" aria-hidden=\"true\" />\r\n                  )}\r\n                  {toast.type === 'info' && (\r\n                    <AlertCircle className=\"h-5 w-5 text-blue-500\" aria-hidden=\"true\" />\r\n                  )}\r\n                </div>\r\n                <div className=\"ml-3 flex-1\">\r\n                  <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                    {toast.title}\r\n                  </p>\r\n                  <p className=\"mt-1 text-sm text-gray-600 dark:text-gray-400\">\r\n                    {toast.message}\r\n                  </p>\r\n                </div>\r\n                <div className=\"ml-4 flex-shrink-0\">\r\n                  <button type=\"button\"\r\n                    onClick={() => removeToast(toast.id)}\r\n                    className=\"inline-flex text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    aria-label=\"Close notification\"\r\n                  >\r\n                    <X className=\"h-4 w-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadAnalyze;\r\n","import React, { useState, useCallback, useMemo, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Search, Filter, ChevronDown, ChevronUp, Eye, Download, Trash2, RefreshCw, AlertCircle, CheckCircle, Clock, XCircle } from 'lucide-react';\r\nimport { useAccessibility } from '../hooks/useAccessibility';\r\nimport { apiService } from '../services/api';\r\nimport { getUserId, formatRelativeTime, formatDateTime } from '../utils';\r\nimport type { SessionData, AppError } from '../types';\r\n\r\n// Session interface for UI with additional computed fields\r\ninterface SessionWithUI extends SessionData {\r\n  fileName?: string;\r\n  fileSize?: number;\r\n  uploadedAt: string;\r\n  riskLevel?: string;\r\n  depressionScore?: string;\r\n  anxietyScore?: string;\r\n}\r\n\r\n// Filter and sort types\r\ninterface SessionFilters {\r\n  search: string;\r\n  status: string | 'all';\r\n  dateRange: 'all' | 'today' | 'week' | 'month' | 'year';\r\n  sortBy: 'date' | 'status' | 'depressionScore' | 'anxietyScore';\r\n  sortOrder: 'asc' | 'desc';\r\n}\r\n\r\n// Status color mapping for accessibility\r\nconst statusConfig = {\r\n  queued: { color: 'yellow', icon: Clock, label: 'Queued' },\r\n  running: { color: 'blue', icon: RefreshCw, label: 'Processing' },\r\n  processing: { color: 'blue', icon: RefreshCw, label: 'Processing' },\r\n  succeeded: { color: 'green', icon: CheckCircle, label: 'Completed' },\r\n  success: { color: 'green', icon: CheckCircle, label: 'Completed' },\r\n  failed: { color: 'red', icon: XCircle, label: 'Failed' },\r\n} as const;\r\n\r\n// Utility function to format score categories\r\nconst formatScoreCategory = (category?: string): string => {\r\n  if (!category) return '‚Äî';\r\n  return category\r\n    .replace(/_/g, ' ')\r\n    .replace(/\\b\\w/g, (l: string) => l.toUpperCase());\r\n};\r\n\r\n// Utility function to get severity level for sorting\r\nconst getSeverityLevel = (category?: string): number => {\r\n  if (!category) return 0;\r\n  switch (category.toLowerCase()) {\r\n    // Depression categories: no_to_mild, mild_to_moderate, moderate_to_severe\r\n    case 'no_to_mild':\r\n      return 1;\r\n    case 'mild_to_moderate':\r\n      return 2;\r\n    case 'moderate_to_severe':\r\n      return 3;\r\n    // Anxiety categories: no_or_minimal, moderate, moderately_severe, severe\r\n    case 'no_or_minimal':\r\n      return 1;\r\n    case 'moderate':\r\n      return 2;\r\n    case 'moderately_severe':\r\n      return 3;\r\n    case 'severe':\r\n      return 4;\r\n    default:\r\n      return 0;\r\n  }\r\n};\r\n\r\nconst Sessions: React.FC = () => {\r\n  const [sessions, setSessions] = useState<SessionWithUI[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<AppError | null>(null);\r\n  const [selectedSessions, setSelectedSessions] = useState<Set<string>>(new Set());\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [filters, setFilters] = useState<SessionFilters>({\r\n    search: '',\r\n    status: 'all',\r\n    dateRange: 'all',\r\n    sortBy: 'date',\r\n    sortOrder: 'desc',\r\n  });\r\n\r\n  const { announceToScreenReader } = useAccessibility();\r\n\r\n  // Load sessions from API\r\n  const loadSessions = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const userId = getUserId();\r\n      const response = await apiService.getUserSessions(userId);\r\n      \r\n      // Transform session data to include computed UI fields\r\n      const transformedSessions: SessionWithUI[] = response.sessions.map(session => {\r\n        // Handle both camelCase and snake_case property names from API\r\n        const prediction = session.prediction as any;\r\n        \r\n        return {\r\n          ...session,\r\n          uploadedAt: session.createdAt,\r\n          fileName: session.audioFileName || `Audio_${session.sessionId.slice(-8)}.wav`,\r\n          fileSize: Math.floor(Math.random() * 5000000) + 1000000, // Mock file size for now\r\n          riskLevel: session.analysisResults?.riskLevel || 'unknown',\r\n          depressionScore: prediction?.predicted_score_depression || \r\n                          prediction?.predictedScoreDepression ||\r\n                          undefined,\r\n          anxietyScore: prediction?.predicted_score_anxiety || \r\n                       prediction?.predictedScoreAnxiety ||\r\n                       undefined,\r\n        };\r\n      });\r\n\r\n      setSessions(transformedSessions);\r\n      announceToScreenReader(`${transformedSessions.length} sessions loaded successfully`);\r\n    } catch (err) {\r\n      const appError = err as AppError;\r\n      setError(appError);\r\n      announceToScreenReader(`Error loading sessions: ${appError.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [announceToScreenReader]);\r\n\r\n  // Load sessions on component mount\r\n  useEffect(() => {\r\n    loadSessions();\r\n  }, [loadSessions]);\r\n\r\n  // Filter and sort sessions\r\n  const filteredAndSortedSessions = useMemo(() => {\r\n    let filtered = sessions;\r\n\r\n    // Search filter\r\n    if (filters.search) {\r\n      const searchLower = filters.search.toLowerCase();\r\n      filtered = filtered.filter(session => \r\n        session.sessionId.toLowerCase().includes(searchLower) ||\r\n        session.fileName?.toLowerCase().includes(searchLower) ||\r\n        statusConfig[session.status as keyof typeof statusConfig]?.label.toLowerCase().includes(searchLower)\r\n      );\r\n    }\r\n\r\n    // Status filter\r\n    if (filters.status !== 'all') {\r\n      filtered = filtered.filter(session => session.status === filters.status);\r\n    }\r\n\r\n    // Date range filter\r\n    if (filters.dateRange !== 'all') {\r\n      const now = new Date();\r\n      const startDate = new Date();\r\n      \r\n      switch (filters.dateRange) {\r\n        case 'today':\r\n          startDate.setHours(0, 0, 0, 0);\r\n          break;\r\n        case 'week':\r\n          startDate.setDate(now.getDate() - 7);\r\n          break;\r\n        case 'month':\r\n          startDate.setMonth(now.getMonth() - 1);\r\n          break;\r\n        case 'year':\r\n          startDate.setFullYear(now.getFullYear() - 1);\r\n          break;\r\n      }\r\n      \r\n      filtered = filtered.filter(session => \r\n        new Date(session.uploadedAt) >= startDate\r\n      );\r\n    }\r\n\r\n    // Sort\r\n    filtered.sort((a, b) => {\r\n      let comparison = 0;\r\n      \r\n      switch (filters.sortBy) {\r\n        case 'date':\r\n          comparison = new Date(a.uploadedAt).getTime() - new Date(b.uploadedAt).getTime();\r\n          break;\r\n        case 'status':\r\n          comparison = a.status.localeCompare(b.status);\r\n          break;\r\n        case 'depressionScore':\r\n          const depressionA = getSeverityLevel(a.depressionScore);\r\n          const depressionB = getSeverityLevel(b.depressionScore);\r\n          comparison = depressionA - depressionB;\r\n          break;\r\n        case 'anxietyScore':\r\n          const anxietyA = getSeverityLevel(a.anxietyScore);\r\n          const anxietyB = getSeverityLevel(b.anxietyScore);\r\n          comparison = anxietyA - anxietyB;\r\n          break;\r\n      }\r\n      \r\n      return filters.sortOrder === 'desc' ? -comparison : comparison;\r\n    });\r\n\r\n    return filtered;\r\n  }, [sessions, filters]);\r\n\r\n  // Handle filter changes\r\n  const updateFilter = useCallback((key: keyof SessionFilters, value: any) => {\r\n    setFilters(prev => ({ ...prev, [key]: value }));\r\n    announceToScreenReader(`Filter ${key} changed to ${value}`);\r\n  }, [announceToScreenReader]);\r\n\r\n  // Handle session selection\r\n  const toggleSessionSelection = useCallback((sessionId: string) => {\r\n    setSelectedSessions(prev => {\r\n      const newSelection = new Set(prev);\r\n      if (newSelection.has(sessionId)) {\r\n        newSelection.delete(sessionId);\r\n        announceToScreenReader('Session deselected');\r\n      } else {\r\n        newSelection.add(sessionId);\r\n        announceToScreenReader('Session selected');\r\n      }\r\n      return newSelection;\r\n    });\r\n  }, [announceToScreenReader]);\r\n\r\n  // Handle select all\r\n  const toggleSelectAll = useCallback(() => {\r\n    const allSelected = selectedSessions.size === filteredAndSortedSessions.length;\r\n    if (allSelected) {\r\n      setSelectedSessions(new Set());\r\n      announceToScreenReader('All sessions deselected');\r\n    } else {\r\n      setSelectedSessions(new Set(filteredAndSortedSessions.map(s => s.sessionId)));\r\n      announceToScreenReader(`All ${filteredAndSortedSessions.length} sessions selected`);\r\n    }\r\n  }, [selectedSessions.size, filteredAndSortedSessions, announceToScreenReader]);\r\n\r\n  // Handle bulk actions\r\n  const handleBulkDelete = useCallback(async () => {\r\n    if (selectedSessions.size === 0) return;\r\n    \r\n    const confirmed = window.confirm(`Are you sure you want to delete ${selectedSessions.size} session(s)?`);\r\n    if (!confirmed) return;\r\n\r\n    // For now, just remove from local state (would call API in real implementation)\r\n    setSessions(prev => prev.filter(session => !selectedSessions.has(session.sessionId)));\r\n    setSelectedSessions(new Set());\r\n    announceToScreenReader(`${selectedSessions.size} sessions deleted`);\r\n  }, [selectedSessions, announceToScreenReader]);\r\n\r\n  // Format file size\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes === 0) return '0 B';\r\n    const k = 1024;\r\n    const sizes = ['B', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(1))} ${sizes[i]}`;\r\n  };\r\n\r\n  // Get status badge component\r\n  const StatusBadge: React.FC<{ status: string }> = ({ status }) => {\r\n    const config = statusConfig[status as keyof typeof statusConfig] || statusConfig.failed;\r\n    const Icon = config.icon;\r\n    \r\n    return (\r\n      <span\r\n        className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n          config.color === 'green' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' :\r\n          config.color === 'blue' ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200' :\r\n          config.color === 'yellow' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200' :\r\n          'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\r\n        }`}\r\n        role=\"status\"\r\n        aria-label={`Status: ${config.label}`}\r\n      >\r\n        <Icon className=\"w-3 h-3 mr-1\" aria-hidden=\"true\" />\r\n        {config.label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        <div className=\"flex items-center justify-center py-16\">\r\n          <RefreshCw className=\"w-8 h-8 text-blue-600 animate-spin mr-3\" aria-hidden=\"true\" />\r\n          <span className=\"text-lg text-gray-900 dark:text-white\">Loading sessions...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6\">\r\n          <div className=\"flex items-center\">\r\n            <AlertCircle className=\"w-5 h-5 text-red-500 mr-3\" aria-hidden=\"true\" />\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-red-900 dark:text-red-200\">\r\n                Error Loading Sessions\r\n              </h3>\r\n              <p className=\"text-red-700 dark:text-red-300 mt-1\">{error.message}</p>\r\n              <button type=\"button\"\r\n                onClick={loadSessions}\r\n                className=\"mt-4 btn btn--primary\"\r\n                aria-label=\"Retry loading sessions\"\r\n              >\r\n                Try Again\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\r\n            Analysis Sessions\r\n          </h1>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mt-1\">\r\n            View and manage your audio analysis sessions\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-3\">\r\n          <button type=\"button\"\r\n            onClick={loadSessions}\r\n            disabled={loading}\r\n            className=\"btn btn--secondary\"\r\n            aria-label=\"Refresh sessions list\"\r\n          >\r\n            <RefreshCw className={`w-4 h-4 mr-2 ${loading ? 'animate-spin' : ''}`} aria-hidden=\"true\" />\r\n            Refresh\r\n          </button>\r\n          \r\n          <Link\r\n            to=\"/upload\"\r\n            className=\"btn btn--primary\"\r\n            aria-label=\"Start new analysis session\"\r\n          >\r\n            New Analysis\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters and Search */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n        <div className=\"flex flex-col lg:flex-row lg:items-center gap-4\">\r\n          {/* Search */}\r\n          <div className=\"flex-1 min-w-0\">\r\n            <label htmlFor=\"search-sessions\" className=\"sr-only\">\r\n              Search sessions\r\n            </label>\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" aria-hidden=\"true\" />\r\n              <input\r\n                id=\"search-sessions\"\r\n                type=\"text\"\r\n                placeholder=\"Search by session ID, filename, or status...\"\r\n                value={filters.search}\r\n                onChange={(e) => updateFilter('search', e.target.value)}\r\n                className=\"form__input w-full pl-10 pr-4 py-2\"\r\n                aria-describedby=\"search-help\"\r\n              />\r\n            </div>\r\n            <p id=\"search-help\" className=\"sr-only\">\r\n              Search through your analysis sessions by ID, filename, or status\r\n            </p>\r\n          </div>\r\n\r\n          {/* Filter Toggle */}\r\n          <button type=\"button\"\r\n            onClick={() => setShowFilters(!showFilters)}\r\n            className=\"btn btn--secondary flex items-center\"\r\n            aria-expanded={showFilters ? 'true' : 'false'}\r\n            aria-controls=\"filter-panel\"\r\n            aria-label={`${showFilters ? 'Hide' : 'Show'} filter options`}\r\n          >\r\n            <Filter className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n            Filters\r\n            {showFilters ? <ChevronUp className=\"w-4 h-4 ml-2\" aria-hidden=\"true\" /> : <ChevronDown className=\"w-4 h-4 ml-2\" aria-hidden=\"true\" />}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Expanded Filters */}\r\n        {showFilters && (\r\n          <div id=\"filter-panel\" className=\"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            {/* Status Filter */}\r\n            <div>\r\n              <label htmlFor=\"status-filter\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Status\r\n              </label>\r\n              <select\r\n                id=\"status-filter\"\r\n                value={filters.status}\r\n                onChange={(e) => updateFilter('status', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Statuses</option>\r\n                <option value=\"queued\">Queued</option>\r\n                <option value=\"processing\">Processing</option>\r\n                <option value=\"running\">Running</option>\r\n                <option value=\"succeeded\">Completed</option>\r\n                <option value=\"success\">Success</option>\r\n                <option value=\"failed\">Failed</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Date Range Filter */}\r\n            <div>\r\n              <label htmlFor=\"date-filter\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Date Range\r\n              </label>\r\n              <select\r\n                id=\"date-filter\"\r\n                value={filters.dateRange}\r\n                onChange={(e) => updateFilter('dateRange', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Time</option>\r\n                <option value=\"today\">Today</option>\r\n                <option value=\"week\">Past Week</option>\r\n                <option value=\"month\">Past Month</option>\r\n                <option value=\"year\">Past Year</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Sort By */}\r\n            <div>\r\n              <label htmlFor=\"sort-by\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Sort By\r\n              </label>\r\n              <select\r\n                id=\"sort-by\"\r\n                value={filters.sortBy}\r\n                onChange={(e) => updateFilter('sortBy', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"date\">Date</option>\r\n                <option value=\"status\">Status</option>\r\n                <option value=\"depressionScore\">Depression Score</option>\r\n                <option value=\"anxietyScore\">Anxiety Score</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Sort Order */}\r\n            <div>\r\n              <label htmlFor=\"sort-order\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Sort Order\r\n              </label>\r\n              <select\r\n                id=\"sort-order\"\r\n                value={filters.sortOrder}\r\n                onChange={(e) => updateFilter('sortOrder', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"desc\">Newest First</option>\r\n                <option value=\"asc\">Oldest First</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Results Summary and Bulk Actions */}\r\n      {filteredAndSortedSessions.length > 0 && (\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <p className=\"text-sm text-gray-600 dark:text-gray-300\">\r\n              {filteredAndSortedSessions.length} of {sessions.length} sessions\r\n              {selectedSessions.size > 0 && ` ‚Ä¢ ${selectedSessions.size} selected`}\r\n            </p>\r\n          </div>\r\n          \r\n          {selectedSessions.size > 0 && (\r\n            <div className=\"flex items-center gap-2\">\r\n              <button type=\"button\"\r\n                onClick={handleBulkDelete}\r\n                className=\"btn btn--danger\"\r\n                aria-label={`Delete ${selectedSessions.size} selected sessions`}\r\n              >\r\n                <Trash2 className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n                Delete Selected\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Sessions Table */}\r\n      {filteredAndSortedSessions.length > 0 ? (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden\">\r\n          {/* Desktop Table */}\r\n          <div className=\"hidden md:block overflow-x-auto\">\r\n            <table className=\"w-full\" role=\"table\" aria-label=\"Analysis sessions\">\r\n              <thead className=\"bg-gray-50 dark:bg-gray-700\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedSessions.size === filteredAndSortedSessions.length}\r\n                      onChange={toggleSelectAll}\r\n                      className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                      aria-label=\"Select all sessions\"\r\n                    />\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Session\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Status\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Depression Score\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Anxiety Score\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Date\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Actions\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200 dark:divide-gray-600\">\r\n                {filteredAndSortedSessions.map((session) => (\r\n                  <tr\r\n                    key={session.sessionId}\r\n                    className=\"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\"\r\n                  >\r\n                    <td className=\"px-6 py-4\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedSessions.has(session.sessionId)}\r\n                        onChange={() => toggleSessionSelection(session.sessionId)}\r\n                        className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                        aria-label={`Select session ${session.sessionId}`}\r\n                      />\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div>\r\n                        <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                          {session.fileName}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          ID: {session.sessionId.slice(-12)}\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-400 dark:text-gray-500\">\r\n                          {formatFileSize(session.fileSize || 0)}\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <StatusBadge status={session.status} />\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"text-sm\">\r\n                        {session.depressionScore ? (\r\n                          <span className=\"text-gray-900 dark:text-white font-medium\">\r\n                            {formatScoreCategory(session.depressionScore)}\r\n                          </span>\r\n                        ) : (\r\n                          <span className=\"text-gray-400 dark:text-gray-500\">‚Äî</span>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"text-sm\">\r\n                        {session.anxietyScore ? (\r\n                          <span className=\"text-gray-900 dark:text-white font-medium\">\r\n                            {formatScoreCategory(session.anxietyScore)}\r\n                          </span>\r\n                        ) : (\r\n                          <span className=\"text-gray-400 dark:text-gray-500\">‚Äî</span>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"text-sm text-gray-900 dark:text-white\">\r\n                        {formatRelativeTime(session.uploadedAt)}\r\n                      </div>\r\n                      <div className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                        {formatDateTime(session.uploadedAt)}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-right\">\r\n                      <div className=\"flex items-center justify-end gap-2\">\r\n                        <Link\r\n                          to={`/sessions/${session.sessionId}`}\r\n                          className=\"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300\"\r\n                          aria-label={`View details for session ${session.sessionId}`}\r\n                        >\r\n                          <Eye className=\"w-4 h-4\" aria-hidden=\"true\" />\r\n                        </Link>\r\n                        {session.status === 'succeeded' && (\r\n                          <button type=\"button\"\r\n                            className=\"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300\"\r\n                            aria-label={`Download results for session ${session.sessionId}`}\r\n                          >\r\n                            <Download className=\"w-4 h-4\" aria-hidden=\"true\" />\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          {/* Mobile Cards */}\r\n          <div className=\"md:hidden space-y-4 p-4\">\r\n            {filteredAndSortedSessions.map((session) => (\r\n              <div\r\n                key={session.sessionId}\r\n                className=\"border border-gray-200 dark:border-gray-600 rounded-lg p-4 space-y-3\"\r\n              >\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex items-start space-x-3\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedSessions.has(session.sessionId)}\r\n                      onChange={() => toggleSessionSelection(session.sessionId)}\r\n                      className=\"mt-1 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                      aria-label={`Select session ${session.sessionId}`}\r\n                    />\r\n                    <div>\r\n                      <h3 className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                        {session.fileName}\r\n                      </h3>\r\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                        ID: {session.sessionId.slice(-12)}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <StatusBadge status={session.status} />\r\n                </div>\r\n\r\n                {(session.depressionScore || session.anxietyScore) && (\r\n                  <div className=\"text-sm\">\r\n                    {session.depressionScore && (\r\n                      <div>Depression: {formatScoreCategory(session.depressionScore)}</div>\r\n                    )}\r\n                    {session.anxietyScore && (\r\n                      <div>Anxiety: {formatScoreCategory(session.anxietyScore)}</div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400\">\r\n                  <span>{formatRelativeTime(session.uploadedAt)}</span>\r\n                  <span>{formatFileSize(session.fileSize || 0)}</span>\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-end gap-2 pt-2 border-t border-gray-200 dark:border-gray-600\">\r\n                  <Link\r\n                    to={`/sessions/${session.sessionId}`}\r\n                    className=\"btn btn--secondary text-xs\"\r\n                    aria-label={`View details for session ${session.sessionId}`}\r\n                  >\r\n                    <Eye className=\"w-4 h-4 mr-1\" aria-hidden=\"true\" />\r\n                    View\r\n                  </Link>\r\n                  {session.status === 'succeeded' && (\r\n                    <button type=\"button\"\r\n                      className=\"btn btn--secondary text-xs\"\r\n                      aria-label={`Download results for session ${session.sessionId}`}\r\n                    >\r\n                      <Download className=\"w-4 h-4 mr-1\" aria-hidden=\"true\" />\r\n                      Download\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-16 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n          <AlertCircle className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" aria-hidden=\"true\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\r\n            No sessions found\r\n          </h3>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\r\n            {sessions.length === 0 \r\n              ? \"You haven't created any analysis sessions yet.\"\r\n              : \"No sessions match your current filters.\"\r\n            }\r\n          </p>\r\n          {sessions.length === 0 ? (\r\n            <Link to=\"/upload\" className=\"btn btn--primary\">\r\n              Start Your First Analysis\r\n            </Link>\r\n          ) : (\r\n            <button type=\"button\"\r\n              onClick={() => setFilters({\r\n                search: '',\r\n                status: 'all',\r\n                dateRange: 'all',\r\n                sortBy: 'date',\r\n                sortOrder: 'desc',\r\n              })}\r\n              className=\"btn btn--secondary\"\r\n            >\r\n              Clear Filters\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sessions;\r\n","import React, { useState, useCallback } from 'react';\r\nimport { \r\n  Brain, \r\n  AlertTriangle, \r\n  CheckCircle, \r\n  RefreshCw, \r\n  Clock, \r\n  TrendingUp,\r\n  Lightbulb,\r\n  ShieldAlert,\r\n  FileText,\r\n  Target,\r\n  Calendar\r\n} from 'lucide-react';\r\nimport { apiService } from '../services/api';\r\nimport { useAccessibility } from '../hooks/useAccessibility';\r\nimport { formatDateTime } from '../utils';\r\nimport type { RiskAssessment, AppError } from '../types';\r\n\r\ninterface RiskAssessmentProps {\r\n  sessionId: string;\r\n  existingAssessment?: RiskAssessment | null;\r\n  onAssessmentUpdated?: (assessment: RiskAssessment) => void;\r\n}\r\n\r\n// Risk level configuration\r\nconst riskLevelConfig = {\r\n  low: { \r\n    color: 'green', \r\n    label: 'Low Risk',\r\n    icon: CheckCircle,\r\n    description: 'Low likelihood of immediate concerns'\r\n  },\r\n  moderate: { \r\n    color: 'yellow', \r\n    label: 'Moderate Risk',\r\n    icon: AlertTriangle,\r\n    description: 'Some concerns that warrant attention'\r\n  },\r\n  high: { \r\n    color: 'red', \r\n    label: 'High Risk',\r\n    icon: ShieldAlert,\r\n    description: 'Significant concerns requiring immediate attention'\r\n  },\r\n  critical: { \r\n    color: 'red', \r\n    label: 'Critical Risk',\r\n    icon: ShieldAlert,\r\n    description: 'Urgent intervention required'\r\n  },\r\n} as const;\r\n\r\nconst RiskAssessmentComponent: React.FC<RiskAssessmentProps> = ({\r\n  sessionId,\r\n  existingAssessment,\r\n  onAssessmentUpdated\r\n}) => {\r\n  const { announceToScreenReader } = useAccessibility();\r\n  const [assessment, setAssessment] = useState<RiskAssessment | null>(existingAssessment || null);\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<AppError | null>(null);\r\n\r\n  // Generate new risk assessment\r\n  const generateAssessment = useCallback(async () => {\r\n    try {\r\n      setIsGenerating(true);\r\n      setError(null);\r\n      announceToScreenReader('Generating AI risk assessment...');\r\n\r\n      const response = await apiService.generateRiskAssessment(sessionId);\r\n      \r\n      if (response.success && response.riskAssessment) {\r\n        setAssessment(response.riskAssessment);\r\n        onAssessmentUpdated?.(response.riskAssessment);\r\n        announceToScreenReader('Risk assessment generated successfully');\r\n      } else {\r\n        throw new Error(response.message || 'Failed to generate risk assessment');\r\n      }\r\n    } catch (err) {\r\n      const appError = err as AppError;\r\n      setError(appError);\r\n      announceToScreenReader(`Error generating assessment: ${appError.message}`);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  }, [sessionId, onAssessmentUpdated, announceToScreenReader]);\r\n\r\n  // Load existing assessment\r\n  const loadAssessment = useCallback(async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const response = await apiService.getRiskAssessment(sessionId);\r\n      \r\n      if (response.success && response.riskAssessment) {\r\n        setAssessment(response.riskAssessment);\r\n        onAssessmentUpdated?.(response.riskAssessment);\r\n      }\r\n    } catch (err) {\r\n      const appError = err as AppError;\r\n      setError(appError);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [sessionId, onAssessmentUpdated]);\r\n\r\n  // Risk level badge component\r\n  const RiskLevelBadge: React.FC<{ riskLevel: string; riskScore?: number }> = ({ riskLevel, riskScore }) => {\r\n    const config = riskLevelConfig[riskLevel.toLowerCase() as keyof typeof riskLevelConfig];\r\n    if (!config) return null;\r\n\r\n    const Icon = config.icon;\r\n    \r\n    return (\r\n      <div className=\"flex items-center space-x-2\">\r\n        <span\r\n          className={`inline-flex items-center px-3 py-2 rounded-full text-sm font-medium ${\r\n            config.color === 'green' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' :\r\n            config.color === 'yellow' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200' :\r\n            'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\r\n          }`}\r\n          role=\"status\"\r\n          aria-label={`Risk level: ${config.label}`}\r\n        >\r\n          <Icon className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n          {config.label}\r\n          {riskScore && (\r\n            <span className=\"ml-2 px-2 py-0.5 bg-white dark:bg-gray-800 rounded text-xs font-bold\">\r\n              {riskScore}/10\r\n            </span>\r\n          )}\r\n        </span>\r\n        <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          {config.description}\r\n        </span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // If no assessment exists and not generating, show generate button\r\n  if (!assessment && !isGenerating && !isLoading) {\r\n    return (\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n          <Brain className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n          AI Risk Assessment\r\n        </h2>\r\n        \r\n        <div className=\"text-center py-8\">\r\n          <Brain className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" aria-hidden=\"true\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\r\n            No Risk Assessment Available\r\n          </h3>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\r\n            Generate an AI-powered risk assessment based on session data and clinical insights.\r\n          </p>\r\n          \r\n          <div className=\"space-y-3\">\r\n            <button type=\"button\"\r\n              onClick={generateAssessment}\r\n              className=\"btn btn--primary\"\r\n              aria-label=\"Generate AI risk assessment\"\r\n            >\r\n              <Brain className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n              Generate AI Risk Assessment\r\n            </button>\r\n            \r\n            <button type=\"button\"\r\n              onClick={loadAssessment}\r\n              className=\"btn btn--secondary\"\r\n              aria-label=\"Check for existing assessment\"\r\n            >\r\n              <RefreshCw className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n              Check for Existing Assessment\r\n            </button>\r\n          </div>\r\n          \r\n          {error && (\r\n            <div className=\"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\r\n              <p className=\"text-red-700 dark:text-red-300 text-sm\">\r\n                {error.message}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Loading state\r\n  if (isGenerating || isLoading) {\r\n    return (\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n          <Brain className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n          AI Risk Assessment\r\n        </h2>\r\n        \r\n        <div className=\"flex items-center justify-center py-16\">\r\n          <RefreshCw className=\"w-8 h-8 text-blue-600 animate-spin mr-3\" aria-hidden=\"true\" />\r\n          <span className=\"text-lg text-gray-900 dark:text-white\">\r\n            {isGenerating ? 'Generating AI risk assessment...' : 'Loading assessment...'}\r\n          </span>\r\n        </div>\r\n        \r\n        {isGenerating && (\r\n          <div className=\"mt-4 text-center\">\r\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n              This may take a few moments as AI analyzes the session data...\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Display assessment\r\n  if (!assessment) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white flex items-center\">\r\n          <Brain className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n          AI Risk Assessment\r\n        </h2>\r\n        \r\n        <div className=\"flex items-center space-x-3 mt-4 sm:mt-0\">\r\n          {assessment.confidenceLevel && (\r\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n              Confidence: {(assessment.confidenceLevel * 100).toFixed(0)}%\r\n            </span>\r\n          )}\r\n          \r\n          <button type=\"button\"\r\n            onClick={generateAssessment}\r\n            disabled={isGenerating}\r\n            className=\"btn btn--secondary text-xs\"\r\n            aria-label=\"Regenerate risk assessment\"\r\n          >\r\n            <RefreshCw className={`w-3 h-3 mr-1 ${isGenerating ? 'animate-spin' : ''}`} aria-hidden=\"true\" />\r\n            Regenerate\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-6\">\r\n        {/* Risk Level and Score */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n          <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg\">\r\n            <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n              Overall Risk Level\r\n            </h3>\r\n            <RiskLevelBadge riskLevel={assessment.overallRiskLevel} riskScore={assessment.riskScore} />\r\n          </div>\r\n          \r\n          {assessment.generatedAt && (\r\n            <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg\">\r\n              <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center\">\r\n                <Calendar className=\"w-4 h-4 mr-1\" aria-hidden=\"true\" />\r\n                Generated\r\n              </h3>\r\n              <div className=\"text-sm text-gray-900 dark:text-white\">\r\n                {formatDateTime(assessment.generatedAt)}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Summary */}\r\n        {assessment.summary && (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center\">\r\n              <FileText className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n              Summary\r\n            </h3>\r\n            <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800\">\r\n              <p className=\"text-blue-900 dark:text-blue-100 text-sm leading-relaxed\">\r\n                {assessment.summary}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Key Risk Factors */}\r\n        {assessment.keyFactors && assessment.keyFactors.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center\">\r\n              <AlertTriangle className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n              Key Risk Factors\r\n            </h3>\r\n            <div className=\"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800\">\r\n              <ul className=\"space-y-2\">\r\n                {assessment.keyFactors.map((factor: string, index: number) => (\r\n                  <li key={index} className=\"text-yellow-900 dark:text-yellow-100 text-sm flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-yellow-600 dark:bg-yellow-400 rounded-full mt-2 mr-3 flex-shrink-0\" aria-hidden=\"true\"></span>\r\n                    {factor}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Recommendations */}\r\n        {assessment.recommendations && assessment.recommendations.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center\">\r\n              <Lightbulb className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n              Recommendations\r\n            </h3>\r\n            <div className=\"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800\">\r\n              <ul className=\"space-y-2\">\r\n                {assessment.recommendations.map((recommendation: string, index: number) => (\r\n                  <li key={index} className=\"text-green-900 dark:text-green-100 text-sm flex items-start\">\r\n                    <CheckCircle className=\"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 mr-3 flex-shrink-0\" aria-hidden=\"true\" />\r\n                    {recommendation}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Immediate Actions */}\r\n        {assessment.immediateActions && assessment.immediateActions.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center\">\r\n              <Target className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n              Immediate Actions Required\r\n            </h3>\r\n            <div className=\"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800\">\r\n              <ul className=\"space-y-2\">\r\n                {assessment.immediateActions.map((action: string, index: number) => (\r\n                  <li key={index} className=\"text-red-900 dark:text-red-100 text-sm flex items-start\">\r\n                    <ShieldAlert className=\"w-4 h-4 text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0\" aria-hidden=\"true\" />\r\n                    {action}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Follow-up Recommendations */}\r\n        {assessment.followUpRecommendations && assessment.followUpRecommendations.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center\">\r\n              <TrendingUp className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n              Follow-up Recommendations\r\n            </h3>\r\n            <div className=\"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800\">\r\n              <ul className=\"space-y-2\">\r\n                {assessment.followUpRecommendations.map((followUp: string, index: number) => (\r\n                  <li key={index} className=\"text-purple-900 dark:text-purple-100 text-sm flex items-start\">\r\n                    <Clock className=\"w-4 h-4 text-purple-600 dark:text-purple-400 mt-0.5 mr-3 flex-shrink-0\" aria-hidden=\"true\" />\r\n                    {followUp}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Last Updated */}\r\n        <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n          <div className=\"flex items-center text-xs text-gray-500 dark:text-gray-400\">\r\n            <Clock className=\"w-3 h-3 mr-1\" aria-hidden=\"true\" />\r\n            Generated: {formatDateTime(assessment.generatedAt)}\r\n            {assessment.modelVersion && (\r\n              <span className=\"ml-4\">Model: {assessment.modelVersion}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {error && (\r\n        <div className=\"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\r\n          <p className=\"text-red-700 dark:text-red-300 text-sm\">\r\n            {error.message}\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RiskAssessmentComponent;\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom';\r\nimport { \r\n  ArrowLeft, \r\n  RefreshCw, \r\n  Download, \r\n  AlertCircle, \r\n  CheckCircle, \r\n  Clock, \r\n  XCircle,\r\n  Eye,\r\n  EyeOff,\r\n  Play,\r\n  Pause,\r\n  Calendar,\r\n  User,\r\n  FileAudio,\r\n  Activity,\r\n  TrendingUp,\r\n  Brain,\r\n  Heart,\r\n  Info\r\n} from 'lucide-react';\r\nimport { useAccessibility } from '../hooks/useAccessibility';\r\nimport { apiService } from '../services/api';\r\nimport { formatDateTime, formatRelativeTime } from '../utils';\r\nimport RiskAssessmentComponent from '../components/RiskAssessment';\r\nimport type { SessionData, AppError } from '../types';\r\n\r\n// Status configuration for consistent styling\r\nconst statusConfig = {\r\n  queued: { color: 'yellow', icon: Clock, label: 'Queued', description: 'Waiting to be processed' },\r\n  initiated: { color: 'blue', icon: Clock, label: 'Initiated', description: 'Session has been created' },\r\n  running: { color: 'blue', icon: RefreshCw, label: 'Processing', description: 'Audio is being analyzed' },\r\n  processing: { color: 'blue', icon: RefreshCw, label: 'Processing', description: 'Analysis in progress' },\r\n  succeeded: { color: 'green', icon: CheckCircle, label: 'Completed', description: 'Analysis completed successfully' },\r\n  success: { color: 'green', icon: CheckCircle, label: 'Completed', description: 'Analysis completed successfully' },\r\n  failed: { color: 'red', icon: XCircle, label: 'Failed', description: 'Analysis encountered an error' },\r\n} as const;\r\n\r\nconst SessionDetail: React.FC = () => {\r\n  const { sessionId } = useParams<{ sessionId: string }>();\r\n  const navigate = useNavigate();\r\n  const { announceToScreenReader } = useAccessibility();\r\n\r\n  const [session, setSession] = useState<SessionData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<AppError | null>(null);\r\n  const [showRawJson, setShowRawJson] = useState(false);\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [audioPlaying, setAudioPlaying] = useState(false);\r\n  const audioRef = useRef<HTMLAudioElement>(null);\r\n\r\n  // Load session data\r\n  const loadSession = useCallback(async () => {\r\n    if (!sessionId) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const sessionData = await apiService.getSessionData(sessionId);\r\n      setSession(sessionData);\r\n      announceToScreenReader(`Session ${sessionId} loaded successfully`);\r\n    } catch (err) {\r\n      const appError = err as AppError;\r\n      setError(appError);\r\n      announceToScreenReader(`Error loading session: ${appError.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [sessionId, announceToScreenReader]);\r\n\r\n  // Refresh session data\r\n  const refreshSession = useCallback(async () => {\r\n    setIsRefreshing(true);\r\n    await loadSession();\r\n    setIsRefreshing(false);\r\n    announceToScreenReader('Session data refreshed');\r\n  }, [loadSession, announceToScreenReader]);\r\n\r\n  // Load session on component mount\r\n  useEffect(() => {\r\n    loadSession();\r\n  }, [loadSession]);\r\n\r\n  // Handle JSON view toggle\r\n  const toggleRawJson = useCallback(() => {\r\n    setShowRawJson(prev => {\r\n      const newState = !prev;\r\n      announceToScreenReader(`Raw JSON view ${newState ? 'enabled' : 'disabled'}`);\r\n      return newState;\r\n    });\r\n  }, [announceToScreenReader]);\r\n\r\n  // Audio controls\r\n  const toggleAudioPlayback = useCallback(() => {\r\n    if (!audioRef.current) return;\r\n    \r\n    if (audioPlaying) {\r\n      audioRef.current.pause();\r\n      setAudioPlaying(false);\r\n      announceToScreenReader('Audio paused');\r\n    } else {\r\n      audioRef.current.play().catch(() => {\r\n        announceToScreenReader('Failed to play audio');\r\n      });\r\n      setAudioPlaying(true);\r\n      announceToScreenReader('Audio playing');\r\n    }\r\n  }, [audioPlaying, announceToScreenReader]);\r\n\r\n  // Download session data\r\n  const downloadSessionData = useCallback(() => {\r\n    if (!session) return;\r\n\r\n    const dataStr = JSON.stringify(session, null, 2);\r\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n    const url = URL.createObjectURL(dataBlob);\r\n    \r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `session-${session.sessionId}-${new Date().toISOString().split('T')[0]}.json`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n    \r\n    announceToScreenReader('Session data download started');\r\n  }, [session, announceToScreenReader]);\r\n\r\n  // Status badge component\r\n  const StatusBadge: React.FC<{ status: string }> = ({ status }) => {\r\n    const config = statusConfig[status as keyof typeof statusConfig] || statusConfig.failed;\r\n    const Icon = config.icon;\r\n    \r\n    return (\r\n      <div className=\"flex items-center space-x-2\">\r\n        <span\r\n          className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${\r\n            config.color === 'green' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' :\r\n            config.color === 'blue' ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200' :\r\n            config.color === 'yellow' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200' :\r\n            'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\r\n          }`}\r\n          role=\"status\"\r\n          aria-label={`Status: ${config.label}`}\r\n        >\r\n          <Icon className={`w-4 h-4 mr-2 ${config.color === 'blue' && status === 'processing' ? 'animate-spin' : ''}`} aria-hidden=\"true\" />\r\n          {config.label}\r\n        </span>\r\n        <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          {config.description}\r\n        </span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-6xl mx-auto p-6\">\r\n        <div className=\"flex items-center justify-center py-16\">\r\n          <RefreshCw className=\"w-8 h-8 text-blue-600 animate-spin mr-3\" aria-hidden=\"true\" />\r\n          <span className=\"text-lg text-gray-900 dark:text-white\">Loading session details...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"max-w-6xl mx-auto p-6\">\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6\">\r\n          <div className=\"flex items-center\">\r\n            <AlertCircle className=\"w-5 h-5 text-red-500 mr-3\" aria-hidden=\"true\" />\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-red-900 dark:text-red-200\">\r\n                Error Loading Session\r\n              </h3>\r\n              <p className=\"text-red-700 dark:text-red-300 mt-1\">{error.message}</p>\r\n              <div className=\"mt-4 space-x-3\">\r\n                <button type=\"button\"\r\n                  onClick={loadSession}\r\n                  className=\"btn btn--primary\"\r\n                  aria-label=\"Retry loading session\"\r\n                >\r\n                  Try Again\r\n                </button>\r\n                <Link to=\"/sessions\" className=\"btn btn--secondary\">\r\n                  Back to Sessions\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!session) {\r\n    return (\r\n      <div className=\"max-w-6xl mx-auto p-6\">\r\n        <div className=\"text-center py-16\">\r\n          <AlertCircle className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" aria-hidden=\"true\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\r\n            Session Not Found\r\n          </h3>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\r\n            The requested session could not be found.\r\n          </p>\r\n          <Link to=\"/sessions\" className=\"btn btn--primary\">\r\n            Back to Sessions\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <button type=\"button\"\r\n            onClick={() => navigate('/sessions')}\r\n            className=\"btn btn--secondary\"\r\n            aria-label=\"Back to sessions list\"\r\n          >\r\n            <ArrowLeft className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n            Back to Sessions\r\n          </button>\r\n          \r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\r\n              Session Details\r\n            </h1>\r\n            <p className=\"text-gray-600 dark:text-gray-300 mt-1\">\r\n              ID: {session.sessionId}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-3\">\r\n          <button type=\"button\"\r\n            onClick={toggleRawJson}\r\n            className=\"btn btn--secondary\"\r\n            aria-label={`${showRawJson ? 'Hide' : 'Show'} raw JSON data`}\r\n          >\r\n            {showRawJson ? <EyeOff className=\"w-4 h-4 mr-2\" /> : <Eye className=\"w-4 h-4 mr-2\" />}\r\n            {showRawJson ? 'Hide JSON' : 'Show JSON'}\r\n          </button>\r\n          \r\n          <button type=\"button\"\r\n            onClick={refreshSession}\r\n            disabled={isRefreshing}\r\n            className=\"btn btn--secondary\"\r\n            aria-label=\"Refresh session data\"\r\n          >\r\n            <RefreshCw className={`w-4 h-4 mr-2 ${isRefreshing ? 'animate-spin' : ''}`} aria-hidden=\"true\" />\r\n            Refresh\r\n          </button>\r\n          \r\n          <button type=\"button\"\r\n            onClick={downloadSessionData}\r\n            className=\"btn btn--primary\"\r\n            aria-label=\"Download session data as JSON\"\r\n          >\r\n            <Download className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n            Download\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Raw JSON View */}\r\n      {showRawJson && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n            <Info className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n            Raw Session Data\r\n          </h2>\r\n          <div className=\"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 overflow-auto\">\r\n            <pre className=\"text-sm text-gray-900 dark:text-gray-100 whitespace-pre-wrap break-all\">\r\n              {JSON.stringify(session, null, 2)}\r\n            </pre>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Session Overview */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Basic Information */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n            <Info className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n            Basic Information\r\n          </h2>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                Status\r\n              </label>\r\n              <StatusBadge status={session.status} />\r\n            </div>\r\n            \r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  <Calendar className=\"w-4 h-4 inline mr-1\" aria-hidden=\"true\" />\r\n                  Created\r\n                </label>\r\n                <div className=\"text-sm\">\r\n                  <div className=\"text-gray-900 dark:text-white\">\r\n                    {formatRelativeTime(session.createdAt)}\r\n                  </div>\r\n                  <div className=\"text-gray-500 dark:text-gray-400\">\r\n                    {formatDateTime(session.createdAt)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  <Clock className=\"w-4 h-4 inline mr-1\" aria-hidden=\"true\" />\r\n                  Last Updated\r\n                </label>\r\n                <div className=\"text-sm\">\r\n                  <div className=\"text-gray-900 dark:text-white\">\r\n                    {formatRelativeTime(session.updatedAt)}\r\n                  </div>\r\n                  <div className=\"text-gray-500 dark:text-gray-400\">\r\n                    {formatDateTime(session.updatedAt)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                <User className=\"w-4 h-4 inline mr-1\" aria-hidden=\"true\" />\r\n                User ID\r\n              </label>\r\n              <div className=\"font-mono text-sm bg-gray-100 dark:bg-gray-700 px-3 py-2 rounded border break-all\">\r\n                {session.userId}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Audio Information */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n            <FileAudio className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n            Audio Information\r\n          </h2>\r\n          \r\n          <div className=\"space-y-4\">\r\n            {session.audioFileName && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  File Name\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white font-medium\">\r\n                  {session.audioFileName}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.audioUrl && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Audio File\r\n                </label>\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <button type=\"button\"\r\n                    onClick={toggleAudioPlayback}\r\n                    className=\"btn btn--secondary\"\r\n                    aria-label={`${audioPlaying ? 'Pause' : 'Play'} audio`}\r\n                  >\r\n                    {audioPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\r\n                  </button>\r\n                  <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                    {audioPlaying ? 'Playing audio...' : 'Audio playback available'}\r\n                  </span>\r\n                </div>\r\n                <audio\r\n                  ref={audioRef}\r\n                  src={session.audioUrl}\r\n                  onPlay={() => setAudioPlaying(true)}\r\n                  onPause={() => setAudioPlaying(false)}\r\n                  onEnded={() => setAudioPlaying(false)}\r\n                  onError={() => {\r\n                    setAudioPlaying(false);\r\n                    announceToScreenReader('Audio playback failed - file may not be accessible');\r\n                  }}\r\n                  className=\"hidden\"\r\n                  preload=\"metadata\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* User Metadata */}\r\n      {session.userMetadata && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n            <User className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n            Patient Information\r\n          </h2>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {session.userMetadata.age && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Age\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white\">\r\n                  {session.userMetadata.age} years\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.gender && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Gender\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white capitalize\">\r\n                  {session.userMetadata.gender.replace(/[_-]/g, ' ')}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.weight && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Weight\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white\">\r\n                  {session.userMetadata.weight} lbs\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.race && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Race\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white capitalize\">\r\n                  {session.userMetadata.race}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.ethnicity && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Ethnicity\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white\">\r\n                  {session.userMetadata.ethnicity}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.zipcode && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  ZIP Code\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white font-mono\">\r\n                  {session.userMetadata.zipcode}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.language !== undefined && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Primary Language English\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white\">\r\n                  {session.userMetadata.language ? 'Yes' : 'No'}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {session.userMetadata.sessionNotes && (\r\n              <div className=\"md:col-span-2 lg:col-span-3\">\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Session Notes\r\n                </label>\r\n                <div className=\"text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded border\">\r\n                  {session.userMetadata.sessionNotes}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Analysis Results */}\r\n      {(session.analysisResults || session.prediction) && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n            <Activity className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n            Analysis Results\r\n          </h2>\r\n          \r\n          <div className=\"space-y-6\">\r\n            {/* Mental Health Scores */}\r\n            {(session.analysisResults || session.prediction) && (\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center\">\r\n                  <Brain className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n                  Mental Health Scores\r\n                </h3>\r\n                \r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                  {/* Depression Score */}\r\n                  {(session.analysisResults?.depressionScore || (session.prediction as any)?.predicted_score_depression) && (\r\n                    <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800\">\r\n                      <div className=\"flex items-center justify-between mb-2\">\r\n                        <span className=\"text-sm font-medium text-blue-700 dark:text-blue-300\">\r\n                          Depression Score\r\n                        </span>\r\n                        <TrendingUp className=\"w-4 h-4 text-blue-600 dark:text-blue-400\" aria-hidden=\"true\" />\r\n                      </div>\r\n                      <div className=\"text-2xl font-bold text-blue-900 dark:text-blue-100\">\r\n                        {session.analysisResults?.depressionScore?.toFixed(2) || \r\n                         ((session.prediction as any)?.predicted_score_depression ? \r\n                           (session.prediction as any).predicted_score_depression.replace(/_/g, ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase()) : \r\n                           'N/A')}\r\n                      </div>\r\n                      {session.analysisResults?.confidence && (\r\n                        <div className=\"text-xs text-blue-600 dark:text-blue-400 mt-1\">\r\n                          Confidence: {(session.analysisResults.confidence * 100).toFixed(1)}%\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {/* Anxiety Score */}\r\n                  {(session.analysisResults?.anxietyScore || (session.prediction as any)?.predicted_score_anxiety) && (\r\n                    <div className=\"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800\">\r\n                      <div className=\"flex items-center justify-between mb-2\">\r\n                        <span className=\"text-sm font-medium text-purple-700 dark:text-purple-300\">\r\n                          Anxiety Score\r\n                        </span>\r\n                        <Heart className=\"w-4 h-4 text-purple-600 dark:text-purple-400\" aria-hidden=\"true\" />\r\n                      </div>\r\n                      <div className=\"text-2xl font-bold text-purple-900 dark:text-purple-100\">\r\n                        {session.analysisResults?.anxietyScore?.toFixed(2) || \r\n                         ((session.prediction as any)?.predicted_score_anxiety ? \r\n                           (session.prediction as any).predicted_score_anxiety.replace(/_/g, ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase()) : \r\n                           'N/A')}\r\n                      </div>\r\n                      {session.analysisResults?.confidence && (\r\n                        <div className=\"text-xs text-purple-600 dark:text-purple-400 mt-1\">\r\n                          Confidence: {(session.analysisResults.confidence * 100).toFixed(1)}%\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {/* Note: Overall Score (predicted_score) is deprecated and no longer displayed */}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Clinical Insights */}\r\n            {session.analysisResults?.insights && session.analysisResults.insights.length > 0 && (\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3\">\r\n                  Clinical Insights\r\n                </h3>\r\n                <div className=\"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800\">\r\n                  <ul className=\"space-y-2\">\r\n                    {session.analysisResults.insights.map((insight, index) => (\r\n                      <li key={index} className=\"text-sm text-yellow-800 dark:text-yellow-200 flex items-start\">\r\n                        <span className=\"inline-block w-2 h-2 bg-yellow-600 dark:bg-yellow-400 rounded-full mt-2 mr-2 flex-shrink-0\" aria-hidden=\"true\"></span>\r\n                        {insight}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Completion Information */}\r\n            {session.analysisResults?.completedAt && (\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3\">\r\n                  Analysis Completion\r\n                </h3>\r\n                <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg\">\r\n                  <div className=\"flex items-center text-sm\">\r\n                    <CheckCircle className=\"w-4 h-4 text-green-600 dark:text-green-400 mr-2\" aria-hidden=\"true\" />\r\n                    <span className=\"text-gray-700 dark:text-gray-300 mr-2\">\r\n                      Completed:\r\n                    </span>\r\n                    <span className=\"text-gray-900 dark:text-white font-medium\">\r\n                      {formatDateTime(session.analysisResults.completedAt)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* AI Risk Assessment */}\r\n      <RiskAssessmentComponent \r\n        sessionId={session.sessionId}\r\n        existingAssessment={session.riskAssessment || null}\r\n        onAssessmentUpdated={(assessment) => {\r\n          setSession(prev => prev ? { ...prev, riskAssessment: assessment } : null);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SessionDetail;\r\n","import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { \r\n  TrendingUp, \r\n  TrendingDown, \r\n  Activity, \r\n  Brain, \r\n  Heart, \r\n  BarChart3, \r\n  PieChart, \r\n  Clock,\r\n  AlertCircle,\r\n  RefreshCw,\r\n  Filter,\r\n  ChevronDown,\r\n  ChevronUp,\r\n  Download,\r\n  Eye\r\n} from 'lucide-react';\r\nimport { useAccessibility } from '../hooks/useAccessibility';\r\nimport { apiService } from '../services/api';\r\nimport { getUserId, formatRelativeTime } from '../utils';\r\nimport type { SessionData, AppError } from '../types';\r\n\r\n// Chart data interfaces\r\ninterface ChartDataPoint {\r\n  date: string;\r\n  depression: number | null;\r\n  anxiety: number | null;\r\n  overall: number | null;\r\n  sessionId: string;\r\n}\r\n\r\ninterface ScoreDistribution {\r\n  category: string;\r\n  count: number;\r\n  percentage: number;\r\n  color: string;\r\n}\r\n\r\ninterface TrendAnalysis {\r\n  direction: 'improving' | 'worsening' | 'stable';\r\n  change: number;\r\n  period: string;\r\n}\r\n\r\n// Filter interface\r\ninterface PredictionFilters {\r\n  dateRange: 'all' | 'week' | 'month' | 'quarter' | 'year';\r\n  scoreType: 'all' | 'depression' | 'anxiety' | 'overall';\r\n  showTrends: boolean;\r\n}\r\n\r\nconst Predictions: React.FC = () => {\r\n  const [sessions, setSessions] = useState<SessionData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<AppError | null>(null);\r\n  const [filters, setFilters] = useState<PredictionFilters>({\r\n    dateRange: 'all',\r\n    scoreType: 'all',\r\n    showTrends: true\r\n  });\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  const { announceToScreenReader } = useAccessibility();\r\n  const navigate = useNavigate();\r\n\r\n  // Handle bar click to navigate to session details\r\n  const handleBarClick = useCallback((sessionId: string) => {\r\n    navigate(`/sessions/${sessionId}`);\r\n    announceToScreenReader(`Navigating to session ${sessionId} details`);\r\n  }, [navigate, announceToScreenReader]);\r\n\r\n  // Load user sessions with prediction data\r\n  const loadPredictions = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const userId = getUserId();\r\n      const response = await apiService.getUserSessions(userId);\r\n      \r\n      // Filter sessions that have analysis results or predictions\r\n      const sessionsWithPredictions = response.sessions.filter(session => {\r\n        return session.analysisResults || session.prediction;\r\n      });\r\n      \r\n      setSessions(sessionsWithPredictions);\r\n      announceToScreenReader(`${sessionsWithPredictions.length} prediction sessions loaded`);\r\n    } catch (err) {\r\n      const appError = err as AppError;\r\n      setError(appError);\r\n      announceToScreenReader(`Error loading predictions: ${appError.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [announceToScreenReader]);\r\n\r\n  useEffect(() => {\r\n    loadPredictions();\r\n  }, [loadPredictions]);\r\n\r\n  // Filter sessions based on date range\r\n  const filteredSessions = useMemo(() => {\r\n    if (filters.dateRange === 'all') return sessions;\r\n\r\n    const now = new Date();\r\n    const startDate = new Date();\r\n    \r\n    switch (filters.dateRange) {\r\n      case 'week':\r\n        startDate.setDate(now.getDate() - 7);\r\n        break;\r\n      case 'month':\r\n        startDate.setMonth(now.getMonth() - 1);\r\n        break;\r\n      case 'quarter':\r\n        startDate.setMonth(now.getMonth() - 3);\r\n        break;\r\n      case 'year':\r\n        startDate.setFullYear(now.getFullYear() - 1);\r\n        break;\r\n    }\r\n    \r\n    return sessions.filter(session => \r\n      new Date(session.createdAt) >= startDate\r\n    );\r\n  }, [sessions, filters.dateRange]);\r\n\r\n  // Prepare chart data\r\n  const chartData = useMemo((): ChartDataPoint[] => {\r\n    return filteredSessions\r\n      .map(session => {\r\n        // Since we now have categorical data, we'll map categories to numbers for visualization\r\n        const mapCategoryToNumber = (category?: string): number | null => {\r\n          if (!category) return null;\r\n          switch (category.toLowerCase()) {\r\n            // Depression categories\r\n            case 'no_to_mild':\r\n              return 1;\r\n            case 'mild_to_moderate':\r\n              return 2;\r\n            case 'moderate_to_severe':\r\n              return 3;\r\n            // Anxiety categories\r\n            case 'no_or_minimal':\r\n              return 1;\r\n            case 'moderate':\r\n              return 2;\r\n            case 'moderately_severe':\r\n              return 3;\r\n            case 'severe':\r\n              return 4;\r\n            default:\r\n              return null;\r\n          }\r\n        };\r\n\r\n        const depression = mapCategoryToNumber((session.prediction as any)?.predicted_score_depression);\r\n        const anxiety = mapCategoryToNumber((session.prediction as any)?.predicted_score_anxiety);\r\n        // Note: predicted_score is deprecated, no longer using overall score\r\n\r\n        return {\r\n          date: session.createdAt,\r\n          depression,\r\n          anxiety,\r\n          overall: null, // No longer using deprecated predicted_score\r\n          sessionId: session.sessionId\r\n        };\r\n      })\r\n      .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\r\n  }, [filteredSessions]);\r\n\r\n  // Calculate score distributions based on categorical data\r\n  const scoreDistribution = useMemo((): Record<string, ScoreDistribution[]> => {\r\n    const distributions: Record<string, ScoreDistribution[]> = {\r\n      depression: [],\r\n      anxiety: []\r\n    };\r\n\r\n    // Define possible categories and their colors\r\n    const categories = [\r\n      // Depression categories\r\n      { category: 'no_to_mild', label: 'No to Mild', color: 'bg-green-400' },\r\n      { category: 'mild_to_moderate', label: 'Mild to Moderate', color: 'bg-yellow-500' },\r\n      { category: 'moderate_to_severe', label: 'Moderate to Severe', color: 'bg-red-600' },\r\n      // Anxiety categories  \r\n      { category: 'no_or_minimal', label: 'No or Minimal', color: 'bg-green-400' },\r\n      { category: 'moderate', label: 'Moderate', color: 'bg-orange-500' },\r\n      { category: 'moderately_severe', label: 'Moderately Severe', color: 'bg-red-500' },\r\n      { category: 'severe', label: 'Severe', color: 'bg-red-700' }\r\n    ];\r\n\r\n    // Process depression scores\r\n    const depressionScores = filteredSessions\r\n      .map(session => (session.prediction as any)?.predicted_score_depression)\r\n      .filter(score => score !== undefined);\r\n\r\n    categories.forEach(cat => {\r\n      const count = depressionScores.filter(score => score === cat.category).length;\r\n      const percentage = depressionScores.length > 0 ? (count / depressionScores.length) * 100 : 0;\r\n      \r\n      if (count > 0) { // Only show categories that have data\r\n        distributions.depression.push({\r\n          category: cat.label,\r\n          count,\r\n          percentage,\r\n          color: cat.color\r\n        });\r\n      }\r\n    });\r\n\r\n    // Process anxiety scores\r\n    const anxietyScores = filteredSessions\r\n      .map(session => (session.prediction as any)?.predicted_score_anxiety)\r\n      .filter(score => score !== undefined);\r\n\r\n    categories.forEach(cat => {\r\n      const count = anxietyScores.filter(score => score === cat.category).length;\r\n      const percentage = anxietyScores.length > 0 ? (count / anxietyScores.length) * 100 : 0;\r\n      \r\n      if (count > 0) { // Only show categories that have data\r\n        distributions.anxiety.push({\r\n          category: cat.label,\r\n          count,\r\n          percentage,\r\n          color: cat.color\r\n        });\r\n      }\r\n    });\r\n\r\n    // Note: Overall scores (predicted_score) are deprecated and no longer processed\r\n\r\n    return distributions;\r\n  }, [filteredSessions]);\r\n\r\n  // Calculate trend analysis for categorical data\r\n  const trendAnalysis = useMemo((): Record<string, TrendAnalysis> => {\r\n    const trends: Record<string, TrendAnalysis> = {};\r\n    \r\n    // For categorical data, we'll analyze if the trend is toward more severe or less severe categories\r\n    const getCategorySeverity = (category?: string): number => {\r\n      if (!category) return 0;\r\n      switch (category.toLowerCase()) {\r\n        // Depression categories: no_to_mild, mild_to_moderate, moderate_to_severe\r\n        case 'no_to_mild':\r\n          return 1;\r\n        case 'mild_to_moderate':\r\n          return 2;\r\n        case 'moderate_to_severe':\r\n          return 3;\r\n        // Anxiety categories: no_or_minimal, moderate, moderately_severe, severe\r\n        case 'no_or_minimal':\r\n          return 1;\r\n        case 'moderate':\r\n          return 2;\r\n        case 'moderately_severe':\r\n          return 3;\r\n        case 'severe':\r\n          return 4;\r\n        default:\r\n          return 0;\r\n      }\r\n    };\r\n\r\n    // Analyze depression trend\r\n    const depressionCategories = filteredSessions\r\n      .map(session => (session.prediction as any)?.predicted_score_depression)\r\n      .filter(cat => cat !== undefined);\r\n\r\n    if (depressionCategories.length < 2) {\r\n      trends.depression = { direction: 'stable', change: 0, period: 'insufficient data' };\r\n    } else {\r\n      const severityScores = depressionCategories.map(getCategorySeverity);\r\n      const firstHalf = severityScores.slice(0, Math.floor(severityScores.length / 2));\r\n      const secondHalf = severityScores.slice(Math.floor(severityScores.length / 2));\r\n\r\n      const firstAvg = firstHalf.reduce((a, b) => a + b, 0) / firstHalf.length;\r\n      const secondAvg = secondHalf.reduce((a, b) => a + b, 0) / secondHalf.length;\r\n      const change = secondAvg - firstAvg;\r\n      \r\n      trends.depression = {\r\n        direction: Math.abs(change) < 0.5 ? 'stable' : change < 0 ? 'improving' : 'worsening',\r\n        change: Math.abs(change),\r\n        period: `${filteredSessions.length} sessions`\r\n      };\r\n    }\r\n\r\n    // Analyze anxiety trend\r\n    const anxietyCategories = filteredSessions\r\n      .map(session => (session.prediction as any)?.predicted_score_anxiety)\r\n      .filter(cat => cat !== undefined);\r\n\r\n    if (anxietyCategories.length < 2) {\r\n      trends.anxiety = { direction: 'stable', change: 0, period: 'insufficient data' };\r\n    } else {\r\n      const severityScores = anxietyCategories.map(getCategorySeverity);\r\n      const firstHalf = severityScores.slice(0, Math.floor(severityScores.length / 2));\r\n      const secondHalf = severityScores.slice(Math.floor(severityScores.length / 2));\r\n\r\n      const firstAvg = firstHalf.reduce((a, b) => a + b, 0) / firstHalf.length;\r\n      const secondAvg = secondHalf.reduce((a, b) => a + b, 0) / secondHalf.length;\r\n      const change = secondAvg - firstAvg;\r\n      \r\n      trends.anxiety = {\r\n        direction: Math.abs(change) < 0.5 ? 'stable' : change < 0 ? 'improving' : 'worsening',\r\n        change: Math.abs(change),\r\n        period: `${filteredSessions.length} sessions`\r\n      };\r\n    }\r\n\r\n    // Overall trend (placeholder)\r\n    trends.overall = { direction: 'stable', change: 0, period: 'coming soon' };\r\n\r\n    return trends;\r\n  }, [filteredSessions]);\r\n\r\n  // Calculate statistics\r\n  const statistics = useMemo(() => {\r\n    const stats = {\r\n      totalSessions: filteredSessions.length,\r\n      avgDepression: 0,\r\n      avgAnxiety: 0,\r\n      avgOverall: 0,\r\n      latestSession: null as SessionData | null,\r\n      improvementSessions: 0\r\n    };\r\n\r\n    if (filteredSessions.length === 0) return stats;\r\n\r\n    // For categorical data, we'll show the most common category instead of averages\r\n    const depressionCategories = filteredSessions\r\n      .map(s => s.prediction?.predictedScoreDepression)\r\n      .filter(s => s !== undefined);\r\n    \r\n    const anxietyCategories = filteredSessions\r\n      .map(s => s.prediction?.predictedScoreAnxiety)\r\n      .filter(s => s !== undefined);\r\n\r\n    // Calculate mode (most frequent category) for depression\r\n    if (depressionCategories.length > 0) {\r\n      const depressionCounts: Record<string, number> = {};\r\n      depressionCategories.forEach(cat => {\r\n        depressionCounts[cat!] = (depressionCounts[cat!] || 0) + 1;\r\n      });\r\n      const mostCommonDepression = Object.entries(depressionCounts)\r\n        .sort(([,a], [,b]) => b - a)[0][0];\r\n      stats.avgDepression = depressionCounts[mostCommonDepression];\r\n    }\r\n\r\n    // Calculate mode (most frequent category) for anxiety\r\n    if (anxietyCategories.length > 0) {\r\n      const anxietyCounts: Record<string, number> = {};\r\n      anxietyCategories.forEach(cat => {\r\n        anxietyCounts[cat!] = (anxietyCounts[cat!] || 0) + 1;\r\n      });\r\n      const mostCommonAnxiety = Object.entries(anxietyCounts)\r\n        .sort(([,a], [,b]) => b - a)[0][0];\r\n      stats.avgAnxiety = anxietyCounts[mostCommonAnxiety];\r\n    }\r\n    \r\n    stats.latestSession = filteredSessions.sort((a, b) => \r\n      new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\r\n    )[0];\r\n\r\n    // Improvement rate will be calculated later - for now set to 0\r\n    stats.improvementSessions = 0;\r\n\r\n    return stats;\r\n  }, [filteredSessions]);\r\n\r\n  // Handle filter changes\r\n  const updateFilter = useCallback((key: keyof PredictionFilters, value: any) => {\r\n    setFilters(prev => ({ ...prev, [key]: value }));\r\n    announceToScreenReader(`Filter ${key} changed to ${value}`);\r\n  }, [announceToScreenReader]);\r\n\r\n  // Download predictions data\r\n  const downloadPredictions = useCallback(() => {\r\n    const dataStr = JSON.stringify(filteredSessions, null, 2);\r\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n    const url = URL.createObjectURL(dataBlob);\r\n    \r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `predictions-${new Date().toISOString().split('T')[0]}.json`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n    \r\n    announceToScreenReader('Predictions data download started');\r\n  }, [filteredSessions, announceToScreenReader]);\r\n\r\n  // Trend indicator component\r\n  const TrendIndicator: React.FC<{ trend: TrendAnalysis; label: string }> = ({ trend, label }) => {\r\n    const Icon = trend.direction === 'improving' ? TrendingDown : \r\n                 trend.direction === 'worsening' ? TrendingUp : Activity;\r\n    const colorClass = trend.direction === 'improving' ? 'text-green-600 dark:text-green-400' :\r\n                       trend.direction === 'worsening' ? 'text-red-600 dark:text-red-400' :\r\n                       'text-gray-600 dark:text-gray-400';\r\n\r\n    return (\r\n      <div className=\"flex items-center space-x-2\">\r\n        <Icon className={`w-4 h-4 ${colorClass}`} aria-hidden=\"true\" />\r\n        <span className=\"text-sm text-gray-700 dark:text-gray-300\">{label}</span>\r\n        <span className={`text-sm font-medium ${colorClass} capitalize`}>\r\n          {trend.direction}\r\n          {trend.period === 'insufficient data' \r\n            ? ' (need more sessions)'\r\n            : trend.period === 'coming soon' \r\n              ? ' (analysis coming soon)'\r\n              : ` (${trend.period})`\r\n          }\r\n        </span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Simple line chart component\r\n  const SimpleLineChart: React.FC<{ \r\n    data: ChartDataPoint[]; \r\n    type: 'depression' | 'anxiety' | 'overall';\r\n    onBarClick: (sessionId: string) => void;\r\n  }> = ({ data, type, onBarClick }) => {\r\n    const scores = data.map(d => d[type]).filter(s => s !== null) as number[];\r\n    if (scores.length === 0) return <div className=\"text-center text-gray-500 py-8\">No data available</div>;\r\n\r\n    const maxScore = Math.max(...scores);\r\n    const minScore = Math.min(...scores);\r\n    const range = maxScore - minScore || 1;\r\n\r\n    // Function to convert numeric score back to category name\r\n    const getScoreCategoryName = (score: number): string => {\r\n      switch (score) {\r\n        case 1: return 'No to Mild / No or Minimal';\r\n        case 2: return 'Mild to Moderate / Moderate';\r\n        case 3: return 'Moderate to Severe / Moderately Severe';\r\n        case 4: return 'Severe';\r\n        default: return 'Unknown';\r\n      }\r\n    };\r\n\r\n    // Function to get category color based on score and chart type\r\n    const getCategoryColor = (score: number, type: 'depression' | 'anxiety' | 'overall'): string => {\r\n      if (type === 'depression') {\r\n        switch (score) {\r\n          case 1: return 'bg-blue-400';  // no_to_mild\r\n          case 2: return 'bg-blue-600';  // mild_to_moderate\r\n          case 3: return 'bg-blue-800';  // moderate_to_severe\r\n          default: return 'bg-blue-500';\r\n        }\r\n      } else if (type === 'anxiety') {\r\n        switch (score) {\r\n          case 1: return 'bg-purple-400'; // no_or_minimal\r\n          case 2: return 'bg-purple-600'; // moderate\r\n          case 3: return 'bg-purple-700'; // moderately_severe\r\n          case 4: return 'bg-purple-900'; // severe\r\n          default: return 'bg-purple-500';\r\n        }\r\n      } else {\r\n        switch (score) {\r\n          case 1: return 'bg-green-400';\r\n          case 2: return 'bg-green-600';\r\n          case 3: return 'bg-green-700';\r\n          case 4: return 'bg-green-800';\r\n          default: return 'bg-green-500';\r\n        }\r\n      }\r\n    };\r\n\r\n    // Legend data - updated to match the chart colors\r\n    const getLegendItems = (chartType: 'depression' | 'anxiety' | 'overall') => {\r\n      const baseItems = [\r\n        { score: 1, label: 'No/Minimal' },\r\n        { score: 2, label: 'Mild' },\r\n        { score: 3, label: 'Moderate' },\r\n        { score: 4, label: 'Mod-Severe' },\r\n        { score: 5, label: 'Severe' }\r\n      ];\r\n      \r\n      return baseItems.map(item => ({\r\n        ...item,\r\n        color: getCategoryColor(item.score, chartType)\r\n      }));\r\n    };\r\n\r\n    // Filter legend to only show categories that exist in the data\r\n    const usedScores = new Set(scores);\r\n    const legendItems = getLegendItems(type);\r\n    const activeLegendItems = legendItems.filter(item => usedScores.has(item.score));\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"h-32 flex items-end space-x-1 px-4 py-2 mb-4\">\r\n          {data.map((dataPoint, index) => {\r\n            const score = dataPoint[type];\r\n            if (score === null) return null;\r\n            \r\n            const height = ((score - minScore) / range) * 100;\r\n            const categoryColor = getCategoryColor(score, type);\r\n            const categoryName = getScoreCategoryName(score);\r\n            const dateStr = new Date(dataPoint.date).toLocaleDateString();\r\n            \r\n            return (\r\n              <div\r\n                key={index}\r\n                className={`flex-1 ${categoryColor} opacity-70 hover:opacity-100 hover:scale-105 transition-all duration-200 rounded-t cursor-pointer relative group chart-bar-dynamic`}\r\n                style={{ '--chart-height': `${Math.max(height, 8)}%` } as React.CSSProperties}\r\n                onClick={() => onBarClick(dataPoint.sessionId)}\r\n                role=\"button\"\r\n                tabIndex={0}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter' || e.key === ' ') {\r\n                    e.preventDefault();\r\n                    onBarClick(dataPoint.sessionId);\r\n                  }\r\n                }}\r\n                aria-label={`View session details for ${categoryName} score on ${dateStr}`}\r\n              >\r\n                {/* Tooltip */}\r\n                <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10\">\r\n                  <div className=\"font-medium\">{categoryName}</div>\r\n                  <div className=\"text-gray-300\">{dateStr}</div>\r\n                  <div className=\"text-gray-300\">Session: {dataPoint.sessionId.slice(-8)}</div>\r\n                  <div className=\"text-gray-400 text-xs mt-1\">Click to view details</div>\r\n                  {/* Tooltip arrow */}\r\n                  <div className=\"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900\"></div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Legend */}\r\n        {activeLegendItems.length > 0 && (\r\n          <div className=\"px-4\">\r\n            <div className=\"flex flex-wrap items-center gap-3 text-xs\">\r\n              <span className=\"text-gray-600 dark:text-gray-400 font-medium\">Legend:</span>\r\n              {activeLegendItems.map((item) => (\r\n                <div key={item.score} className=\"flex items-center gap-1\">\r\n                  <div className={`w-3 h-3 ${item.color} rounded`}></div>\r\n                  <span className=\"text-gray-700 dark:text-gray-300\">{item.label}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        <div className=\"flex items-center justify-center py-16\">\r\n          <RefreshCw className=\"w-8 h-8 text-blue-600 animate-spin mr-3\" aria-hidden=\"true\" />\r\n          <span className=\"text-lg text-gray-900 dark:text-white\">Loading predictions...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6\">\r\n          <div className=\"flex items-center\">\r\n            <AlertCircle className=\"w-5 h-5 text-red-500 mr-3\" aria-hidden=\"true\" />\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-red-900 dark:text-red-200\">\r\n                Error Loading Predictions\r\n              </h3>\r\n              <p className=\"text-red-700 dark:text-red-300 mt-1\">{error.message}</p>\r\n              <button\r\n                type=\"button\"\r\n                onClick={loadPredictions}\r\n                className=\"mt-4 btn btn--primary\"\r\n                aria-label=\"Retry loading predictions\"\r\n              >\r\n                Try Again\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\r\n            My Predictions\r\n          </h1>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mt-1\">\r\n            Analyze your mental health trends and insights over time\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setShowFilters(!showFilters)}\r\n            className=\"btn btn--secondary\"\r\n            aria-expanded={showFilters ? 'true' : 'false'}\r\n            aria-label={`${showFilters ? 'Hide' : 'Show'} filter options`}\r\n          >\r\n            <Filter className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n            Filters\r\n            {showFilters ? <ChevronUp className=\"w-4 h-4 ml-2\" /> : <ChevronDown className=\"w-4 h-4 ml-2\" />}\r\n          </button>\r\n          \r\n          <button\r\n            type=\"button\"\r\n            onClick={loadPredictions}\r\n            className=\"btn btn--secondary\"\r\n            aria-label=\"Refresh predictions data\"\r\n          >\r\n            <RefreshCw className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n            Refresh\r\n          </button>\r\n          \r\n          <button\r\n            type=\"button\"\r\n            onClick={downloadPredictions}\r\n            className=\"btn btn--primary\"\r\n            disabled={filteredSessions.length === 0}\r\n            aria-label=\"Download predictions data\"\r\n          >\r\n            <Download className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\r\n            Download\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      {showFilters && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div>\r\n              <label htmlFor=\"date-range\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Date Range\r\n              </label>\r\n              <select\r\n                id=\"date-range\"\r\n                value={filters.dateRange}\r\n                onChange={(e) => updateFilter('dateRange', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Time</option>\r\n                <option value=\"week\">Past Week</option>\r\n                <option value=\"month\">Past Month</option>\r\n                <option value=\"quarter\">Past Quarter</option>\r\n                <option value=\"year\">Past Year</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label htmlFor=\"score-type\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Focus Score\r\n              </label>\r\n              <select\r\n                id=\"score-type\"\r\n                value={filters.scoreType}\r\n                onChange={(e) => updateFilter('scoreType', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Scores</option>\r\n                <option value=\"depression\">Depression</option>\r\n                <option value=\"anxiety\">Anxiety</option>\r\n                <option value=\"overall\">Overall</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div className=\"flex items-end\">\r\n              <label className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={filters.showTrends}\r\n                  onChange={(e) => updateFilter('showTrends', e.target.checked)}\r\n                  className=\"form__input form__input--checkbox rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-2\"\r\n                />\r\n                <span className=\"text-sm text-gray-700 dark:text-gray-300\">Show trend analysis</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {filteredSessions.length === 0 ? (\r\n        <div className=\"text-center py-16 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n          <Brain className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" aria-hidden=\"true\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\r\n            No Prediction Data Available\r\n          </h3>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\r\n            {sessions.length === 0 \r\n              ? \"You haven't completed any analysis sessions yet.\"\r\n              : \"No sessions found for the selected date range.\"\r\n            }\r\n          </p>\r\n          <Link to=\"/upload\" className=\"btn btn--primary\">\r\n            Start Your First Analysis\r\n          </Link>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* Statistics Overview */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <Activity className=\"w-8 h-8 text-blue-600\" aria-hidden=\"true\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Total Sessions</p>\r\n                  <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">{statistics.totalSessions}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <Brain className=\"w-8 h-8 text-purple-600\" aria-hidden=\"true\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Depression (Most Common)</p>\r\n                  <p className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n                    {(() => {\r\n                      const depressionCategories = filteredSessions\r\n                        .map(s => (s.prediction as any)?.predicted_score_depression)\r\n                        .filter(s => s !== undefined);\r\n                      \r\n                      if (depressionCategories.length === 0) return '‚Äî';\r\n                      \r\n                      const counts: Record<string, number> = {};\r\n                      depressionCategories.forEach(cat => {\r\n                        counts[cat!] = (counts[cat!] || 0) + 1;\r\n                      });\r\n                      \r\n                      const mostCommon = Object.entries(counts)\r\n                        .sort(([,a], [,b]) => b - a)[0][0];\r\n                      \r\n                      return mostCommon.replace(/_/g, ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase());\r\n                    })()}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <Heart className=\"w-8 h-8 text-red-600\" aria-hidden=\"true\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Anxiety (Most Common)</p>\r\n                  <p className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n                    {(() => {\r\n                      const anxietyCategories = filteredSessions\r\n                        .map(s => (s.prediction as any)?.predicted_score_anxiety)\r\n                        .filter(s => s !== undefined);\r\n                      \r\n                      if (anxietyCategories.length === 0) return '‚Äî';\r\n                      \r\n                      const counts: Record<string, number> = {};\r\n                      anxietyCategories.forEach(cat => {\r\n                        counts[cat!] = (counts[cat!] || 0) + 1;\r\n                      });\r\n                      \r\n                      const mostCommon = Object.entries(counts)\r\n                        .sort(([,a], [,b]) => b - a)[0][0];\r\n                      \r\n                      return mostCommon.replace(/_/g, ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase());\r\n                    })()}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Improvement Rate section hidden - feature not implemented yet\r\n            <div className=\"bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 p-6 opacity-60\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <Activity className=\"w-8 h-8 text-gray-500\" aria-hidden=\"true\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Improvement Rate</p>\r\n                  <p className=\"text-lg font-semibold text-gray-500 dark:text-gray-400\">\r\n                    Coming Soon\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\r\n                    Feature in development\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            */}\r\n          </div>\r\n\r\n          {/* Charts Section */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            {/* Score Trends Chart */}\r\n            {(filters.scoreType === 'all' || filters.scoreType === 'depression') && (\r\n              <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n                  <BarChart3 className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n                  Depression Score Trend\r\n                </h3>\r\n                <SimpleLineChart data={chartData} type=\"depression\" onBarClick={handleBarClick} />\r\n                {filters.showTrends && (\r\n                  <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                    <TrendIndicator trend={trendAnalysis.depression} label=\"Trend:\" />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {(filters.scoreType === 'all' || filters.scoreType === 'anxiety') && (\r\n              <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n                  <PieChart className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n                  Anxiety Score Trend\r\n                </h3>\r\n                <SimpleLineChart data={chartData} type=\"anxiety\" onBarClick={handleBarClick} />\r\n                {filters.showTrends && (\r\n                  <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                    <TrendIndicator trend={trendAnalysis.anxiety} label=\"Trend:\" />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Score Distribution */}\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n              <BarChart3 className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n              Score Distribution\r\n            </h3>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {Object.entries(scoreDistribution).map(([scoreType, distribution]) => (\r\n                <div key={scoreType}>\r\n                  <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 capitalize\">\r\n                    {scoreType} Scores\r\n                  </h4>\r\n                  <div className=\"space-y-2\">\r\n                    {distribution.map((item) => (\r\n                      <div key={item.category} className=\"flex items-center\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex justify-between text-xs mb-1\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">{item.category}</span>\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">{item.count} ({item.percentage.toFixed(1)}%)</span>\r\n                          </div>\r\n                          <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2\">\r\n                            <div\r\n                              className={`h-2 rounded-full ${item.color} progress-dynamic progress-animated`}\r\n                              style={{ '--progress-width': `${item.percentage}%` } as React.CSSProperties}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Recent Sessions */}\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\">\r\n                <Clock className=\"w-5 h-5 mr-2\" aria-hidden=\"true\" />\r\n                Recent Analysis Sessions\r\n              </h3>\r\n              <Link to=\"/sessions\" className=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 text-sm\">\r\n                View All Sessions ‚Üí\r\n              </Link>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              {filteredSessions.slice(0, 5).map((session) => (\r\n                <div key={session.sessionId} className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <div className={`w-2 h-2 rounded-full ${\r\n                        session.status === 'succeeded' ? 'bg-green-500' :\r\n                        session.status === 'processing' ? 'bg-blue-500' :\r\n                        session.status === 'failed' ? 'bg-red-500' : 'bg-gray-500'\r\n                      }`} />\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                          {session.audioFileName || `Session ${session.sessionId.slice(-8)}`}\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                          {formatRelativeTime(session.createdAt)}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-4\">\r\n                    {(session.prediction as any)?.predicted_score_depression && (\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Depression</p>\r\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                          {(session.prediction as any).predicted_score_depression.replace(/_/g, ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase())}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                    {(session.prediction as any)?.predicted_score_anxiety && (\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Anxiety</p>\r\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                          {(session.prediction as any).predicted_score_anxiety.replace(/_/g, ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase())}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                    <Link\r\n                      to={`/sessions/${session.sessionId}`}\r\n                      className=\"text-blue-600 hover:text-blue-800 dark:text-blue-400\"\r\n                      aria-label={`View session ${session.sessionId}`}\r\n                    >\r\n                      <Eye className=\"w-4 h-4\" aria-hidden=\"true\" />\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Predictions;\r\n","import { EventEmitter } from 'events';\r\n\r\nexport interface SpeechConfig {\r\n  language: string;\r\n  continuous: boolean;\r\n  interimResults: boolean;\r\n  maxAlternatives: number;\r\n  audioTracks: boolean;\r\n  noiseReduction: boolean;\r\n  echoCancellation: boolean;\r\n}\r\n\r\nexport interface SpeechResult {\r\n  transcript: string;\r\n  confidence: number;\r\n  isFinal: boolean;\r\n  alternatives?: string[];\r\n}\r\n\r\nexport interface VoiceActivityEvent {\r\n  isActive: boolean;\r\n  volume: number;\r\n  timestamp: number;\r\n}\r\n\r\nexport class AdvancedSpeechService extends EventEmitter {\r\n  private recognition: any = null;\r\n  private synthesis: SpeechSynthesis | null = null;\r\n  private audioContext: AudioContext | null = null;\r\n  private microphone: MediaStreamAudioSourceNode | null = null;\r\n  private analyzer: AnalyserNode | null = null;\r\n  private vadProcessor: ScriptProcessorNode | null = null;\r\n  private stream: MediaStream | null = null;\r\n  \r\n  private isListening = false;\r\n  private isVADActive = false;\r\n  private silenceTimeout: NodeJS.Timeout | null = null;\r\n  private speechTimeout: NodeJS.Timeout | null = null;\r\n  \r\n  private config: SpeechConfig = {\r\n    language: 'en-US',\r\n    continuous: true,\r\n    interimResults: true,\r\n    maxAlternatives: 3,\r\n    audioTracks: true,\r\n    noiseReduction: true,\r\n    echoCancellation: true\r\n  };\r\n\r\n  constructor(config?: Partial<SpeechConfig>) {\r\n    super();\r\n    this.config = { ...this.config, ...config };\r\n    this.initializeServices();\r\n  }\r\n\r\n  private async initializeServices(): Promise<void> {\r\n    try {\r\n      // Initialize Speech Recognition\r\n      if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\r\n        const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\r\n        this.recognition = new SpeechRecognition();\r\n        this.setupSpeechRecognition();\r\n      }\r\n\r\n      // Initialize Speech Synthesis\r\n      if ('speechSynthesis' in window) {\r\n        this.synthesis = window.speechSynthesis;\r\n      }\r\n\r\n      // Initialize Audio Context for VAD\r\n      this.audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n      \r\n      this.emit('initialized', {\r\n        speechRecognition: !!this.recognition,\r\n        speechSynthesis: !!this.synthesis,\r\n        voiceActivityDetection: !!this.audioContext\r\n      });\r\n    } catch (error) {\r\n      console.error('Error initializing speech services:', error);\r\n      this.emit('error', { type: 'initialization', error });\r\n    }\r\n  }\r\n\r\n  private setupSpeechRecognition(): void {\r\n    if (!this.recognition) return;\r\n\r\n    this.recognition.continuous = this.config.continuous;\r\n    this.recognition.interimResults = this.config.interimResults;\r\n    this.recognition.lang = this.config.language;\r\n    this.recognition.maxAlternatives = this.config.maxAlternatives;\r\n\r\n    this.recognition.onstart = () => {\r\n      this.isListening = true;\r\n      this.emit('listening', { started: true });\r\n    };\r\n\r\n    this.recognition.onresult = (event: any) => {\r\n      const results: SpeechResult[] = [];\r\n      \r\n      for (let i = event.resultIndex; i < event.results.length; i++) {\r\n        const result = event.results[i];\r\n        const transcript = result[0].transcript;\r\n        const confidence = result[0].confidence;\r\n        const isFinal = result.isFinal;\r\n        \r\n        const alternatives = [];\r\n        for (let j = 1; j < result.length && j < this.config.maxAlternatives; j++) {\r\n          alternatives.push(result[j].transcript);\r\n        }\r\n\r\n        results.push({\r\n          transcript,\r\n          confidence,\r\n          isFinal,\r\n          alternatives\r\n        });\r\n      }\r\n\r\n      this.emit('result', { results });\r\n      \r\n      // Handle final results\r\n      const finalResults = results.filter(r => r.isFinal);\r\n      if (finalResults.length > 0) {\r\n        this.emit('finalResult', { results: finalResults });\r\n      }\r\n    };\r\n\r\n    this.recognition.onerror = (event: any) => {\r\n      console.error('Speech recognition error:', event.error);\r\n      this.emit('error', { type: 'recognition', error: event.error });\r\n      \r\n      // Auto-restart on certain errors\r\n      if (event.error === 'no-speech' || event.error === 'audio-capture') {\r\n        setTimeout(() => this.restartRecognition(), 1000);\r\n      }\r\n    };\r\n\r\n    this.recognition.onend = () => {\r\n      this.isListening = false;\r\n      this.emit('listening', { started: false });\r\n      \r\n      // Auto-restart if continuous mode is enabled\r\n      if (this.config.continuous && this.isVADActive) {\r\n        setTimeout(() => this.startListening(), 100);\r\n      }\r\n    };\r\n  }\r\n\r\n  private async setupVoiceActivityDetection(): Promise<void> {\r\n    try {\r\n      if (!this.audioContext) {\r\n        throw new Error('AudioContext not available');\r\n      }\r\n\r\n      // Request microphone access with enhanced constraints\r\n      this.stream = await navigator.mediaDevices.getUserMedia({\r\n        audio: {\r\n          echoCancellation: this.config.echoCancellation,\r\n          noiseSuppression: this.config.noiseReduction,\r\n          autoGainControl: true,\r\n          sampleRate: 16000,\r\n          channelCount: 1\r\n        }\r\n      });\r\n\r\n      // Create audio nodes\r\n      this.microphone = this.audioContext.createMediaStreamSource(this.stream);\r\n      this.analyzer = this.audioContext.createAnalyser();\r\n      this.vadProcessor = this.audioContext.createScriptProcessor(2048, 1, 1);\r\n\r\n      // Configure analyzer\r\n      this.analyzer.fftSize = 256;\r\n      this.analyzer.smoothingTimeConstant = 0.8;\r\n\r\n      // Connect audio nodes\r\n      this.microphone.connect(this.analyzer);\r\n      this.analyzer.connect(this.vadProcessor);\r\n      this.vadProcessor.connect(this.audioContext.destination);\r\n\r\n      // Set up VAD processing\r\n      this.vadProcessor.onaudioprocess = (event) => {\r\n        this.processVAD(event);\r\n      };\r\n\r\n      this.emit('vadReady');\r\n    } catch (error) {\r\n      console.error('Error setting up VAD:', error);\r\n      this.emit('error', { type: 'vad', error });\r\n    }\r\n  }\r\n\r\n  private processVAD(_event: AudioProcessingEvent): void {\r\n    if (!this.analyzer) return;\r\n\r\n    const bufferLength = this.analyzer.frequencyBinCount;\r\n    const dataArray = new Uint8Array(bufferLength);\r\n    this.analyzer.getByteFrequencyData(dataArray);\r\n\r\n    // Calculate volume and voice activity\r\n    let sum = 0;\r\n    for (let i = 0; i < bufferLength; i++) {\r\n      sum += dataArray[i];\r\n    }\r\n    const volume = sum / bufferLength;\r\n    \r\n    // Voice activity threshold (adjustable)\r\n    const threshold = 30;\r\n    const isVoiceActive = volume > threshold;\r\n\r\n    this.emit('voiceActivity', {\r\n      isActive: isVoiceActive,\r\n      volume,\r\n      timestamp: Date.now()\r\n    } as VoiceActivityEvent);\r\n\r\n    // Handle speech/silence timeouts\r\n    if (isVoiceActive) {\r\n      if (this.silenceTimeout) {\r\n        clearTimeout(this.silenceTimeout);\r\n        this.silenceTimeout = null;\r\n      }\r\n      \r\n      if (!this.speechTimeout) {\r\n        this.speechTimeout = setTimeout(() => {\r\n          this.emit('speechStart');\r\n        }, 200); // 200ms of continuous speech\r\n      }\r\n    } else {\r\n      if (this.speechTimeout) {\r\n        clearTimeout(this.speechTimeout);\r\n        this.speechTimeout = null;\r\n      }\r\n      \r\n      if (!this.silenceTimeout) {\r\n        this.silenceTimeout = setTimeout(() => {\r\n          this.emit('speechEnd');\r\n        }, 1500); // 1.5s of silence\r\n      }\r\n    }\r\n  }\r\n\r\n  public async startListening(): Promise<void> {\r\n    try {\r\n      if (!this.recognition) {\r\n        throw new Error('Speech recognition not available');\r\n      }\r\n\r\n      if (!this.isVADActive) {\r\n        await this.setupVoiceActivityDetection();\r\n        this.isVADActive = true;\r\n      }\r\n\r\n      if (!this.isListening) {\r\n        this.recognition.start();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error starting speech recognition:', error);\r\n      this.emit('error', { type: 'start', error });\r\n    }\r\n  }\r\n\r\n  public stopListening(): void {\r\n    try {\r\n      if (this.recognition && this.isListening) {\r\n        this.recognition.stop();\r\n      }\r\n\r\n      this.isVADActive = false;\r\n      \r\n      // Clean up VAD resources\r\n      if (this.vadProcessor) {\r\n        this.vadProcessor.disconnect();\r\n      }\r\n      if (this.analyzer) {\r\n        this.analyzer.disconnect();\r\n      }\r\n      if (this.microphone) {\r\n        this.microphone.disconnect();\r\n      }\r\n      if (this.stream) {\r\n        this.stream.getTracks().forEach(track => track.stop());\r\n        this.stream = null;\r\n      }\r\n\r\n      // Clear timeouts\r\n      if (this.silenceTimeout) {\r\n        clearTimeout(this.silenceTimeout);\r\n        this.silenceTimeout = null;\r\n      }\r\n      if (this.speechTimeout) {\r\n        clearTimeout(this.speechTimeout);\r\n        this.speechTimeout = null;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error stopping speech recognition:', error);\r\n      this.emit('error', { type: 'stop', error });\r\n    }\r\n  }\r\n\r\n  private restartRecognition(): void {\r\n    if (this.isVADActive) {\r\n      this.stopListening();\r\n      setTimeout(() => this.startListening(), 500);\r\n    }\r\n  }\r\n\r\n  public async speak(text: string, options?: {\r\n    rate?: number;\r\n    pitch?: number;\r\n    volume?: number;\r\n    voice?: SpeechSynthesisVoice;\r\n    interrupt?: boolean;\r\n  }): Promise<void> {\r\n    return new Promise((resolve, reject) => {\r\n      if (!this.synthesis) {\r\n        reject(new Error('Speech synthesis not available'));\r\n        return;\r\n      }\r\n\r\n      if (options?.interrupt) {\r\n        this.synthesis.cancel();\r\n      }\r\n\r\n      const utterance = new SpeechSynthesisUtterance(text);\r\n      utterance.rate = options?.rate || 0.9;\r\n      utterance.pitch = options?.pitch || 1.0;\r\n      utterance.volume = options?.volume || 0.8;\r\n      \r\n      if (options?.voice) {\r\n        utterance.voice = options.voice;\r\n      }\r\n\r\n      utterance.onend = () => {\r\n        this.emit('speechEnd', { text });\r\n        resolve();\r\n      };\r\n\r\n      utterance.onerror = (event) => {\r\n        this.emit('error', { type: 'synthesis', error: event.error });\r\n        reject(new Error(`Speech synthesis error: ${event.error}`));\r\n      };\r\n\r\n      utterance.onstart = () => {\r\n        this.emit('speechStart', { text });\r\n      };\r\n\r\n      this.synthesis.speak(utterance);\r\n    });\r\n  }\r\n\r\n  public getAvailableVoices(): SpeechSynthesisVoice[] {\r\n    if (!this.synthesis) return [];\r\n    return this.synthesis.getVoices();\r\n  }\r\n\r\n  public updateConfig(newConfig: Partial<SpeechConfig>): void {\r\n    this.config = { ...this.config, ...newConfig };\r\n    \r\n    if (this.recognition) {\r\n      this.recognition.continuous = this.config.continuous;\r\n      this.recognition.interimResults = this.config.interimResults;\r\n      this.recognition.lang = this.config.language;\r\n      this.recognition.maxAlternatives = this.config.maxAlternatives;\r\n    }\r\n  }\r\n\r\n  public isAvailable(): boolean {\r\n    return !!(this.recognition && this.synthesis);\r\n  }\r\n\r\n  public isCurrentlyListening(): boolean {\r\n    return this.isListening;\r\n  }\r\n\r\n  public destroy(): void {\r\n    this.stopListening();\r\n    \r\n    if (this.audioContext && this.audioContext.state !== 'closed') {\r\n      this.audioContext.close();\r\n    }\r\n    \r\n    this.removeAllListeners();\r\n  }\r\n}","import { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { AdvancedSpeechService, SpeechResult, VoiceActivityEvent, SpeechConfig } from '@/services/speechService';\r\n\r\nexport interface UseSpeechOptions {\r\n  config?: Partial<SpeechConfig>;\r\n  autoStart?: boolean;\r\n  onResult?: (results: SpeechResult[]) => void;\r\n  onFinalResult?: (results: SpeechResult[]) => void;\r\n  onVoiceActivity?: (event: VoiceActivityEvent) => void;\r\n  onSpeechStart?: () => void;\r\n  onSpeechEnd?: () => void;\r\n  onError?: (error: any) => void;\r\n}\r\n\r\nexport interface UseSpeechReturn {\r\n  // State\r\n  isListening: boolean;\r\n  isAvailable: boolean;\r\n  isVoiceActive: boolean;\r\n  volume: number;\r\n  \r\n  // Controls\r\n  startListening: () => Promise<void>;\r\n  stopListening: () => void;\r\n  speak: (text: string, options?: any) => Promise<void>;\r\n  \r\n  // Configuration\r\n  updateConfig: (config: Partial<SpeechConfig>) => void;\r\n  availableVoices: SpeechSynthesisVoice[];\r\n  \r\n  // Status\r\n  error: string | null;\r\n  isInitialized: boolean;\r\n}\r\n\r\nexport const useSpeech = (options: UseSpeechOptions = {}): UseSpeechReturn => {\r\n  const serviceRef = useRef<AdvancedSpeechService | null>(null);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isAvailable, setIsAvailable] = useState(false);\r\n  const [isVoiceActive, setIsVoiceActive] = useState(false);\r\n  const [volume, setVolume] = useState(0);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isInitialized, setIsInitialized] = useState(false);\r\n  const [availableVoices, setAvailableVoices] = useState<SpeechSynthesisVoice[]>([]);\r\n\r\n  // Initialize speech service\r\n  useEffect(() => {\r\n    serviceRef.current = new AdvancedSpeechService(options.config);\r\n    \r\n    const service = serviceRef.current;\r\n\r\n    // Set up event listeners\r\n    service.on('initialized', (capabilities) => {\r\n      setIsAvailable(capabilities.speechRecognition && capabilities.speechSynthesis);\r\n      setIsInitialized(true);\r\n      setAvailableVoices(service.getAvailableVoices());\r\n    });\r\n\r\n    service.on('listening', ({ started }) => {\r\n      setIsListening(started);\r\n    });\r\n\r\n    service.on('result', ({ results }) => {\r\n      options.onResult?.(results);\r\n    });\r\n\r\n    service.on('finalResult', ({ results }) => {\r\n      options.onFinalResult?.(results);\r\n    });\r\n\r\n    service.on('voiceActivity', (event: VoiceActivityEvent) => {\r\n      setIsVoiceActive(event.isActive);\r\n      setVolume(event.volume);\r\n      options.onVoiceActivity?.(event);\r\n    });\r\n\r\n    service.on('speechStart', () => {\r\n      options.onSpeechStart?.();\r\n    });\r\n\r\n    service.on('speechEnd', () => {\r\n      options.onSpeechEnd?.();\r\n    });\r\n\r\n    service.on('error', ({ type, error: serviceError }) => {\r\n      const errorMessage = `Speech ${type} error: ${serviceError}`;\r\n      setError(errorMessage);\r\n      options.onError?.({ type, error: serviceError });\r\n      console.error(errorMessage);\r\n    });\r\n\r\n    // Auto-start if requested\r\n    if (options.autoStart) {\r\n      service.startListening().catch(console.error);\r\n    }\r\n\r\n    // Cleanup\r\n    return () => {\r\n      service.destroy();\r\n    };\r\n  }, []); // Only run once on mount\r\n\r\n  const startListening = useCallback(async () => {\r\n    try {\r\n      setError(null);\r\n      if (serviceRef.current) {\r\n        await serviceRef.current.startListening();\r\n      }\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to start listening';\r\n      setError(errorMessage);\r\n      throw err;\r\n    }\r\n  }, []);\r\n\r\n  const stopListening = useCallback(() => {\r\n    try {\r\n      setError(null);\r\n      if (serviceRef.current) {\r\n        serviceRef.current.stopListening();\r\n      }\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to stop listening';\r\n      setError(errorMessage);\r\n    }\r\n  }, []);\r\n\r\n  const speak = useCallback(async (text: string, speakOptions?: any) => {\r\n    try {\r\n      setError(null);\r\n      if (serviceRef.current) {\r\n        await serviceRef.current.speak(text, speakOptions);\r\n      }\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to speak';\r\n      setError(errorMessage);\r\n      throw err;\r\n    }\r\n  }, []);\r\n\r\n  const updateConfig = useCallback((config: Partial<SpeechConfig>) => {\r\n    if (serviceRef.current) {\r\n      serviceRef.current.updateConfig(config);\r\n    }\r\n  }, []);\r\n\r\n  // Update available voices when they change\r\n  useEffect(() => {\r\n    if (isInitialized && serviceRef.current) {\r\n      const updateVoices = () => {\r\n        setAvailableVoices(serviceRef.current!.getAvailableVoices());\r\n      };\r\n\r\n      // Update voices initially and when they change\r\n      updateVoices();\r\n      \r\n      if ('speechSynthesis' in window) {\r\n        window.speechSynthesis.addEventListener('voiceschanged', updateVoices);\r\n        return () => {\r\n          window.speechSynthesis.removeEventListener('voiceschanged', updateVoices);\r\n        };\r\n      }\r\n    }\r\n  }, [isInitialized]);\r\n\r\n  return {\r\n    // State\r\n    isListening,\r\n    isAvailable,\r\n    isVoiceActive,\r\n    volume,\r\n    \r\n    // Controls\r\n    startListening,\r\n    stopListening,\r\n    speak,\r\n    \r\n    // Configuration\r\n    updateConfig,\r\n    availableVoices,\r\n    \r\n    // Status\r\n    error,\r\n    isInitialized\r\n  };\r\n};","import React from 'react';\r\n\r\nexport interface VoiceActivityVisualizerProps {\r\n  volume: number;\r\n  isVoiceActive: boolean;\r\n  isListening: boolean;\r\n  size?: 'sm' | 'md' | 'lg';\r\n  className?: string;\r\n}\r\n\r\nexport const VoiceActivityVisualizer: React.FC<VoiceActivityVisualizerProps> = ({\r\n  volume,\r\n  isVoiceActive,\r\n  isListening,\r\n  size = 'md',\r\n  className = ''\r\n}) => {\r\n  const sizeClasses = {\r\n    sm: 'w-8 h-8',\r\n    md: 'w-12 h-12',\r\n    lg: 'w-16 h-16'\r\n  };\r\n\r\n  const barCount = size === 'sm' ? 3 : size === 'md' ? 5 : 7;\r\n  const maxHeight = size === 'sm' ? 16 : size === 'md' ? 24 : 32;\r\n\r\n  // Normalize volume (0-100 to 0-1)\r\n  const normalizedVolume = Math.min(volume / 100, 1);\r\n  \r\n  return (\r\n    <div className={`flex items-center justify-center ${sizeClasses[size]} ${className}`}>\r\n      <div className=\"flex items-end space-x-1 h-full\">\r\n        {Array.from({ length: barCount }).map((_, index) => {\r\n          // Calculate bar height based on volume and index\r\n          const barThreshold = index / barCount;\r\n          const shouldAnimate = isListening && (isVoiceActive || index === 0);\r\n          const isActive = normalizedVolume > barThreshold;\r\n          \r\n          const barHeight = shouldAnimate && isActive \r\n            ? Math.max(4, normalizedVolume * maxHeight)\r\n            : 4;\r\n          const barDelay = index * 100;\r\n          \r\n          return (\r\n            <div\r\n              key={index}\r\n              className={`w-1 transition-all duration-150 rounded-sm voice-bar ${\r\n                shouldAnimate\r\n                  ? isActive\r\n                    ? 'bg-green-500 animate-pulse'\r\n                    : 'bg-gray-300 dark:bg-gray-600'\r\n                  : 'bg-gray-200 dark:bg-gray-700'\r\n              }`}\r\n              data-height={barHeight}\r\n              data-delay={barDelay}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VoiceActivityVisualizer;","import React, { useState } from 'react';\r\nimport { Settings, Volume2, Mic, Languages, RefreshCw } from 'lucide-react';\r\nimport { SpeechConfig } from '@/services/speechService';\r\n\r\nexport interface SpeechSettingsProps {\r\n  config: SpeechConfig;\r\n  availableVoices: SpeechSynthesisVoice[];\r\n  selectedVoice?: SpeechSynthesisVoice;\r\n  onConfigUpdate: (config: Partial<SpeechConfig>) => void;\r\n  onVoiceSelect: (voice: SpeechSynthesisVoice) => void;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const SpeechSettings: React.FC<SpeechSettingsProps> = ({\r\n  config,\r\n  availableVoices,\r\n  selectedVoice,\r\n  onConfigUpdate,\r\n  onVoiceSelect,\r\n  isOpen,\r\n  onClose\r\n}) => {\r\n  const [localConfig, setLocalConfig] = useState<SpeechConfig>(config);\r\n\r\n  const handleConfigChange = (key: keyof SpeechConfig, value: any) => {\r\n    const newConfig = { ...localConfig, [key]: value };\r\n    setLocalConfig(newConfig);\r\n    onConfigUpdate({ [key]: value });\r\n  };\r\n\r\n  const languages = [\r\n    { code: 'en-US', name: 'English (US)' },\r\n    { code: 'en-GB', name: 'English (UK)' },\r\n    { code: 'es-ES', name: 'Spanish (Spain)' },\r\n    { code: 'es-MX', name: 'Spanish (Mexico)' },\r\n    { code: 'fr-FR', name: 'French (France)' },\r\n    { code: 'de-DE', name: 'German (Germany)' },\r\n    { code: 'it-IT', name: 'Italian (Italy)' },\r\n    { code: 'pt-BR', name: 'Portuguese (Brazil)' },\r\n    { code: 'zh-CN', name: 'Chinese (Simplified)' },\r\n    { code: 'ja-JP', name: 'Japanese' },\r\n    { code: 'ko-KR', name: 'Korean' }\r\n  ];\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\" aria-labelledby=\"speech-settings-title\" role=\"dialog\" aria-modal=\"true\">\r\n      <div className=\"flex items-center justify-center min-h-full p-4\">\r\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose}></div>\r\n        \r\n        <div className=\"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Settings className=\"h-6 w-6 text-primary-600 dark:text-primary-400\" />\r\n              <h2 id=\"speech-settings-title\" className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                Speech Settings\r\n              </h2>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors\"\r\n              aria-label=\"Close settings\"\r\n            >\r\n              <span className=\"sr-only\">Close</span>\r\n              <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"p-6 space-y-6\">\r\n            {/* Speech Recognition Settings */}\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Mic className=\"h-5 w-5 text-gray-500\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">Speech Recognition</h3>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {/* Language Selection */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                    <Languages className=\"inline h-4 w-4 mr-1\" />\r\n                    Language\r\n                  </label>\r\n                  <select\r\n                    value={localConfig.language}\r\n                    onChange={(e) => handleConfigChange('language', e.target.value)}\r\n                    title=\"Select language for speech recognition\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\r\n                  >\r\n                    {languages.map((lang) => (\r\n                      <option key={lang.code} value={lang.code}>\r\n                        {lang.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Max Alternatives */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                    Recognition Alternatives\r\n                  </label>\r\n                  <select\r\n                    value={localConfig.maxAlternatives}\r\n                    onChange={(e) => handleConfigChange('maxAlternatives', parseInt(e.target.value))}\r\n                    title=\"Select number of recognition alternatives\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\r\n                  >\r\n                    <option value={1}>1 (fastest)</option>\r\n                    <option value={2}>2 (balanced)</option>\r\n                    <option value={3}>3 (best accuracy)</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Checkboxes */}\r\n              <div className=\"space-y-3\">\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={localConfig.continuous}\r\n                    onChange={(e) => handleConfigChange('continuous', e.target.checked)}\r\n                    className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n                  />\r\n                  <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\r\n                    Continuous listening (auto-restart)\r\n                  </span>\r\n                </label>\r\n\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={localConfig.interimResults}\r\n                    onChange={(e) => handleConfigChange('interimResults', e.target.checked)}\r\n                    className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n                  />\r\n                  <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\r\n                    Show interim results (real-time transcription)\r\n                  </span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Audio Processing Settings */}\r\n            <div className=\"space-y-4 border-t border-gray-200 dark:border-gray-700 pt-6\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">Audio Processing</h3>\r\n\r\n              <div className=\"space-y-3\">\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={localConfig.noiseReduction}\r\n                    onChange={(e) => handleConfigChange('noiseReduction', e.target.checked)}\r\n                    className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n                  />\r\n                  <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\r\n                    Noise reduction\r\n                  </span>\r\n                </label>\r\n\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={localConfig.echoCancellation}\r\n                    onChange={(e) => handleConfigChange('echoCancellation', e.target.checked)}\r\n                    className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n                  />\r\n                  <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\r\n                    Echo cancellation\r\n                  </span>\r\n                </label>\r\n\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={localConfig.audioTracks}\r\n                    onChange={(e) => handleConfigChange('audioTracks', e.target.checked)}\r\n                    className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n                  />\r\n                  <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\r\n                    Enhanced audio processing\r\n                  </span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Voice Selection */}\r\n            <div className=\"space-y-4 border-t border-gray-200 dark:border-gray-700 pt-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Volume2 className=\"h-5 w-5 text-gray-500\" />\r\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">Speech Synthesis</h3>\r\n                </div>\r\n                <button\r\n                  onClick={() => window.speechSynthesis.getVoices()}\r\n                  className=\"flex items-center space-x-1 px-3 py-1 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors\"\r\n                  title=\"Refresh available voices\"\r\n                >\r\n                  <RefreshCw className=\"h-4 w-4\" />\r\n                  <span>Refresh</span>\r\n                </button>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Voice Selection\r\n                </label>\r\n                <select\r\n                  value={selectedVoice?.name || ''}\r\n                  onChange={(e) => {\r\n                    const voice = availableVoices.find(v => v.name === e.target.value);\r\n                    if (voice) onVoiceSelect(voice);\r\n                  }}\r\n                  title=\"Select voice for speech synthesis\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\r\n                >\r\n                  <option value=\"\">Default system voice</option>\r\n                  {availableVoices.map((voice, index) => (\r\n                    <option key={index} value={voice.name}>\r\n                      {voice.name} ({voice.lang}) {voice.default ? '(Default)' : ''}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\r\n                  {availableVoices.length} voices available\r\n                </p>\r\n              </div>\r\n\r\n              {/* Voice Test */}\r\n              {selectedVoice && (\r\n                <div>\r\n                  <button\r\n                    onClick={() => {\r\n                      const utterance = new SpeechSynthesisUtterance('Hello! This is a test of the selected voice.');\r\n                      utterance.voice = selectedVoice;\r\n                      window.speechSynthesis.speak(utterance);\r\n                    }}\r\n                    className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:bg-primary-800 dark:text-primary-200 dark:hover:bg-primary-700\"\r\n                  >\r\n                    <Volume2 className=\"h-4 w-4 mr-1\" />\r\n                    Test Voice\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700\">\r\n            <button\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SpeechSettings;","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Mic, MicOff, Send, Trash2, Volume2, VolumeX, Settings } from 'lucide-react';\r\nimport { useKeyboardNavigation } from '@/hooks/accessibility';\r\nimport { announceToScreenReader } from '@/utils';\r\nimport { useSpeech } from '@/hooks/useSpeech';\r\nimport { SpeechResult, VoiceActivityEvent } from '@/services/speechService';\r\nimport VoiceActivityVisualizer from '@/components/VoiceActivityVisualizer';\r\nimport SpeechSettings from '@/components/SpeechSettings';\r\n\r\ninterface Message {\r\n  id: string;\r\n  content: string;\r\n  role: 'user' | 'assistant';\r\n  timestamp: Date;\r\n  isTyping?: boolean;\r\n}\r\n\r\ninterface AgentState {\r\n  id: string;\r\n  name: string;\r\n  isActive: boolean;\r\n  isTyping: boolean;\r\n}\r\n\r\nexport const AgentExperience: React.FC = () => {\r\n  const { handleEnterSpace } = useKeyboardNavigation();\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [inputText, setInputText] = useState('');\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [currentAgent, setCurrentAgent] = useState<AgentState>({\r\n    id: 'coordinator',\r\n    name: 'Coordinator Agent',\r\n    isActive: true,\r\n    isTyping: false\r\n  });\r\n  const [isAudioOutputEnabled, setIsAudioOutputEnabled] = useState(false);\r\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\r\n  const [selectedVoice, setSelectedVoice] = useState<SpeechSynthesisVoice | undefined>();\r\n  \r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  // Use the advanced speech service\r\n  const speech = useSpeech({\r\n    config: {\r\n      continuous: true,\r\n      interimResults: true,\r\n      language: 'en-US',\r\n      maxAlternatives: 2\r\n    },\r\n    onFinalResult: (results: SpeechResult[]) => {\r\n      if (results.length > 0 && results[0].transcript.trim()) {\r\n        setInputText(results[0].transcript.trim());\r\n        announceToScreenReader(`Voice input captured: ${results[0].transcript}`);\r\n      }\r\n    },\r\n    onVoiceActivity: (_event: VoiceActivityEvent) => {\r\n      // Voice activity is handled by the visualizer\r\n    },\r\n    onError: (error) => {\r\n      console.error('Advanced speech error:', error);\r\n      announceToScreenReader('Voice input error occurred');\r\n    }\r\n  });\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  // Initialize with welcome message\r\n  useEffect(() => {\r\n    const welcomeMessage: Message = {\r\n      id: '1',\r\n      content: \"Hello! I'm your behavioral health assistant. I can help you with depression screenings, provide support, or just have a friendly conversation. What would you like to explore today?\",\r\n      role: 'assistant',\r\n      timestamp: new Date()\r\n    };\r\n    setMessages([welcomeMessage]);\r\n  }, []);\r\n\r\n  const toggleListening = async () => {\r\n    try {\r\n      if (speech.isListening) {\r\n        speech.stopListening();\r\n        announceToScreenReader('Voice input stopped');\r\n      } else {\r\n        await speech.startListening();\r\n        announceToScreenReader('Voice input started');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error toggling speech:', error);\r\n      announceToScreenReader('Error with voice input');\r\n    }\r\n  };\r\n\r\n  const speakMessage = async (text: string) => {\r\n    if (isAudioOutputEnabled && speech.isAvailable) {\r\n      try {\r\n        await speech.speak(text, {\r\n          rate: 0.9,\r\n          pitch: 1.0,\r\n          volume: 0.8,\r\n          voice: selectedVoice,\r\n          interrupt: true\r\n        });\r\n      } catch (error) {\r\n        console.error('Error speaking message:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleAudioOutput = () => {\r\n    setIsAudioOutputEnabled(!isAudioOutputEnabled);\r\n    if (!isAudioOutputEnabled) {\r\n      announceToScreenReader('Audio output enabled');\r\n    } else {\r\n      announceToScreenReader('Audio output disabled');\r\n      // Cancel any ongoing speech using the advanced speech service\r\n      if (speech.isAvailable && window.speechSynthesis) {\r\n        window.speechSynthesis.cancel();\r\n      }\r\n    }\r\n  };\r\n\r\n  const sendMessage = async () => {\r\n    if (!inputText.trim() || isProcessing) return;\r\n\r\n    const userMessage: Message = {\r\n      id: Date.now().toString(),\r\n      content: inputText.trim(),\r\n      role: 'user',\r\n      timestamp: new Date()\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInputText('');\r\n    setIsProcessing(true);\r\n    setCurrentAgent(prev => ({ ...prev, isTyping: true }));\r\n\r\n    try {\r\n      // Simulate agent processing\r\n      await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000));\r\n\r\n      // Mock response based on input\r\n      let responseContent = \"I understand what you're saying. Let me help you with that.\";\r\n      let newAgentId = currentAgent.id;\r\n      let newAgentName = currentAgent.name;\r\n\r\n      const lowerInput = userMessage.content.toLowerCase();\r\n      \r\n      if (lowerInput.includes('phq') || lowerInput.includes('depression') || lowerInput.includes('screening')) {\r\n        responseContent = \"I can help you with a depression screening. I'll start with the PHQ-2, which is a quick 2-question assessment. This will help determine if a more comprehensive evaluation might be helpful. Shall we begin?\";\r\n        newAgentId = 'phq2';\r\n        newAgentName = 'PHQ-2 Agent';\r\n      } else if (lowerInput.includes('joke') || lowerInput.includes('funny') || lowerInput.includes('humor')) {\r\n        responseContent = \"Hey there! üòÑ I'm here to brighten your day with some wholesome humor! I can share clean jokes, funny stories, or just have some playful banter. What sounds good to you?\";\r\n        newAgentId = 'comedian';\r\n        newAgentName = 'Comedy Agent';\r\n      } else if (lowerInput.includes('crisis') || lowerInput.includes('emergency') || lowerInput.includes('help')) {\r\n        responseContent = \"I'm here to help. If you're experiencing a mental health crisis, please reach out for immediate support: Call 988 (Suicide & Crisis Lifeline) or contact your local emergency services. I'm also here to provide support and connect you with appropriate resources.\";\r\n      }\r\n\r\n      const assistantMessage: Message = {\r\n        id: (Date.now() + 1).toString(),\r\n        content: responseContent,\r\n        role: 'assistant',\r\n        timestamp: new Date()\r\n      };\r\n\r\n      setMessages(prev => [...prev, assistantMessage]);\r\n      \r\n      // Update current agent if it changed\r\n      if (newAgentId !== currentAgent.id) {\r\n        setCurrentAgent({\r\n          id: newAgentId,\r\n          name: newAgentName,\r\n          isActive: true,\r\n          isTyping: false\r\n        });\r\n        announceToScreenReader(`Agent changed to ${newAgentName}`);\r\n      }\r\n\r\n      // Speak the response if audio output is enabled\r\n      speakMessage(responseContent);\r\n\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      const errorMessage: Message = {\r\n        id: (Date.now() + 1).toString(),\r\n        content: \"I'm sorry, I encountered an error processing your message. Please try again.\",\r\n        role: 'assistant',\r\n        timestamp: new Date()\r\n      };\r\n      setMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setIsProcessing(false);\r\n      setCurrentAgent(prev => ({ ...prev, isTyping: false }));\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  const clearConversation = () => {\r\n    setMessages([]);\r\n    setCurrentAgent({\r\n      id: 'coordinator',\r\n      name: 'Coordinator Agent',\r\n      isActive: true,\r\n      isTyping: false\r\n    });\r\n    announceToScreenReader('Conversation cleared');\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-[calc(100vh-8rem)] flex flex-col bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          {/* Animated Bot Visualization with Voice Activity */}\r\n          <div className=\"relative\">\r\n            <div className={`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 ${\r\n              currentAgent.isTyping \r\n                ? 'bg-primary-500 animate-pulse' \r\n                : currentAgent.isActive \r\n                  ? 'bg-green-500' \r\n                  : 'bg-gray-400'\r\n            }`}>\r\n              <span className=\"text-white text-lg\">ü§ñ</span>\r\n            </div>\r\n            {/* Pulsing indicator when agent is active */}\r\n            {currentAgent.isActive && (\r\n              <div className=\"absolute -inset-1 rounded-full bg-green-400 opacity-30 animate-ping\"></div>\r\n            )}\r\n            {/* Voice activity indicator */}\r\n            {speech.isListening && (\r\n              <div className=\"absolute -bottom-1 -right-1\">\r\n                <VoiceActivityVisualizer \r\n                  volume={speech.volume}\r\n                  isVoiceActive={speech.isVoiceActive}\r\n                  isListening={speech.isListening}\r\n                  size=\"sm\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <div>\r\n            <h1 className=\"text-xl font-semibold text-gray-900 dark:text-gray-100\">\r\n              Agent Experience\r\n            </h1>\r\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n              Current Agent: {currentAgent.name}\r\n              {currentAgent.isTyping && (\r\n                <span className=\"ml-2 text-primary-600 dark:text-primary-400\">\r\n                  <span className=\"animate-pulse\">Typing...</span>\r\n                </span>\r\n              )}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2\">\r\n          {/* Speech Settings */}\r\n          <button\r\n            onClick={() => setIsSettingsOpen(true)}\r\n            onKeyDown={handleEnterSpace(() => setIsSettingsOpen(true))}\r\n            className=\"p-2 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n            aria-label=\"Open speech settings\"\r\n            title=\"Speech settings\"\r\n          >\r\n            <Settings size={20} />\r\n          </button>\r\n\r\n          {/* Audio Output Toggle */}\r\n          <button\r\n            onClick={toggleAudioOutput}\r\n            onKeyDown={handleEnterSpace(toggleAudioOutput)}\r\n            className={`p-2 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 ${\r\n              isAudioOutputEnabled\r\n                ? 'bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-300'\r\n                : 'bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400'\r\n            }`}\r\n            aria-label={`${isAudioOutputEnabled ? 'Disable' : 'Enable'} audio output`}\r\n            title={`${isAudioOutputEnabled ? 'Disable' : 'Enable'} audio output`}\r\n          >\r\n            {isAudioOutputEnabled ? <Volume2 size={20} /> : <VolumeX size={20} />}\r\n          </button>\r\n\r\n          {/* Clear Conversation */}\r\n          <button\r\n            onClick={clearConversation}\r\n            onKeyDown={handleEnterSpace(clearConversation)}\r\n            className=\"p-2 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n            aria-label=\"Clear conversation\"\r\n            title=\"Clear conversation\"\r\n          >\r\n            <Trash2 size={20} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Messages */}\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n        {messages.map((message) => (\r\n          <div\r\n            key={message.id}\r\n            className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\r\n          >\r\n            <div\r\n              className={`max-w-[80%] p-3 rounded-lg ${\r\n                message.role === 'user'\r\n                  ? 'bg-primary-600 text-white'\r\n                  : 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100'\r\n              }`}\r\n            >\r\n              <p className=\"text-sm\">{message.content}</p>\r\n              <p className={`text-xs mt-1 opacity-70 ${\r\n                message.role === 'user' ? 'text-primary-200' : 'text-gray-500 dark:text-gray-400'\r\n              }`}>\r\n                {message.timestamp.toLocaleTimeString()}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        \r\n        {/* Typing indicator */}\r\n        {currentAgent.isTyping && (\r\n          <div className=\"flex justify-start\">\r\n            <div className=\"bg-gray-100 dark:bg-gray-800 p-3 rounded-lg\">\r\n              <div className=\"flex space-x-1\">\r\n                <div className=\"w-2 h-2 bg-gray-500 rounded-full animate-bounce\"></div>\r\n                <div className=\"w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-100\"></div>\r\n                <div className=\"w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-200\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* Input Area */}\r\n      <div className=\"p-4 border-t border-gray-200 dark:border-gray-700\">\r\n        <div className=\"flex items-end space-x-2\">\r\n          {/* Voice Input Button */}\r\n          {speech.isAvailable && (\r\n            <button\r\n              onClick={toggleListening}\r\n              onKeyDown={handleEnterSpace(toggleListening)}\r\n              disabled={isProcessing}\r\n              className={`p-3 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 ${\r\n                speech.isListening\r\n                  ? 'bg-red-600 text-white hover:bg-red-700'\r\n                  : 'bg-primary-600 text-white hover:bg-primary-700 disabled:bg-gray-400'\r\n              }`}\r\n              aria-label={speech.isListening ? 'Stop voice input' : 'Start voice input'}\r\n              title={speech.isListening ? 'Stop voice input' : 'Start voice input'}\r\n            >\r\n              {speech.isListening ? <MicOff size={20} /> : <Mic size={20} />}\r\n            </button>\r\n          )}\r\n\r\n          {/* Text Input */}\r\n          <div className=\"flex-1\">\r\n            <textarea\r\n              ref={textareaRef}\r\n              value={inputText}\r\n              onChange={(e) => setInputText(e.target.value)}\r\n              onKeyPress={handleKeyPress}\r\n              placeholder=\"Type your message here or use voice input...\"\r\n              disabled={isProcessing}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-800 dark:text-gray-100 disabled:bg-gray-100 dark:disabled:bg-gray-700 min-h-[44px] max-h-[120px]\"\r\n              rows={1}\r\n              aria-label=\"Message input\"\r\n            />\r\n          </div>\r\n\r\n          {/* Send Button */}\r\n          <button\r\n            onClick={sendMessage}\r\n            onKeyDown={handleEnterSpace(sendMessage)}\r\n            disabled={!inputText.trim() || isProcessing}\r\n            className=\"p-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n            aria-label=\"Send message\"\r\n            title=\"Send message\"\r\n          >\r\n            <Send size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Status indicators */}\r\n        <div className=\"flex items-center justify-between mt-2 text-xs text-gray-500 dark:text-gray-400\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            {speech.isListening && (\r\n              <span className=\"flex items-center space-x-1 text-red-600 dark:text-red-400\">\r\n                <div className=\"w-2 h-2 bg-red-600 rounded-full animate-pulse\"></div>\r\n                <span>Listening...</span>\r\n              </span>\r\n            )}\r\n            \r\n            {speech.isVoiceActive && (\r\n              <span className=\"flex items-center space-x-1 text-green-600 dark:text-green-400\">\r\n                <div className=\"w-2 h-2 bg-green-600 rounded-full animate-pulse\"></div>\r\n                <span>Voice detected</span>\r\n              </span>\r\n            )}\r\n            \r\n            {speech.isAvailable && (\r\n              <span className=\"text-green-600 dark:text-green-400\">Voice input available</span>\r\n            )}\r\n            \r\n            {speech.error && (\r\n              <span className=\"text-red-600 dark:text-red-400\">Speech error: {speech.error}</span>\r\n            )}\r\n            \r\n            {isAudioOutputEnabled && (\r\n              <span className=\"text-blue-600 dark:text-blue-400\">Audio output enabled</span>\r\n            )}\r\n          </div>\r\n          \r\n          <span>Press Enter to send, Shift+Enter for new line</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Speech Settings Modal */}\r\n      <SpeechSettings\r\n        config={{\r\n          language: 'en-US',\r\n          continuous: true,\r\n          interimResults: true,\r\n          maxAlternatives: 2,\r\n          audioTracks: true,\r\n          noiseReduction: true,\r\n          echoCancellation: true\r\n        }}\r\n        availableVoices={speech.availableVoices}\r\n        selectedVoice={selectedVoice}\r\n        onConfigUpdate={(config) => speech.updateConfig(config)}\r\n        onVoiceSelect={(voice) => setSelectedVoice(voice)}\r\n        isOpen={isSettingsOpen}\r\n        onClose={() => setIsSettingsOpen(false)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AgentExperience;","import React from 'react';\r\nimport { RefreshCw, AlertCircle, Activity, Info } from 'lucide-react';\r\nimport { useHealthCheck } from '@/hooks/api';\r\nimport { useAnnouncements } from '@/hooks/accessibility';\r\n\r\n// Re-export the full UploadAnalyze component\r\nexport { default as UploadAnalyze } from './UploadAnalyze';\r\n\r\n// Re-export the full Sessions component\r\nexport { default as Sessions } from './Sessions';\r\n\r\nexport { default as SessionDetail } from './SessionDetail';\r\n\r\nexport { default as Predictions } from './Predictions';\r\n\r\nexport { default as AgentExperience } from './AgentExperience';\r\n\r\nexport const SystemHealth: React.FC = () => {\r\n  const { data: healthStatus, isLoading, error, refetch } = useHealthCheck();\r\n  const { announce } = useAnnouncements();\r\n\r\n  React.useEffect(() => {\r\n    announce('System Health page loaded', 'polite');\r\n  }, [announce]);\r\n\r\n  const formatTimestamp = (timestamp?: string) => {\r\n    if (!timestamp) return 'Just now';\r\n    \r\n    try {\r\n      const date = new Date(timestamp);\r\n      if (isNaN(date.getTime())) {\r\n        return 'Just now';\r\n      }\r\n      \r\n      return date.toLocaleString(undefined, {\r\n        year: 'numeric',\r\n        month: 'short',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit'\r\n      });\r\n    } catch (error) {\r\n      return 'Just now';\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status?.toLowerCase()) {\r\n      case 'healthy':\r\n        return 'text-green-600 dark:text-green-400';\r\n      case 'degraded':\r\n        return 'text-yellow-600 dark:text-yellow-400';\r\n      case 'unhealthy':\r\n        return 'text-red-600 dark:text-red-400';\r\n      default:\r\n        return 'text-gray-600 dark:text-gray-400';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status?.toLowerCase()) {\r\n      case 'healthy':\r\n        return '‚úÖ';\r\n      case 'degraded':\r\n        return '‚ö†Ô∏è';\r\n      case 'unhealthy':\r\n        return '‚ùå';\r\n      default:\r\n        return '‚ùì';\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const baseClasses = 'inline-flex items-center px-3 py-1 rounded-full text-sm font-medium';\r\n    switch (status?.toLowerCase()) {\r\n      case 'healthy':\r\n        return `${baseClasses} bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`;\r\n      case 'degraded':\r\n        return `${baseClasses} bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`;\r\n      case 'unhealthy':\r\n        return `${baseClasses} bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200`;\r\n      default:\r\n        return `${baseClasses} bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200`;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto p-6 space-y-6\">\r\n      {/* Page Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\r\n            System Health\r\n          </h1>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mt-1\">\r\n            Monitor API status and system connectivity\r\n          </p>\r\n        </div>\r\n        <button type=\"button\"\r\n          onClick={() => refetch()}\r\n          disabled={isLoading}\r\n          className=\"btn btn--secondary flex items-center space-x-2\"\r\n          aria-label=\"Refresh system health status\"\r\n        >\r\n          <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n          <span>Refresh</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Loading State */}\r\n      {isLoading && (\r\n        <div className=\"flex items-center justify-center py-16\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <RefreshCw className=\"w-6 h-6 text-blue-600 animate-spin\" />\r\n            <span className=\"text-lg text-gray-900 dark:text-white\">\r\n              Checking system health...\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Error State */}\r\n      {error && (\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6\">\r\n          <div className=\"flex items-center\">\r\n            <AlertCircle className=\"w-6 h-6 text-red-500 mr-3\" />\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-red-900 dark:text-red-200\">\r\n                Health Check Failed\r\n              </h3>\r\n              <p className=\"text-red-700 dark:text-red-300 mt-1\">\r\n                {error.message || 'Unable to retrieve system health status'}\r\n              </p>\r\n              <button type=\"button\"\r\n                onClick={() => refetch()}\r\n                className=\"mt-3 text-sm text-red-800 dark:text-red-200 hover:text-red-900 dark:hover:text-red-100 underline\"\r\n              >\r\n                Try again\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Health Status Display */}\r\n      {healthStatus && !isLoading && (\r\n        <>\r\n          {/* Overall Status Card */}\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                Overall System Status\r\n              </h2>\r\n              <div className={getStatusBadge(healthStatus.status)}>\r\n                <span className=\"mr-1\">{getStatusIcon(healthStatus.status)}</span>\r\n                {healthStatus.status}\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <div className=\"text-center\">\r\n                <div className=\"text-3xl mb-2\">{getStatusIcon(healthStatus.status)}</div>\r\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">Status</div>\r\n                <div className={`font-medium ${getStatusColor(healthStatus.status)}`}>\r\n                  {healthStatus.status}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"text-center\">\r\n                <div className=\"text-3xl mb-2\">‚è±Ô∏è</div>\r\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">Response Time</div>\r\n                <div className=\"font-medium text-gray-900 dark:text-white\">\r\n                  {healthStatus.totalDuration ? `${healthStatus.totalDuration}ms` : 'N/A'}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"text-center\">\r\n                <div className=\"text-3xl mb-2\">üìÖ</div>\r\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">Last Checked</div>\r\n                <div className=\"font-medium text-gray-900 dark:text-white\">\r\n                  {formatTimestamp(healthStatus.timestamp)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Individual Service Checks */}\r\n          {healthStatus.checks && Object.keys(healthStatus.checks).length > 0 && (\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n                <Activity className=\"w-5 h-5 mr-2\" />\r\n                Service Details\r\n              </h3>\r\n              \r\n              <div className=\"space-y-4\">\r\n                {Object.entries(healthStatus.checks).map(([serviceName, serviceStatus]) => (\r\n                  <div key={serviceName} className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <span className=\"text-lg\">{getStatusIcon(serviceStatus.status)}</span>\r\n                      <div>\r\n                        <div className=\"font-medium text-gray-900 dark:text-white capitalize\">\r\n                          {serviceName.replace(/-/g, ' ')}\r\n                        </div>\r\n                        {serviceStatus.description && (\r\n                          <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                            {serviceStatus.description}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex items-center space-x-4\">\r\n                      {serviceStatus.duration && (\r\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          {serviceStatus.duration}ms\r\n                        </div>\r\n                      )}\r\n                      <div className={getStatusBadge(serviceStatus.status)}>\r\n                        {serviceStatus.status}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* System Information */}\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\r\n              <Info className=\"w-5 h-5 mr-2\" />\r\n              System Information\r\n            </h3>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <h4 className=\"font-medium text-gray-900 dark:text-white mb-3\">API Endpoints</h4>\r\n                <div className=\"space-y-2 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-500 dark:text-gray-400\">Health Check:</span>\r\n                    <span className=\"font-mono text-gray-900 dark:text-white\">/health</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-500 dark:text-gray-400\">Sessions:</span>\r\n                    <span className=\"font-mono text-gray-900 dark:text-white\">/sessions</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-500 dark:text-gray-400\">Predictions:</span>\r\n                    <span className=\"font-mono text-gray-900 dark:text-white\">/predictions</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <h4 className=\"font-medium text-gray-900 dark:text-white mb-3\">Connection Status</h4>\r\n                <div className=\"space-y-2 text-sm\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n                    <span className=\"text-gray-900 dark:text-white\">API Connected</span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\r\n                    <span className=\"text-gray-900 dark:text-white\">Real-time Updates</span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <div className=\"w-2 h-2 bg-purple-500 rounded-full\"></div>\r\n                    <span className=\"text-gray-900 dark:text-white\">Auto-refresh Enabled</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const NotFound: React.FC = () => {\r\n  return (\r\n    <div className=\"text-center py-16\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Page Not Found</h1>\r\n      <p className=\"text-gray-600 dark:text-gray-400 mb-8\">\r\n        The page you're looking for doesn't exist.\r\n      </p>\r\n      <a\r\n        href=\"/\"\r\n        className=\"btn btn--primary\"\r\n      >\r\n        Go to Dashboard\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n","import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\r\nimport { ThemeProvider } from '@/contexts/ThemeContext';\r\nimport { Layout } from '@/components/layout/Layout';\r\n\r\n// Page components\r\nimport { Dashboard } from '@/pages/Dashboard';\r\nimport { UploadAnalyze, Sessions, SessionDetail, Predictions, AgentExperience, SystemHealth, NotFound } from '@/pages';\r\n\r\n// Create React Query client\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      retry: (failureCount, error) => {\r\n        // Don't retry on 4xx errors except 408 (timeout)\r\n        if (error && typeof error === 'object' && 'code' in error) {\r\n          const errorCode = (error as any).code;\r\n          if (errorCode?.startsWith('HTTP_4') && errorCode !== 'HTTP_408') {\r\n            return false;\r\n          }\r\n        }\r\n        return failureCount < 3;\r\n      },\r\n      staleTime: 5 * 60 * 1000, // 5 minutes\r\n      refetchOnWindowFocus: false,\r\n    },\r\n    mutations: {\r\n      retry: 1,\r\n    },\r\n  },\r\n});\r\n\r\nfunction App() {\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <ThemeProvider>\r\n        <Router>\r\n          <Layout>\r\n            <Routes>\r\n              {/* Main routes */}\r\n              <Route path=\"/\" element={<Dashboard />} />\r\n              <Route path=\"/upload\" element={<UploadAnalyze />} />\r\n              <Route path=\"/sessions\" element={<Sessions />} />\r\n              <Route path=\"/sessions/:sessionId\" element={<SessionDetail />} />\r\n              <Route path=\"/predictions\" element={<Predictions />} />\r\n              <Route path=\"/agent-experience\" element={<AgentExperience />} />\r\n              <Route path=\"/health\" element={<SystemHealth />} />\r\n              \r\n              {/* 404 page */}\r\n              <Route path=\"*\" element={<NotFound />} />\r\n            </Routes>\r\n          </Layout>\r\n        </Router>\r\n      </ThemeProvider>\r\n      \r\n      {/* React Query DevTools (only in development) */}\r\n      {import.meta.env.DEV && <ReactQueryDevtools initialIsOpen={false} />}\r\n    </QueryClientProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport App from './App.tsx';\r\nimport './index.css';\r\nimport './styles/dynamic-progress.css';\r\nimport './styles/components.css';\r\nimport './styles/layouts.css';\r\n\r\n// Apply initial theme before React renders\r\nconst storedTheme = localStorage.getItem('bh_theme');\r\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\r\nconst initialTheme = storedTheme === 'dark' || (!storedTheme && prefersDark);\r\n\r\nif (initialTheme) {\r\n  document.documentElement.classList.add('dark');\r\n} else {\r\n  document.documentElement.classList.remove('dark');\r\n}\r\n\r\nReactDOM.createRoot(document.getElementById('root')!).render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n);\r\n"],"names":["m","require$$0","client","getRandomValues","rnds8","rng","byteToHex","i","unsafeStringify","arr","offset","randomUUID","native","v4","options","buf","rnds","config","STORAGE_KEYS","API_ENDPOINTS","A11Y","getUserId","userId","uuidv4","setUserId","generateNewUserId","newUserId","isCustomUserId","setUserIdMode","isCustom","getStoredTheme","stored","setStoredTheme","theme","getStoredProcessingMode","setStoredProcessingMode","isMultiMode","formatRelativeTime","date","now","target","diffMs","diffMinutes","diffHours","diffDays","formatDateTime","createAppError","code","message","details","isNetworkError","error","announceToScreenReader","priority","announcement","focusElement","elementId","delay","element","ThemeContext","createContext","useTheme","context","useContext","ThemeProvider","children","setThemeState","useState","setTheme","newTheme","toggleTheme","useEffect","mediaQuery","handleChange","e","value","jsx","useAnnouncements","announce","useCallback","announceError","announceSuccess","useKeyboardNavigation","handleEscape","callback","handleKeyDown","event","handleEnterSpace","useSkipToContent","Header","className","location","useLocation","isMobileMenuOpen","setIsMobileMenuOpen","navItems","isActivePath","path","toggleMobileMenu","closeMobileMenu","jsxs","Link","label","icon","MicrosoftLogo","size","props","Layout","skipToMain","toKebabCase","string","toCamelCase","match","p1","p2","toPascalCase","camelCase","mergeClasses","classes","index","array","hasA11yProp","prop","defaultAttributes","Icon","forwardRef","color","strokeWidth","absoluteStrokeWidth","iconNode","rest","ref","createElement","tag","attrs","createLucideIcon","iconName","Component","__iconNode","Activity","ArrowLeft","Brain","Calendar","ChartColumn","ChartPie","ChevronDown","ChevronUp","CircleAlert","CircleCheckBig","CircleX","Clock","Download","EyeOff","Eye","FileAudio","FileText","File","Files","Funnel","Heart","Info","Languages","Lightbulb","LoaderCircle","MicOff","Mic","Pause","Play","Plus","RefreshCw","Search","Send","Settings","ShieldAlert","Target","Trash2","TrendingDown","TrendingUp","TriangleAlert","Upload","User","Volume2","VolumeX","X","ApiClient","baseUrl","__publicField","response","errorData","endpoint","cleanEndpoint","url","defaultHeaders","data","apiClient","apiService","request","sessionId","sessionData","PredictionPoller","onUpdate","onComplete","onError","poll","result","nextInterval","QUERY_KEYS","useHealthCheck","useQuery","useUserSessions","effectiveUserId","Dashboard","healthStatus","isHealthLoading","healthError","sessionsResponse","isSessionsLoading","quickActions","getActionClasses","baseClasses","action","session","_a","_b","AudioProcessor","FFmpeg","baseURL","toBlobURL","file","onProgress","progress","inputName","fetchFile","outputName","command","outputData","outputBlob","convertedFile","filename","lastDot","supportedFormats","extension","audioProcessorInstance","getAudioProcessor","convertAudioToWav","AzureBlobService","sasUrl","blobServiceClient","BlobServiceClient","fileName","containerClient","blobName","blockBlobClient","uploadProgress","progressPercent","blobUrl","originalFileName","timestamp","randomId","blobServiceInstance","getBlobService","uploadToAzureBlob","blobService","fileToUpload","useAccessibility","announcementRef","useRef","liveRegion","focusManagement","container","firstElement","focusableElements","lastElement","handleTabKey","keyboardNavigation","items","currentIndex","onIndexChange","newIndex","onEscape","generateId","prefix","prefersReducedMotion","getValidationAttributes","isValid","errorMessage","describedById","attributes","UploadAnalyze","audioFiles","setAudioFiles","setIsMultiMode","processingProgress","setProcessingProgress","results","setResults","fileStates","setFileStates","isProcessing","setIsProcessing","audioFile","setAudioFile","setProgress","setResult","isPlaying","setIsPlaying","currentTime","setCurrentTime","playingFileId","setPlayingFileId","userMetadata","setUserMetadata","setError","toasts","setToasts","isCustomUserIdMode","setIsCustomUserIdMode","customUserId","setCustomUserId","userIdError","setUserIdError","audioRef","fileInputRef","addToast","type","title","id","newToast","prev","toast","removeToast","resetState","handleToggleUserIdMode","newMode","handleCustomUserIdChange","handleApplyCustomUserId","trimmedUserId","handleGenerateNewUserId","generateFileId","addAudioFile","audio","af","removeAudioFile","fileId","fileToRemove","f","removed","handleFileSelect","files","supportedMimeTypes","hasValidExtension","ext","maxSize","handleDragOver","handleDrop","toggleMode","handlePlayPause","handleTimeUpdate","formatTime","seconds","mins","secs","validateMetadata","errors","age","weight","buildMetadata","metadata","hasMetadata","processAndAnalyze","processMultipleFiles","processSingleFile","processSingleFileById","sessionRequest","sessionResponse","initialSessionData","convertedBlob","audioUrl","updatedSessionData","poller","resolve","reject","analysisResult","insight","err","validationErrors","filesToProcess","totalFiles","completedFiles","startSingleFile","getProgressColor","stage","Fragment","fileState","CheckCircle","AlertCircle","Loader2","a","statusConfig","XCircle","formatScoreCategory","category","l","getSeverityLevel","Sessions","sessions","setSessions","loading","setLoading","selectedSessions","setSelectedSessions","showFilters","setShowFilters","filters","setFilters","loadSessions","transformedSessions","prediction","appError","filteredAndSortedSessions","useMemo","filtered","searchLower","startDate","b","comparison","depressionA","depressionB","anxietyA","anxietyB","updateFilter","key","toggleSessionSelection","newSelection","toggleSelectAll","s","handleBulkDelete","formatFileSize","bytes","k","sizes","StatusBadge","status","Filter","riskLevelConfig","AlertTriangle","RiskAssessmentComponent","existingAssessment","onAssessmentUpdated","assessment","setAssessment","isGenerating","setIsGenerating","isLoading","setIsLoading","generateAssessment","loadAssessment","RiskLevelBadge","riskLevel","riskScore","factor","recommendation","followUp","SessionDetail","useParams","navigate","useNavigate","setSession","showRawJson","setShowRawJson","isRefreshing","setIsRefreshing","audioPlaying","setAudioPlaying","loadSession","refreshSession","toggleRawJson","newState","toggleAudioPlayback","downloadSessionData","dataStr","dataBlob","link","_d","_c","_e","_f","_g","_h","_j","_i","_k","_l","_m","_n","Predictions","handleBarClick","loadPredictions","sessionsWithPredictions","filteredSessions","chartData","mapCategoryToNumber","depression","anxiety","scoreDistribution","distributions","categories","depressionScores","score","cat","count","percentage","anxietyScores","trendAnalysis","trends","getCategorySeverity","depressionCategories","severityScores","firstHalf","secondHalf","firstAvg","change","anxietyCategories","statistics","stats","depressionCounts","mostCommonDepression","anxietyCounts","mostCommonAnxiety","downloadPredictions","TrendIndicator","trend","colorClass","SimpleLineChart","onBarClick","scores","d","maxScore","minScore","range","getScoreCategoryName","getCategoryColor","getLegendItems","chartType","item","usedScores","activeLegendItems","dataPoint","height","categoryColor","categoryName","dateStr","counts","BarChart3","PieChart","scoreType","distribution","AdvancedSpeechService","EventEmitter","SpeechRecognition","transcript","confidence","isFinal","alternatives","j","finalResults","r","_event","bufferLength","dataArray","sum","volume","isVoiceActive","track","text","utterance","newConfig","useSpeech","serviceRef","isListening","setIsListening","isAvailable","setIsAvailable","setIsVoiceActive","setVolume","isInitialized","setIsInitialized","availableVoices","setAvailableVoices","service","capabilities","started","serviceError","startListening","stopListening","speak","speakOptions","updateConfig","updateVoices","VoiceActivityVisualizer","sizeClasses","barCount","maxHeight","normalizedVolume","_","barThreshold","shouldAnimate","isActive","barHeight","barDelay","SpeechSettings","selectedVoice","onConfigUpdate","onVoiceSelect","isOpen","onClose","localConfig","setLocalConfig","handleConfigChange","languages","lang","voice","v","AgentExperience","messages","setMessages","inputText","setInputText","currentAgent","setCurrentAgent","isAudioOutputEnabled","setIsAudioOutputEnabled","isSettingsOpen","setIsSettingsOpen","setSelectedVoice","messagesEndRef","textareaRef","speech","toggleListening","speakMessage","toggleAudioOutput","sendMessage","userMessage","responseContent","newAgentId","newAgentName","lowerInput","assistantMessage","handleKeyPress","clearConversation","SystemHealth","refetch","React","formatTimestamp","getStatusColor","getStatusIcon","getStatusBadge","serviceName","serviceStatus","NotFound","queryClient","QueryClient","failureCount","errorCode","App","QueryClientProvider","Router","Routes","Route","storedTheme","prefersDark","initialTheme","ReactDOM"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60]}