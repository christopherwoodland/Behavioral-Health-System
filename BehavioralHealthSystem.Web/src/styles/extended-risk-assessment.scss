/**
 * Extended Risk Assessment Display Styles
 * Follows BEM methodology for class naming
 */

.extended-assessment {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  padding: 1.5rem;
  background-color: var(--color-bg-primary, #ffffff);
  border-radius: 0.5rem;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);

  /* Header */
  &__header {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--color-border-primary, #e5e7eb);
  }

  &__title-section {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  &__title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-text-primary, #111827);
  }

  &__subtitle {
    font-size: 0.875rem;
    color: var(--color-text-secondary, #6b7280);
  }

  &__metadata {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  &__model-badge,
  &__time-badge,
  &__date-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 500;
    border-radius: 9999px;
    background-color: var(--color-bg-secondary, #f3f4f6);
    color: var(--color-text-secondary, #6b7280);
  }

  /* Tabs */
  &__tabs {
    display: flex;
    gap: 0.25rem;
    border-bottom: 1px solid var(--color-border-primary, #e5e7eb);
  }

  &__tab {
    padding: 0.75rem 1.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text-secondary, #6b7280);
    background-color: transparent;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    transition: all 0.2s ease-in-out;

    &:hover {
      color: var(--color-text-primary, #111827);
      background-color: var(--color-bg-hover, #f9fafb);
    }

    &--active {
      color: #3b82f6;
      border-bottom-color: #3b82f6;
      background-color: #eff6ff;
    }
  }

  /* Content */
  &__content {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  /* Overview Tab */
  &__overview {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  &__risk-summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
  }

  &__risk-level,
  &__schizo-likelihood {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 1.5rem;
    border-radius: 0.5rem;
    border: 2px solid;
  }

  &__risk-level-label,
  &__likelihood-label {
    font-size: 0.875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  &__risk-level-value,
  &__likelihood-value {
    font-size: 1.875rem;
    font-weight: 700;
  }

  &__risk-score,
  &__confidence {
    font-size: 0.875rem;
    opacity: 0.8;
  }

  &__summary-section,
  &__schizo-summary-section {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  &__section-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--color-text-primary, #111827);
  }

  &__summary-text {
    font-size: 0.9375rem;
    line-height: 1.6;
    color: var(--color-text-secondary, #4b5563);
  }

  &__quick-facts {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }

  &__fact-card {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    padding: 1rem;
    background-color: var(--color-bg-secondary, #f9fafb);
    border-radius: 0.375rem;
    border: 1px solid var(--color-border-primary, #e5e7eb);
  }

  &__fact-label {
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-tertiary, #9ca3af);
  }

  &__fact-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-text-primary, #111827);
  }

  &__fact-detail {
    font-size: 0.875rem;
    color: var(--color-text-secondary, #6b7280);
  }

  /* Schizophrenia Tab */
  &__schizophrenia {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  &__criterion-section {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 1.5rem;
    background-color: var(--color-bg-secondary, #f9fafb);
    border-radius: 0.5rem;
    border: 1px solid var(--color-border-primary, #e5e7eb);
  }

  &__criterion-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  &__criterion-badge {
    padding: 0.375rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 600;
    border-radius: 9999px;
    border: 1px solid;
  }

  &__criterion-description {
    font-size: 0.875rem;
    color: var(--color-text-secondary, #6b7280);
    font-style: italic;
  }

  &__symptoms-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
  }

  /* Symptom Cards */
  &__symptom-card {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    padding: 1rem;
    background-color: var(--color-bg-primary, #ffffff);
    border-radius: 0.375rem;
    border: 1px solid var(--color-border-primary, #e5e7eb);
  }

  &__symptom-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.5rem;
  }

  &__symptom-title {
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--color-text-primary, #111827);
  }

  &__symptom-badge {
    padding: 0.25rem 0.625rem;
    font-size: 0.75rem;
    font-weight: 600;
    border-radius: 9999px;
    background-color: var(--color-bg-secondary, #f3f4f6);
    white-space: nowrap;
  }

  &__symptom-description {
    font-size: 0.8125rem;
    color: var(--color-text-secondary, #6b7280);
    line-height: 1.5;
  }

  &__symptom-presence {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
  }

  &__label {
    font-weight: 500;
    color: var(--color-text-secondary, #6b7280);
  }

  &__value {
    font-weight: 600;
  }

  &__symptom-evidence {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
  }

  &__evidence-list {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    padding-left: 1.25rem;
    list-style: disc;
  }

  &__evidence-item {
    font-size: 0.8125rem;
    color: var(--color-text-secondary, #4b5563);
  }

  &__symptom-notes {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
    padding: 0.75rem;
    background-color: #fef3c7;
    border-radius: 0.375rem;
    border-left: 3px solid #f59e0b;
  }

  &__notes-text {
    font-size: 0.8125rem;
    color: #92400e;
  }

  &__severity-bar {
    width: 100%;
    height: 0.5rem;
    background-color: var(--color-bg-tertiary, #e5e7eb);
    border-radius: 9999px;
    overflow: hidden;
  }

  &__severity-fill {
    height: 100%;
    transition: width 0.3s ease-in-out;

    // Dynamic width via attribute
    &[data-severity-width] {
      width: attr(data-severity-width);
    }

    // Severity level colors
    &--level-0 {
      width: 0%;
      background-color: #9ca3af;
    }

    &--level-1 {
      width: 25%;
      background-color: #3b82f6;
    }

    &--level-2 {
      width: 50%;
      background-color: #eab308;
    }

    &--level-3 {
      width: 75%;
      background-color: #f97316;
    }

    &--level-4 {
      width: 100%;
      background-color: #dc2626;
    }
  }

  /* Functional Impairment */
  &__impairment-level {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem;
    background-color: var(--color-bg-primary, #ffffff);
    border-radius: 0.375rem;
    border: 1px solid var(--color-border-primary, #e5e7eb);
  }

  &__impairment-label {
    font-size: 0.875rem;
    font-weight: 500;
  }

  &__impairment-value {
    font-size: 1.125rem;
    font-weight: 700;
  }

  &__impairment-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
  }

  &__impairment-card {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 1rem;
    background-color: var(--color-bg-primary, #ffffff);
    border-radius: 0.375rem;
    border: 1px solid var(--color-border-primary, #e5e7eb);
  }

  &__impairment-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-text-primary, #111827);
  }

  &__impairment-text {
    font-size: 0.8125rem;
    line-height: 1.5;
    color: var(--color-text-secondary, #4b5563);
  }

  &__duration-text {
    font-size: 0.875rem;
    line-height: 1.6;
    color: var(--color-text-secondary, #4b5563);
  }

  /* Differential Diagnosis */
  &__differential-section {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  &__differential-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding-left: 1.5rem;
    list-style: decimal;
  }

  &__differential-item {
    font-size: 0.875rem;
    color: var(--color-text-secondary, #4b5563);
  }

  /* Clinical Details Tab */
  &__details {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  &__detail-section {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    padding: 1rem;
    background-color: var(--color-bg-secondary, #f9fafb);
    border-radius: 0.375rem;
    border-left: 3px solid #3b82f6;

    &--urgent {
      background-color: #fef2f2;
      border-left-color: #dc2626;
    }
  }

  &__detail-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding-left: 1.5rem;
    list-style: disc;

    &--warning {
      list-style: square;
      
      .extended-assessment__detail-item {
        color: #b45309;
      }
    }

    &--urgent {
      list-style: circle;
      
      .extended-assessment__detail-item {
        color: #b91c1c;
        font-weight: 500;
      }
    }
  }

  &__detail-item {
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--color-text-secondary, #4b5563);
  }

  /* Confidence Section */
  &__confidence-section {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
  }

  &__confidence-card {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 1rem;
    background-color: var(--color-bg-secondary, #f9fafb);
    border-radius: 0.375rem;
    border: 1px solid var(--color-border-primary, #e5e7eb);
  }

  &__confidence-label {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text-primary, #111827);
  }

  &__confidence-bar {
    width: 100%;
    height: 1rem;
    background-color: var(--color-bg-tertiary, #e5e7eb);
    border-radius: 9999px;
    overflow: hidden;
  }

  &__confidence-fill {
    height: 100%;
    background: linear-gradient(90deg, #3b82f6 0%, #10b981 100%);
    transition: width 0.5s ease-in-out;

    // Dynamic width calculation via JavaScript
    // Width will be set via inline style from React component
  }

  &__confidence-value {
    font-size: 1.125rem;
    font-weight: 700;
    color: #3b82f6;
  }

  /* Disclaimer */
  &__disclaimer {
    padding: 1rem;
    font-size: 0.8125rem;
    line-height: 1.5;
    color: #92400e;
    background-color: #fef3c7;
    border-radius: 0.375rem;
    border-left: 4px solid #f59e0b;

    strong {
      font-weight: 600;
      color: #78350f;
    }
  }
}

/* Dark mode support - Using .dark class (TailwindCSS class-based dark mode) */
/* Important: Use :global to access the .dark class from the parent HTML element */
:global(.dark) {
  .extended-assessment {
    background-color: #1f2937 !important;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.18) !important;
    
    &__header {
      border-bottom-color: #374151 !important;
    }
    
    &__title,
    &__section-title,
    &__symptom-title,
    &__impairment-title,
    &__criterion-title,
    &__confidence-label,
    &__fact-value {
      color: #f9fafb !important;
    }

    &__subtitle,
    &__summary-text,
    &__symptom-description,
    &__evidence-item,
    &__impairment-text,
    &__duration-text,
    &__differential-item,
    &__detail-item,
    &__fact-detail {
      color: #d1d5db !important;
    }
    
    &__label {
      color: #9ca3af !important;
    }
    
    &__fact-label {
      color: #6b7280 !important;
    }

    &__model-badge,
    &__time-badge,
    &__date-badge {
      background-color: #374151 !important;
      color: #d1d5db !important;
    }

    &__tabs {
      border-bottom-color: #374151 !important;
    }

    &__tab {
      color: #9ca3af !important;
      
      &:hover {
        color: #f9fafb !important;
        background-color: #374151 !important;
      }
      
      &--active {
        color: #60a5fa !important;
        border-bottom-color: #60a5fa !important;
        background-color: #1e3a8a !important;
      }
    }

    &__symptom-card,
    &__impairment-card,
    &__impairment-level {
      background-color: #111827 !important;
      border-color: #374151 !important;
    }

    &__criterion-section,
    &__detail-section,
    &__confidence-card,
    &__fact-card {
      background-color: #111827 !important;
      border-color: #374151 !important;
    }

    &__severity-bar {
      background-color: #374151 !important;
    }
    
    &__symptom-notes {
      background-color: #78350f !important;
      border-left-color: #f59e0b !important;
    }
    
    &__notes-text {
      color: #fde68a !important;
    }
    
    &__disclaimer {
      background-color: #78350f !important;
      color: #fde68a !important;
      border-left-color: #f59e0b !important;
      
      strong {
        color: #fef3c7 !important;
      }
    }
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .extended-assessment {
    padding: 1rem;

    &__title {
      font-size: 1.25rem;
    }

    &__tabs {
      overflow-x: auto;
    }

    &__tab {
      padding: 0.625rem 1rem;
      font-size: 0.8125rem;
      white-space: nowrap;
    }

    &__symptoms-grid,
    &__impairment-details,
    &__quick-facts,
    &__confidence-section {
      grid-template-columns: 1fr;
    }

    &__risk-summary {
      grid-template-columns: 1fr;
    }
  }
}

/* Print styles */
@media print {
  .extended-assessment {
    &__tabs {
      display: none;
    }

    &__content {
      page-break-inside: avoid;
    }

    &__criterion-section {
      page-break-inside: avoid;
    }
  }
}
